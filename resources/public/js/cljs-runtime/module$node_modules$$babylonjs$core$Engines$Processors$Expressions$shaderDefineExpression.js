shadow$provide.module$node_modules$$babylonjs$core$Engines$Processors$Expressions$shaderDefineExpression=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.ShaderDefineExpression=void 0;class ShaderDefineExpression{isTrue(preprocessors){return!0}static postfixToInfix(postfix){const stack=[];for(const c of postfix)if(void 0===ShaderDefineExpression._OperatorPriority[c])stack.push(c);else{postfix=stack[stack.length-1];const v2=stack[stack.length-2];
stack.length-=2;stack.push(`(${v2}${c}${postfix})`)}return stack[stack.length-1]}static infixToPostfix(infix){var cacheItem=ShaderDefineExpression._InfixToPostfixCache.get(infix);if(cacheItem)return cacheItem.accessTime=Date.now(),cacheItem.result;if(!(infix.includes("\x26\x26")||infix.includes("||")||infix.includes(")")||infix.includes("(")))return[infix];const result=[];let stackIdx=-1;cacheItem=()=>{operand=operand.trim();""!==operand&&(result.push(operand),operand="")};const push=s=>{stackIdx<
ShaderDefineExpression._Stack.length-1&&(ShaderDefineExpression._Stack[++stackIdx]=s)},pop=()=>-1===stackIdx?"!!INVALID EXPRESSION!!":ShaderDefineExpression._Stack[stackIdx--];let idx=0,operand="";for(;idx<infix.length;){const c=infix.charAt(idx),token=idx<infix.length-1?infix.substr(idx,2):"";if("("===c)operand="",push(c);else if(")"===c){for(cacheItem();-1!==stackIdx&&"("!==ShaderDefineExpression._Stack[stackIdx];)result.push(pop());pop()}else if(1<ShaderDefineExpression._OperatorPriority[token]){for(cacheItem();-1!==
stackIdx&&ShaderDefineExpression._OperatorPriority[ShaderDefineExpression._Stack[stackIdx]]>=ShaderDefineExpression._OperatorPriority[token];)result.push(pop());push(token);idx++}else operand+=c;idx++}for(cacheItem();-1!==stackIdx;)"("===ShaderDefineExpression._Stack[stackIdx]?pop():result.push(pop());ShaderDefineExpression._InfixToPostfixCache.size>=ShaderDefineExpression.InfixToPostfixCacheLimitSize&&ShaderDefineExpression.ClearCache();ShaderDefineExpression._InfixToPostfixCache.set(infix,{result,
accessTime:Date.now()});return result}static ClearCache(){const sortedCache=Array.from(ShaderDefineExpression._InfixToPostfixCache.entries()).sort((a,b)=>a[1].accessTime-b[1].accessTime);for(let i=0;i<ShaderDefineExpression.InfixToPostfixCacheCleanupSize;i++)ShaderDefineExpression._InfixToPostfixCache.delete(sortedCache[i][0])}}exports.ShaderDefineExpression=ShaderDefineExpression;ShaderDefineExpression.InfixToPostfixCacheLimitSize=5E4;ShaderDefineExpression.InfixToPostfixCacheCleanupSize=25E3;ShaderDefineExpression._InfixToPostfixCache=
new Map;ShaderDefineExpression._OperatorPriority={")":0,"(":1,"||":2,"\x26\x26":3};ShaderDefineExpression._Stack="                   ".split(" ")}
//# sourceMappingURL=module$node_modules$$babylonjs$core$Engines$Processors$Expressions$shaderDefineExpression.js.map
