{
"version":3,
"file":"module$node_modules$$babylonjs$core$Engines$Extensions$engine_uniformBuffer.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/@babylonjs/core/Engines/Extensions/engine.uniformBuffer.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$babylonjs$core$Engines$Extensions$engine_uniformBuffer\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _thinEngine = require(\"../../Engines/thinEngine.js\");\n\nvar _webGLDataBuffer = require(\"../../Meshes/WebGL/webGLDataBuffer.js\");\n\n_thinEngine.ThinEngine.prototype.createUniformBuffer = function (elements) {\n  const ubo = this._gl.createBuffer();\n\n  if (!ubo) {\n    throw new Error(\"Unable to create uniform buffer\");\n  }\n\n  const result = new _webGLDataBuffer.WebGLDataBuffer(ubo);\n  this.bindUniformBuffer(result);\n\n  if (elements instanceof Float32Array) {\n    this._gl.bufferData(this._gl.UNIFORM_BUFFER, elements, this._gl.STATIC_DRAW);\n  } else {\n    this._gl.bufferData(this._gl.UNIFORM_BUFFER, new Float32Array(elements), this._gl.STATIC_DRAW);\n  }\n\n  this.bindUniformBuffer(null);\n  result.references = 1;\n  return result;\n};\n\n_thinEngine.ThinEngine.prototype.createDynamicUniformBuffer = function (elements) {\n  const ubo = this._gl.createBuffer();\n\n  if (!ubo) {\n    throw new Error(\"Unable to create dynamic uniform buffer\");\n  }\n\n  const result = new _webGLDataBuffer.WebGLDataBuffer(ubo);\n  this.bindUniformBuffer(result);\n\n  if (elements instanceof Float32Array) {\n    this._gl.bufferData(this._gl.UNIFORM_BUFFER, elements, this._gl.DYNAMIC_DRAW);\n  } else {\n    this._gl.bufferData(this._gl.UNIFORM_BUFFER, new Float32Array(elements), this._gl.DYNAMIC_DRAW);\n  }\n\n  this.bindUniformBuffer(null);\n  result.references = 1;\n  return result;\n};\n\n_thinEngine.ThinEngine.prototype.updateUniformBuffer = function (uniformBuffer, elements, offset, count) {\n  this.bindUniformBuffer(uniformBuffer);\n\n  if (offset === undefined) {\n    offset = 0;\n  }\n\n  if (count === undefined) {\n    if (elements instanceof Float32Array) {\n      this._gl.bufferSubData(this._gl.UNIFORM_BUFFER, offset, elements);\n    } else {\n      this._gl.bufferSubData(this._gl.UNIFORM_BUFFER, offset, new Float32Array(elements));\n    }\n  } else {\n    if (elements instanceof Float32Array) {\n      this._gl.bufferSubData(this._gl.UNIFORM_BUFFER, 0, elements.subarray(offset, offset + count));\n    } else {\n      this._gl.bufferSubData(this._gl.UNIFORM_BUFFER, 0, new Float32Array(elements).subarray(offset, offset + count));\n    }\n  }\n\n  this.bindUniformBuffer(null);\n};\n\n_thinEngine.ThinEngine.prototype.bindUniformBuffer = function (buffer) {\n  this._gl.bindBuffer(this._gl.UNIFORM_BUFFER, buffer ? buffer.underlyingResource : null);\n}; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n_thinEngine.ThinEngine.prototype.bindUniformBufferBase = function (buffer, location, name) {\n  this._gl.bindBufferBase(this._gl.UNIFORM_BUFFER, location, buffer ? buffer.underlyingResource : null);\n};\n\n_thinEngine.ThinEngine.prototype.bindUniformBlock = function (pipelineContext, blockName, index) {\n  const program = pipelineContext.program;\n\n  const uniformLocation = this._gl.getUniformBlockIndex(program, blockName);\n\n  if (uniformLocation !== 0xffffffff) {\n    this._gl.uniformBlockBinding(program, uniformLocation, index);\n  }\n};\n};"],
"names":["shadow$provide","global","require","module","exports","_thinEngine","_webGLDataBuffer","ThinEngine","prototype","createUniformBuffer","_thinEngine.ThinEngine.prototype.createUniformBuffer","elements","ubo","_gl","createBuffer","Error","result","WebGLDataBuffer","bindUniformBuffer","Float32Array","bufferData","UNIFORM_BUFFER","STATIC_DRAW","references","createDynamicUniformBuffer","_thinEngine.ThinEngine.prototype.createDynamicUniformBuffer","DYNAMIC_DRAW","updateUniformBuffer","_thinEngine.ThinEngine.prototype.updateUniformBuffer","uniformBuffer","offset","count","undefined","bufferSubData","subarray","_thinEngine.ThinEngine.prototype.bindUniformBuffer","buffer","bindBuffer","underlyingResource","bindUniformBufferBase","_thinEngine.ThinEngine.prototype.bindUniformBufferBase","location","name","bindBufferBase","bindUniformBlock","_thinEngine.ThinEngine.prototype.bindUniformBlock","pipelineContext","blockName","index","program","uniformLocation","getUniformBlockIndex","uniformBlockBinding"]
}
