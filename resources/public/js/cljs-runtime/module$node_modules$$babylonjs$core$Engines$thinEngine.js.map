{
"version":3,
"file":"module$node_modules$$babylonjs$core$Engines$thinEngine.js",
"lineCount":186,
"mappings":"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",
"sources":["node_modules/@babylonjs/core/Engines/thinEngine.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$babylonjs$core$Engines$thinEngine\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ThinEngine = void 0;\n\nvar _engineStore = require(\"./engineStore.js\");\n\nvar _effect = require(\"../Materials/effect.js\");\n\nvar _devTools = require(\"../Misc/devTools.js\");\n\nvar _observable = require(\"../Misc/observable.js\");\n\nvar _depthCullingState = require(\"../States/depthCullingState.js\");\n\nvar _stencilState = require(\"../States/stencilState.js\");\n\nvar _alphaCullingState = require(\"../States/alphaCullingState.js\");\n\nvar _internalTexture = require(\"../Materials/Textures/internalTexture.js\");\n\nvar _logger = require(\"../Misc/logger.js\");\n\nvar _domManagement = require(\"../Misc/domManagement.js\");\n\nvar _webGLShaderProcessors = require(\"./WebGL/webGLShaderProcessors.js\");\n\nvar _webGL2ShaderProcessors = require(\"./WebGL/webGL2ShaderProcessors.js\");\n\nvar _webGLDataBuffer = require(\"../Meshes/WebGL/webGLDataBuffer.js\");\n\nvar _webGLPipelineContext = require(\"./WebGL/webGLPipelineContext.js\");\n\nvar _performanceConfigurator = require(\"./performanceConfigurator.js\");\n\nvar _webGLHardwareTexture = require(\"./WebGL/webGLHardwareTexture.js\");\n\nvar _drawWrapper = require(\"../Materials/drawWrapper.js\");\n\nvar _stencilStateComposer = require(\"../States/stencilStateComposer.js\");\n\nvar _shaderLanguage = require(\"../Materials/shaderLanguage.js\");\n\nvar _precisionDate = require(\"../Misc/precisionDate.js\");\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\n/**\n * Keeps track of all the buffer info used in engine.\n */\nclass BufferPointer {}\n/**\n * The base engine class (root of all engines)\n */\n\n\nclass ThinEngine {\n  /**\n   * Returns the current npm package of the sdk\n   */\n  // Not mixed with Version for tooling purpose.\n  static get NpmPackage() {\n    return \"babylonjs@6.11.1\";\n  }\n  /**\n   * Returns the current version of the framework\n   */\n\n\n  static get Version() {\n    return \"6.11.1\";\n  }\n  /**\n   * Returns a string describing the current engine\n   */\n\n\n  get description() {\n    let description = this.name + this.webGLVersion;\n\n    if (this._caps.parallelShaderCompile) {\n      description += \" - Parallel shader compilation\";\n    }\n\n    return description;\n  }\n  /**\n   * Gets or sets the name of the engine\n   */\n\n\n  get name() {\n    return this._name;\n  }\n\n  set name(value) {\n    this._name = value;\n  }\n  /**\n   * Returns the version of the engine\n   */\n\n\n  get version() {\n    return this._webGLVersion;\n  }\n\n  get isDisposed() {\n    return this._isDisposed;\n  }\n  /**\n   * Gets or sets the relative url used to load shaders if using the engine in non-minified mode\n   */\n\n\n  static get ShadersRepository() {\n    return _effect.Effect.ShadersRepository;\n  }\n\n  static set ShadersRepository(value) {\n    _effect.Effect.ShadersRepository = value;\n  }\n  /**\n   * @internal\n   */\n\n\n  _getShaderProcessor(shaderLanguage) {\n    return this._shaderProcessor;\n  }\n  /**\n   * Gets or sets a boolean indicating if depth buffer should be reverse, going from far to near.\n   * This can provide greater z depth for distant objects.\n   */\n\n\n  get useReverseDepthBuffer() {\n    return this._useReverseDepthBuffer;\n  }\n\n  set useReverseDepthBuffer(useReverse) {\n    if (useReverse === this._useReverseDepthBuffer) {\n      return;\n    }\n\n    this._useReverseDepthBuffer = useReverse;\n\n    if (useReverse) {\n      this._depthCullingState.depthFunc = 518;\n    } else {\n      this._depthCullingState.depthFunc = 515;\n    }\n  }\n  /**\n   * Gets the current frame id\n   */\n\n\n  get frameId() {\n    return this._frameId;\n  }\n  /**\n   * Gets a boolean indicating that the engine supports uniform buffers\n   * @see https://doc.babylonjs.com/setup/support/webGL2#uniform-buffer-objets\n   */\n\n\n  get supportsUniformBuffers() {\n    return this.webGLVersion > 1 && !this.disableUniformBuffers;\n  }\n  /**\n   * Gets the options used for engine creation\n   * @returns EngineOptions object\n   */\n\n\n  getCreationOptions() {\n    return this._creationOptions;\n  }\n  /** @internal */\n\n\n  get _shouldUseHighPrecisionShader() {\n    return !!(this._caps.highPrecisionShaderSupported && this._highPrecisionShadersAllowed);\n  }\n  /**\n   * Gets a boolean indicating that only power of 2 textures are supported\n   * Please note that you can still use non power of 2 textures but in this case the engine will forcefully convert them\n   */\n\n\n  get needPOTTextures() {\n    return this._webGLVersion < 2 || this.forcePOTTextures;\n  }\n  /**\n   * Gets the list of current active render loop functions\n   * @returns an array with the current render loop functions\n   */\n\n\n  get activeRenderLoops() {\n    return this._activeRenderLoops;\n  }\n  /**\n   * Gets or sets a boolean indicating if resources should be retained to be able to handle context lost events\n   * @see https://doc.babylonjs.com/features/featuresDeepDive/scene/optimize_your_scene#handling-webgl-context-lost\n   */\n\n\n  get doNotHandleContextLost() {\n    return this._doNotHandleContextLost;\n  }\n\n  set doNotHandleContextLost(value) {\n    this._doNotHandleContextLost = value;\n  }\n\n  get _supportsHardwareTextureRescaling() {\n    return false;\n  }\n  /**\n   * sets the object from which width and height will be taken from when getting render width and height\n   * Will fallback to the gl object\n   * @param dimensions the framebuffer width and height that will be used.\n   */\n\n\n  set framebufferDimensionsObject(dimensions) {\n    this._framebufferDimensionsObject = dimensions;\n  }\n  /**\n   * Gets the current viewport\n   */\n\n\n  get currentViewport() {\n    return this._cachedViewport;\n  }\n  /**\n   * Gets the default empty texture\n   */\n\n\n  get emptyTexture() {\n    if (!this._emptyTexture) {\n      this._emptyTexture = this.createRawTexture(new Uint8Array(4), 1, 1, 5, false, false, 1);\n    }\n\n    return this._emptyTexture;\n  }\n  /**\n   * Gets the default empty 3D texture\n   */\n\n\n  get emptyTexture3D() {\n    if (!this._emptyTexture3D) {\n      this._emptyTexture3D = this.createRawTexture3D(new Uint8Array(4), 1, 1, 1, 5, false, false, 1);\n    }\n\n    return this._emptyTexture3D;\n  }\n  /**\n   * Gets the default empty 2D array texture\n   */\n\n\n  get emptyTexture2DArray() {\n    if (!this._emptyTexture2DArray) {\n      this._emptyTexture2DArray = this.createRawTexture2DArray(new Uint8Array(4), 1, 1, 1, 5, false, false, 1);\n    }\n\n    return this._emptyTexture2DArray;\n  }\n  /**\n   * Gets the default empty cube texture\n   */\n\n\n  get emptyCubeTexture() {\n    if (!this._emptyCubeTexture) {\n      const faceData = new Uint8Array(4);\n      const cubeData = [faceData, faceData, faceData, faceData, faceData, faceData];\n      this._emptyCubeTexture = this.createRawCubeTexture(cubeData, 1, 5, 0, false, false, 1);\n    }\n\n    return this._emptyCubeTexture;\n  }\n  /**\n   * Gets a boolean indicating if the engine runs in WebGPU or not.\n   */\n\n\n  get isWebGPU() {\n    return this._isWebGPU;\n  }\n  /**\n   * Gets the shader platform name used by the effects.\n   */\n\n\n  get shaderPlatformName() {\n    return this._shaderPlatformName;\n  }\n  /**\n   * Enables or disables the snapshot rendering mode\n   * Note that the WebGL engine does not support snapshot rendering so setting the value won't have any effect for this engine\n   */\n\n\n  get snapshotRendering() {\n    return false;\n  }\n\n  set snapshotRendering(activate) {// WebGL engine does not support snapshot rendering\n  }\n  /**\n   * Gets or sets the snapshot rendering mode\n   */\n\n\n  get snapshotRenderingMode() {\n    return this._snapshotRenderingMode;\n  }\n\n  set snapshotRenderingMode(mode) {\n    this._snapshotRenderingMode = mode;\n  }\n  /**\n   * Creates a new snapshot at the next frame using the current snapshotRenderingMode\n   */\n\n\n  snapshotRenderingReset() {\n    this.snapshotRendering = false;\n  }\n\n  static _CreateCanvas(width, height) {\n    if (typeof document === \"undefined\") {\n      return new OffscreenCanvas(width, height);\n    }\n\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n  /**\n   * Create a canvas. This method is overridden by other engines\n   * @param width width\n   * @param height height\n   * @returns ICanvas interface\n   */\n\n\n  createCanvas(width, height) {\n    return ThinEngine._CreateCanvas(width, height);\n  }\n  /**\n   * Create an image to use with canvas\n   * @returns IImage interface\n   */\n\n\n  createCanvasImage() {\n    return document.createElement(\"img\");\n  }\n  /**\n   * Creates a new engine\n   * @param canvasOrContext defines the canvas or WebGL context to use for rendering. If you provide a WebGL context, Babylon.js will not hook events on the canvas (like pointers, keyboards, etc...) so no event observables will be available. This is mostly used when Babylon.js is used as a plugin on a system which already used the WebGL context\n   * @param antialias defines enable antialiasing (default: false)\n   * @param options defines further options to be sent to the getContext() function\n   * @param adaptToDeviceRatio defines whether to adapt to the device's viewport characteristics (default: false)\n   */\n\n\n  constructor(canvasOrContext, antialias, options, adaptToDeviceRatio) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n    /** @internal */\n\n\n    this._name = \"WebGL\";\n    this._isDisposed = false;\n    /**\n     * Gets or sets a boolean that indicates if textures must be forced to power of 2 size even if not required\n     */\n\n    this.forcePOTTextures = false;\n    /**\n     * Gets a boolean indicating if the engine is currently rendering in fullscreen mode\n     */\n\n    this.isFullscreen = false;\n    /**\n     * Gets or sets a boolean indicating if back faces must be culled. If false, front faces are culled instead (true by default)\n     * If non null, this takes precedence over the value from the material\n     */\n\n    this.cullBackFaces = null;\n    /**\n     * Gets or sets a boolean indicating if the engine must keep rendering even if the window is not in foreground\n     */\n\n    this.renderEvenInBackground = true;\n    /**\n     * Gets or sets a boolean indicating that cache can be kept between frames\n     */\n\n    this.preventCacheWipeBetweenFrames = false;\n    /** Gets or sets a boolean indicating if the engine should validate programs after compilation */\n\n    this.validateShaderPrograms = false;\n    this._useReverseDepthBuffer = false;\n    /**\n     * Indicates if the z range in NDC space is 0..1 (value: true) or -1..1 (value: false)\n     */\n\n    this.isNDCHalfZRange = false;\n    /**\n     * Indicates that the origin of the texture/framebuffer space is the bottom left corner. If false, the origin is top left\n     */\n\n    this.hasOriginBottomLeft = true;\n    /**\n     * Gets or sets a boolean indicating that uniform buffers must be disabled even if they are supported\n     */\n\n    this.disableUniformBuffers = false;\n    /**\n     * An event triggered when the engine is disposed.\n     */\n\n    this.onDisposeObservable = new _observable.Observable();\n    this._frameId = 0;\n    /** @internal */\n\n    this._uniformBuffers = new Array();\n    /** @internal */\n\n    this._storageBuffers = new Array();\n    /** @internal */\n\n    this._webGLVersion = 1.0;\n    this._windowIsBackground = false;\n    this._highPrecisionShadersAllowed = true;\n    /** @internal */\n\n    this._badOS = false;\n    /** @internal */\n\n    this._badDesktopOS = false;\n    this._renderingQueueLaunched = false;\n    this._activeRenderLoops = new Array(); // Lost context\n\n    /**\n     * Observable signaled when a context lost event is raised\n     */\n\n    this.onContextLostObservable = new _observable.Observable();\n    /**\n     * Observable signaled when a context restored event is raised\n     */\n\n    this.onContextRestoredObservable = new _observable.Observable();\n    this._contextWasLost = false;\n    /** @internal */\n\n    this._doNotHandleContextLost = false;\n    /**\n     * Gets or sets a boolean indicating that vertex array object must be disabled even if they are supported\n     */\n\n    this.disableVertexArrayObjects = false; // States\n\n    /** @internal */\n\n    this._colorWrite = true;\n    /** @internal */\n\n    this._colorWriteChanged = true;\n    /** @internal */\n\n    this._depthCullingState = new _depthCullingState.DepthCullingState();\n    /** @internal */\n\n    this._stencilStateComposer = new _stencilStateComposer.StencilStateComposer();\n    /** @internal */\n\n    this._stencilState = new _stencilState.StencilState();\n    /** @internal */\n\n    this._alphaState = new _alphaCullingState.AlphaState();\n    /** @internal */\n\n    this._alphaMode = 1;\n    /** @internal */\n\n    this._alphaEquation = 0; // Cache\n\n    /** @internal */\n\n    this._internalTexturesCache = new Array();\n    /** @internal */\n\n    this._renderTargetWrapperCache = new Array();\n    /** @internal */\n\n    this._activeChannel = 0;\n    this._currentTextureChannel = -1;\n    /** @internal */\n\n    this._boundTexturesCache = {};\n    this._compiledEffects = {};\n    this._vertexAttribArraysEnabled = [];\n    this._uintIndicesCurrentlySet = false;\n    this._currentBoundBuffer = new Array();\n    /** @internal */\n\n    this._currentFramebuffer = null;\n    /** @internal */\n\n    this._dummyFramebuffer = null;\n    this._currentBufferPointers = new Array();\n    this._currentInstanceLocations = new Array();\n    this._currentInstanceBuffers = new Array();\n    this._vaoRecordInProgress = false;\n    this._mustWipeVertexAttributes = false;\n    this._nextFreeTextureSlots = new Array();\n    this._maxSimultaneousTextures = 0;\n    this._maxMSAASamplesOverride = null;\n    this._activeRequests = new Array();\n    /**\n     * If set to true zooming in and out in the browser will rescale the hardware-scaling correctly.\n     */\n\n    this.adaptToDeviceRatio = false;\n    /** @internal */\n\n    this._lastDevicePixelRatio = 1.0;\n    /** @internal */\n\n    this._transformTextureUrl = null;\n    /**\n     * Gets information about the current host\n     */\n\n    this.hostInformation = {\n      isMobile: false\n    };\n    /**\n     * Defines whether the engine has been created with the premultipliedAlpha option on or not.\n     */\n\n    this.premultipliedAlpha = true;\n    /**\n     * Observable event triggered before each texture is initialized\n     */\n\n    this.onBeforeTextureInitObservable = new _observable.Observable();\n    /** @internal */\n\n    this._isWebGPU = false;\n    this._snapshotRenderingMode = 0;\n    this._viewportCached = {\n      x: 0,\n      y: 0,\n      z: 0,\n      w: 0\n    };\n    this._unpackFlipYCached = null;\n    /**\n     * In case you are sharing the context with other applications, it might\n     * be interested to not cache the unpack flip y state to ensure a consistent\n     * value would be set.\n     */\n\n    this.enableUnpackFlipYCached = true;\n    this._boundUniforms = {};\n    this.startTime = _precisionDate.PrecisionDate.Now;\n    let canvas = null;\n    options = options || {};\n    this._creationOptions = options; // Save this off for use in resize().\n\n    this.adaptToDeviceRatio = adaptToDeviceRatio !== null && adaptToDeviceRatio !== void 0 ? adaptToDeviceRatio : false;\n    this._stencilStateComposer.stencilGlobal = this._stencilState;\n\n    _performanceConfigurator.PerformanceConfigurator.SetMatrixPrecision(!!options.useHighPrecisionMatrix);\n\n    options.antialias = antialias !== null && antialias !== void 0 ? antialias : options.antialias;\n    options.deterministicLockstep = (_a = options.deterministicLockstep) !== null && _a !== void 0 ? _a : false;\n    options.lockstepMaxSteps = (_b = options.lockstepMaxSteps) !== null && _b !== void 0 ? _b : 4;\n    options.timeStep = (_c = options.timeStep) !== null && _c !== void 0 ? _c : 1 / 60;\n    options.audioEngine = (_d = options.audioEngine) !== null && _d !== void 0 ? _d : true;\n    options.stencil = (_e = options.stencil) !== null && _e !== void 0 ? _e : true;\n    this._audioContext = (_g = (_f = options.audioEngineOptions) === null || _f === void 0 ? void 0 : _f.audioContext) !== null && _g !== void 0 ? _g : null;\n    this._audioDestination = (_j = (_h = options.audioEngineOptions) === null || _h === void 0 ? void 0 : _h.audioDestination) !== null && _j !== void 0 ? _j : null;\n    this.premultipliedAlpha = (_k = options.premultipliedAlpha) !== null && _k !== void 0 ? _k : true;\n    this.useExactSrgbConversions = (_l = options.useExactSrgbConversions) !== null && _l !== void 0 ? _l : false;\n    this._doNotHandleContextLost = !!options.doNotHandleContextLost;\n    this._isStencilEnable = options.stencil ? true : false; // Viewport\n\n    adaptToDeviceRatio = adaptToDeviceRatio || options.adaptToDeviceRatio || false;\n    const devicePixelRatio = (0, _domManagement.IsWindowObjectExist)() ? window.devicePixelRatio || 1.0 : 1.0;\n    const limitDeviceRatio = options.limitDeviceRatio || devicePixelRatio;\n    this._hardwareScalingLevel = adaptToDeviceRatio ? 1.0 / Math.min(limitDeviceRatio, devicePixelRatio) : 1.0;\n    this._lastDevicePixelRatio = devicePixelRatio;\n\n    if (!canvasOrContext) {\n      return;\n    }\n\n    if (canvasOrContext.getContext) {\n      canvas = canvasOrContext;\n      this._renderingCanvas = canvas;\n\n      if (options.preserveDrawingBuffer === undefined) {\n        options.preserveDrawingBuffer = false;\n      }\n\n      if (options.xrCompatible === undefined) {\n        options.xrCompatible = true;\n      } // Exceptions\n\n\n      if (navigator && navigator.userAgent) {\n        this._setupMobileChecks();\n\n        const ua = navigator.userAgent;\n\n        for (const exception of ThinEngine.ExceptionList) {\n          const key = exception.key;\n          const targets = exception.targets;\n          const check = new RegExp(key);\n\n          if (check.test(ua)) {\n            if (exception.capture && exception.captureConstraint) {\n              const capture = exception.capture;\n              const constraint = exception.captureConstraint;\n              const regex = new RegExp(capture);\n              const matches = regex.exec(ua);\n\n              if (matches && matches.length > 0) {\n                const capturedValue = parseInt(matches[matches.length - 1]);\n\n                if (capturedValue >= constraint) {\n                  continue;\n                }\n              }\n            }\n\n            for (const target of targets) {\n              switch (target) {\n                case \"uniformBuffer\":\n                  this.disableUniformBuffers = true;\n                  break;\n\n                case \"vao\":\n                  this.disableVertexArrayObjects = true;\n                  break;\n\n                case \"antialias\":\n                  options.antialias = false;\n                  break;\n\n                case \"maxMSAASamples\":\n                  this._maxMSAASamplesOverride = 1;\n                  break;\n              }\n            }\n          }\n        }\n      } // Context lost\n\n\n      if (!this._doNotHandleContextLost) {\n        this._onContextLost = evt => {\n          evt.preventDefault();\n          this._contextWasLost = true;\n\n          _logger.Logger.Warn(\"WebGL context lost.\");\n\n          this.onContextLostObservable.notifyObservers(this);\n        };\n\n        this._onContextRestored = () => {\n          this._restoreEngineAfterContextLost(this._initGLContext.bind(this));\n        };\n\n        canvas.addEventListener(\"webglcontextlost\", this._onContextLost, false);\n        canvas.addEventListener(\"webglcontextrestored\", this._onContextRestored, false);\n        options.powerPreference = options.powerPreference || \"high-performance\";\n      } // Detect if we are running on a faulty buggy desktop OS.\n\n\n      this._badDesktopOS = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\n      if (this._badDesktopOS) {\n        options.xrCompatible = false;\n      } // GL\n\n\n      if (!options.disableWebGL2Support) {\n        try {\n          this._gl = canvas.getContext(\"webgl2\", options) || canvas.getContext(\"experimental-webgl2\", options);\n\n          if (this._gl) {\n            this._webGLVersion = 2.0;\n            this._shaderPlatformName = \"WEBGL2\"; // Prevent weird browsers to lie (yeah that happens!)\n\n            if (!this._gl.deleteQuery) {\n              this._webGLVersion = 1.0;\n              this._shaderPlatformName = \"WEBGL1\";\n            }\n          }\n        } catch (e) {// Do nothing\n        }\n      }\n\n      if (!this._gl) {\n        if (!canvas) {\n          throw new Error(\"The provided canvas is null or undefined.\");\n        }\n\n        try {\n          this._gl = canvas.getContext(\"webgl\", options) || canvas.getContext(\"experimental-webgl\", options);\n        } catch (e) {\n          throw new Error(\"WebGL not supported\");\n        }\n      }\n\n      if (!this._gl) {\n        throw new Error(\"WebGL not supported\");\n      }\n    } else {\n      this._gl = canvasOrContext;\n      this._renderingCanvas = this._gl.canvas;\n\n      if (this._gl.renderbufferStorageMultisample) {\n        this._webGLVersion = 2.0;\n        this._shaderPlatformName = \"WEBGL2\";\n      } else {\n        this._shaderPlatformName = \"WEBGL1\";\n      }\n\n      const attributes = this._gl.getContextAttributes();\n\n      if (attributes) {\n        options.stencil = attributes.stencil;\n      }\n    } // Ensures a consistent color space unpacking of textures cross browser.\n\n\n    this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, this._gl.NONE);\n\n    if (options.useHighPrecisionFloats !== undefined) {\n      this._highPrecisionShadersAllowed = options.useHighPrecisionFloats;\n    }\n\n    this.resize();\n\n    this._initGLContext();\n\n    this._initFeatures(); // Prepare buffer pointers\n\n\n    for (let i = 0; i < this._caps.maxVertexAttribs; i++) {\n      this._currentBufferPointers[i] = new BufferPointer();\n    } // Shader processor\n\n\n    this._shaderProcessor = this.webGLVersion > 1 ? new _webGL2ShaderProcessors.WebGL2ShaderProcessor() : new _webGLShaderProcessors.WebGLShaderProcessor(); // Detect if we are running on a faulty buggy OS.\n\n    this._badOS = /iPad/i.test(navigator.userAgent) || /iPhone/i.test(navigator.userAgent); // Starting with iOS 14, we can trust the browser\n    // let matches = navigator.userAgent.match(/Version\\/(\\d+)/);\n    // if (matches && matches.length === 2) {\n    //     if (parseInt(matches[1]) >= 14) {\n    //         this._badOS = false;\n    //     }\n    // }\n\n    const versionToLog = `Babylon.js v${ThinEngine.Version}`;\n    console.log(versionToLog + ` - ${this.description}`); // Check setAttribute in case of workers\n\n    if (this._renderingCanvas && this._renderingCanvas.setAttribute) {\n      this._renderingCanvas.setAttribute(\"data-engine\", versionToLog);\n    }\n  }\n\n  _setupMobileChecks() {\n    if (!(navigator && navigator.userAgent)) {\n      return;\n    } // Function to check if running on mobile device\n\n\n    this._checkForMobile = () => {\n      const currentUA = navigator.userAgent;\n      this.hostInformation.isMobile = currentUA.indexOf(\"Mobile\") !== -1 || currentUA.indexOf(\"Mac\") !== -1 && (0, _domManagement.IsDocumentAvailable)() && \"ontouchend\" in document;\n    }; // Set initial isMobile value\n\n\n    this._checkForMobile(); // Set up event listener to check when window is resized (used to get emulator activation to work properly)\n\n\n    if ((0, _domManagement.IsWindowObjectExist)()) {\n      window.addEventListener(\"resize\", this._checkForMobile);\n    }\n  }\n\n  _restoreEngineAfterContextLost(initEngine) {\n    // Adding a timeout to avoid race condition at browser level\n    setTimeout(async () => {\n      var _a;\n\n      this._dummyFramebuffer = null;\n      const depthTest = this._depthCullingState.depthTest; // backup those values because the call to initEngine / wipeCaches will reset them\n\n      const depthFunc = this._depthCullingState.depthFunc;\n      const depthMask = this._depthCullingState.depthMask;\n      const stencilTest = this._stencilState.stencilTest; // Rebuild context\n\n      await initEngine(); // Ensure webgl and engine states are matching\n\n      this.wipeCaches(true); // Rebuild effects\n\n      this._rebuildEffects();\n\n      (_a = this._rebuildComputeEffects) === null || _a === void 0 ? void 0 : _a.call(this); // Note:\n      //  The call to _rebuildBuffers must be made before the call to _rebuildInternalTextures because in the process of _rebuildBuffers the buffers used by the post process managers will be rebuilt\n      //  and we may need to use the post process manager of the scene during _rebuildInternalTextures (in WebGL1, non-POT textures are rescaled using a post process + post process manager of the scene)\n      // Rebuild buffers\n\n      this._rebuildBuffers(); // Rebuild textures\n\n\n      this._rebuildInternalTextures(); // Rebuild textures\n\n\n      this._rebuildRenderTargetWrappers(); // Reset engine states after all the buffer/textures/... have been rebuilt\n\n\n      this.wipeCaches(true);\n      this._depthCullingState.depthTest = depthTest;\n      this._depthCullingState.depthFunc = depthFunc;\n      this._depthCullingState.depthMask = depthMask;\n      this._stencilState.stencilTest = stencilTest;\n\n      _logger.Logger.Warn(this.name + \" context successfully restored.\");\n\n      this.onContextRestoredObservable.notifyObservers(this);\n      this._contextWasLost = false;\n    }, 0);\n  }\n  /**\n   * Shared initialization across engines types.\n   * @param canvas The canvas associated with this instance of the engine.\n   */\n\n\n  _sharedInit(canvas) {\n    this._renderingCanvas = canvas;\n  }\n  /**\n   * @internal\n   */\n\n\n  _getShaderProcessingContext(shaderLanguage) {\n    return null;\n  }\n\n  _rebuildInternalTextures() {\n    const currentState = this._internalTexturesCache.slice(); // Do a copy because the rebuild will add proxies\n\n\n    for (const internalTexture of currentState) {\n      internalTexture._rebuild();\n    }\n  }\n\n  _rebuildRenderTargetWrappers() {\n    const currentState = this._renderTargetWrapperCache.slice(); // Do a copy because the rebuild will add proxies\n\n\n    for (const renderTargetWrapper of currentState) {\n      renderTargetWrapper._rebuild();\n    }\n  }\n\n  _rebuildEffects() {\n    for (const key in this._compiledEffects) {\n      const effect = this._compiledEffects[key];\n      effect._pipelineContext = null; // because _prepareEffect will try to dispose this pipeline before recreating it and that would lead to webgl errors\n\n      effect._wasPreviouslyReady = false;\n\n      effect._prepareEffect();\n    }\n\n    _effect.Effect.ResetCache();\n  }\n  /**\n   * Gets a boolean indicating if all created effects are ready\n   * @returns true if all effects are ready\n   */\n\n\n  areAllEffectsReady() {\n    for (const key in this._compiledEffects) {\n      const effect = this._compiledEffects[key];\n\n      if (!effect.isReady()) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  _rebuildBuffers() {\n    // Uniforms\n    for (const uniformBuffer of this._uniformBuffers) {\n      uniformBuffer._rebuild();\n    } // Storage buffers\n\n\n    for (const storageBuffer of this._storageBuffers) {\n      storageBuffer._rebuild();\n    }\n  }\n\n  _initGLContext() {\n    var _a; // Caps\n\n\n    this._caps = {\n      maxTexturesImageUnits: this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS),\n      maxCombinedTexturesImageUnits: this._gl.getParameter(this._gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),\n      maxVertexTextureImageUnits: this._gl.getParameter(this._gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),\n      maxTextureSize: this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE),\n      maxSamples: this._webGLVersion > 1 ? this._gl.getParameter(this._gl.MAX_SAMPLES) : 1,\n      maxCubemapTextureSize: this._gl.getParameter(this._gl.MAX_CUBE_MAP_TEXTURE_SIZE),\n      maxRenderTextureSize: this._gl.getParameter(this._gl.MAX_RENDERBUFFER_SIZE),\n      maxVertexAttribs: this._gl.getParameter(this._gl.MAX_VERTEX_ATTRIBS),\n      maxVaryingVectors: this._gl.getParameter(this._gl.MAX_VARYING_VECTORS),\n      maxFragmentUniformVectors: this._gl.getParameter(this._gl.MAX_FRAGMENT_UNIFORM_VECTORS),\n      maxVertexUniformVectors: this._gl.getParameter(this._gl.MAX_VERTEX_UNIFORM_VECTORS),\n      parallelShaderCompile: this._gl.getExtension(\"KHR_parallel_shader_compile\") || undefined,\n      standardDerivatives: this._webGLVersion > 1 || this._gl.getExtension(\"OES_standard_derivatives\") !== null,\n      maxAnisotropy: 1,\n      astc: this._gl.getExtension(\"WEBGL_compressed_texture_astc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_astc\"),\n      bptc: this._gl.getExtension(\"EXT_texture_compression_bptc\") || this._gl.getExtension(\"WEBKIT_EXT_texture_compression_bptc\"),\n      s3tc: this._gl.getExtension(\"WEBGL_compressed_texture_s3tc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\"),\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      s3tc_srgb: this._gl.getExtension(\"WEBGL_compressed_texture_s3tc_srgb\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc_srgb\"),\n      pvrtc: this._gl.getExtension(\"WEBGL_compressed_texture_pvrtc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\"),\n      etc1: this._gl.getExtension(\"WEBGL_compressed_texture_etc1\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_etc1\"),\n      etc2: this._gl.getExtension(\"WEBGL_compressed_texture_etc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_etc\") || this._gl.getExtension(\"WEBGL_compressed_texture_es3_0\"),\n      textureAnisotropicFilterExtension: this._gl.getExtension(\"EXT_texture_filter_anisotropic\") || this._gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\") || this._gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\"),\n      uintIndices: this._webGLVersion > 1 || this._gl.getExtension(\"OES_element_index_uint\") !== null,\n      fragmentDepthSupported: this._webGLVersion > 1 || this._gl.getExtension(\"EXT_frag_depth\") !== null,\n      highPrecisionShaderSupported: false,\n      timerQuery: this._gl.getExtension(\"EXT_disjoint_timer_query_webgl2\") || this._gl.getExtension(\"EXT_disjoint_timer_query\"),\n      supportOcclusionQuery: this._webGLVersion > 1,\n      canUseTimestampForTimerQuery: false,\n      drawBuffersExtension: false,\n      maxMSAASamples: 1,\n      colorBufferFloat: !!(this._webGLVersion > 1 && this._gl.getExtension(\"EXT_color_buffer_float\")),\n      colorBufferHalfFloat: !!(this._webGLVersion > 1 && this._gl.getExtension(\"EXT_color_buffer_half_float\")),\n      textureFloat: this._webGLVersion > 1 || this._gl.getExtension(\"OES_texture_float\") ? true : false,\n      textureHalfFloat: this._webGLVersion > 1 || this._gl.getExtension(\"OES_texture_half_float\") ? true : false,\n      textureHalfFloatRender: false,\n      textureFloatLinearFiltering: false,\n      textureFloatRender: false,\n      textureHalfFloatLinearFiltering: false,\n      vertexArrayObject: false,\n      instancedArrays: false,\n      textureLOD: this._webGLVersion > 1 || this._gl.getExtension(\"EXT_shader_texture_lod\") ? true : false,\n      texelFetch: this._webGLVersion !== 1,\n      blendMinMax: false,\n      multiview: this._gl.getExtension(\"OVR_multiview2\"),\n      oculusMultiview: this._gl.getExtension(\"OCULUS_multiview\"),\n      depthTextureExtension: false,\n      canUseGLInstanceID: this._webGLVersion > 1,\n      canUseGLVertexID: this._webGLVersion > 1,\n      supportComputeShaders: false,\n      supportSRGBBuffers: false,\n      supportTransformFeedbacks: this._webGLVersion > 1,\n      textureMaxLevel: this._webGLVersion > 1,\n      texture2DArrayMaxLayerCount: this._webGLVersion > 1 ? this._gl.getParameter(this._gl.MAX_ARRAY_TEXTURE_LAYERS) : 128,\n      disableMorphTargetTexture: false\n    }; // Infos\n\n    this._glVersion = this._gl.getParameter(this._gl.VERSION);\n\n    const rendererInfo = this._gl.getExtension(\"WEBGL_debug_renderer_info\");\n\n    if (rendererInfo != null) {\n      this._glRenderer = this._gl.getParameter(rendererInfo.UNMASKED_RENDERER_WEBGL);\n      this._glVendor = this._gl.getParameter(rendererInfo.UNMASKED_VENDOR_WEBGL);\n    }\n\n    if (!this._glVendor) {\n      this._glVendor = this._gl.getParameter(this._gl.VENDOR) || \"Unknown vendor\";\n    }\n\n    if (!this._glRenderer) {\n      this._glRenderer = this._gl.getParameter(this._gl.RENDERER) || \"Unknown renderer\";\n    } // Constants\n\n\n    if (this._gl.HALF_FLOAT_OES !== 0x8d61) {\n      this._gl.HALF_FLOAT_OES = 0x8d61; // Half floating-point type (16-bit).\n    }\n\n    if (this._gl.RGBA16F !== 0x881a) {\n      this._gl.RGBA16F = 0x881a; // RGBA 16-bit floating-point color-renderable internal sized format.\n    }\n\n    if (this._gl.RGBA32F !== 0x8814) {\n      this._gl.RGBA32F = 0x8814; // RGBA 32-bit floating-point color-renderable internal sized format.\n    }\n\n    if (this._gl.DEPTH24_STENCIL8 !== 35056) {\n      this._gl.DEPTH24_STENCIL8 = 35056;\n    } // Extensions\n\n\n    if (this._caps.timerQuery) {\n      if (this._webGLVersion === 1) {\n        this._gl.getQuery = this._caps.timerQuery.getQueryEXT.bind(this._caps.timerQuery);\n      } // WebGLQuery casted to number to avoid TS error\n\n\n      this._caps.canUseTimestampForTimerQuery = ((_a = this._gl.getQuery(this._caps.timerQuery.TIMESTAMP_EXT, this._caps.timerQuery.QUERY_COUNTER_BITS_EXT)) !== null && _a !== void 0 ? _a : 0) > 0;\n    }\n\n    this._caps.maxAnisotropy = this._caps.textureAnisotropicFilterExtension ? this._gl.getParameter(this._caps.textureAnisotropicFilterExtension.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0;\n    this._caps.textureFloatLinearFiltering = this._caps.textureFloat && this._gl.getExtension(\"OES_texture_float_linear\") ? true : false;\n    this._caps.textureFloatRender = this._caps.textureFloat && this._canRenderToFloatFramebuffer() ? true : false;\n    this._caps.textureHalfFloatLinearFiltering = this._webGLVersion > 1 || this._caps.textureHalfFloat && this._gl.getExtension(\"OES_texture_half_float_linear\") ? true : false; // Compressed formats\n\n    if (this._caps.astc) {\n      this._gl.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR = this._caps.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR;\n    }\n\n    if (this._caps.bptc) {\n      this._gl.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT = this._caps.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT;\n    }\n\n    if (this._caps.s3tc_srgb) {\n      this._gl.COMPRESSED_SRGB_S3TC_DXT1_EXT = this._caps.s3tc_srgb.COMPRESSED_SRGB_S3TC_DXT1_EXT;\n      this._gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = this._caps.s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;\n      this._gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = this._caps.s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;\n    }\n\n    if (this._caps.etc2) {\n      this._gl.COMPRESSED_SRGB8_ETC2 = this._caps.etc2.COMPRESSED_SRGB8_ETC2;\n      this._gl.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = this._caps.etc2.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC;\n    } // Checks if some of the format renders first to allow the use of webgl inspector.\n\n\n    if (this._webGLVersion > 1) {\n      if (this._gl.HALF_FLOAT_OES !== 0x140b) {\n        this._gl.HALF_FLOAT_OES = 0x140b;\n      }\n    }\n\n    this._caps.textureHalfFloatRender = this._caps.textureHalfFloat && this._canRenderToHalfFloatFramebuffer(); // Draw buffers\n\n    if (this._webGLVersion > 1) {\n      this._caps.drawBuffersExtension = true;\n      this._caps.maxMSAASamples = this._maxMSAASamplesOverride !== null ? this._maxMSAASamplesOverride : this._gl.getParameter(this._gl.MAX_SAMPLES);\n    } else {\n      const drawBuffersExtension = this._gl.getExtension(\"WEBGL_draw_buffers\");\n\n      if (drawBuffersExtension !== null) {\n        this._caps.drawBuffersExtension = true;\n        this._gl.drawBuffers = drawBuffersExtension.drawBuffersWEBGL.bind(drawBuffersExtension);\n        this._gl.DRAW_FRAMEBUFFER = this._gl.FRAMEBUFFER;\n\n        for (let i = 0; i < 16; i++) {\n          this._gl[\"COLOR_ATTACHMENT\" + i + \"_WEBGL\"] = drawBuffersExtension[\"COLOR_ATTACHMENT\" + i + \"_WEBGL\"];\n        }\n      }\n    } // Depth Texture\n\n\n    if (this._webGLVersion > 1) {\n      this._caps.depthTextureExtension = true;\n    } else {\n      const depthTextureExtension = this._gl.getExtension(\"WEBGL_depth_texture\");\n\n      if (depthTextureExtension != null) {\n        this._caps.depthTextureExtension = true;\n        this._gl.UNSIGNED_INT_24_8 = depthTextureExtension.UNSIGNED_INT_24_8_WEBGL;\n      }\n    } // Vertex array object\n\n\n    if (this.disableVertexArrayObjects) {\n      this._caps.vertexArrayObject = false;\n    } else if (this._webGLVersion > 1) {\n      this._caps.vertexArrayObject = true;\n    } else {\n      const vertexArrayObjectExtension = this._gl.getExtension(\"OES_vertex_array_object\");\n\n      if (vertexArrayObjectExtension != null) {\n        this._caps.vertexArrayObject = true;\n        this._gl.createVertexArray = vertexArrayObjectExtension.createVertexArrayOES.bind(vertexArrayObjectExtension);\n        this._gl.bindVertexArray = vertexArrayObjectExtension.bindVertexArrayOES.bind(vertexArrayObjectExtension);\n        this._gl.deleteVertexArray = vertexArrayObjectExtension.deleteVertexArrayOES.bind(vertexArrayObjectExtension);\n      }\n    } // Instances count\n\n\n    if (this._webGLVersion > 1) {\n      this._caps.instancedArrays = true;\n    } else {\n      const instanceExtension = this._gl.getExtension(\"ANGLE_instanced_arrays\");\n\n      if (instanceExtension != null) {\n        this._caps.instancedArrays = true;\n        this._gl.drawArraysInstanced = instanceExtension.drawArraysInstancedANGLE.bind(instanceExtension);\n        this._gl.drawElementsInstanced = instanceExtension.drawElementsInstancedANGLE.bind(instanceExtension);\n        this._gl.vertexAttribDivisor = instanceExtension.vertexAttribDivisorANGLE.bind(instanceExtension);\n      } else {\n        this._caps.instancedArrays = false;\n      }\n    }\n\n    if (this._gl.getShaderPrecisionFormat) {\n      const vertexhighp = this._gl.getShaderPrecisionFormat(this._gl.VERTEX_SHADER, this._gl.HIGH_FLOAT);\n\n      const fragmenthighp = this._gl.getShaderPrecisionFormat(this._gl.FRAGMENT_SHADER, this._gl.HIGH_FLOAT);\n\n      if (vertexhighp && fragmenthighp) {\n        this._caps.highPrecisionShaderSupported = vertexhighp.precision !== 0 && fragmenthighp.precision !== 0;\n      }\n    }\n\n    if (this._webGLVersion > 1) {\n      this._caps.blendMinMax = true;\n    } else {\n      const blendMinMaxExtension = this._gl.getExtension(\"EXT_blend_minmax\");\n\n      if (blendMinMaxExtension != null) {\n        this._caps.blendMinMax = true;\n        this._gl.MAX = blendMinMaxExtension.MAX_EXT;\n        this._gl.MIN = blendMinMaxExtension.MIN_EXT;\n      }\n    } // sRGB buffers\n    // only run this if not already set to true (in the constructor, for example)\n\n\n    if (!this._caps.supportSRGBBuffers) {\n      if (this._webGLVersion > 1) {\n        this._caps.supportSRGBBuffers = true;\n        this._glSRGBExtensionValues = {\n          SRGB: WebGL2RenderingContext.SRGB,\n          SRGB8: WebGL2RenderingContext.SRGB8,\n          SRGB8_ALPHA8: WebGL2RenderingContext.SRGB8_ALPHA8\n        };\n      } else {\n        const sRGBExtension = this._gl.getExtension(\"EXT_sRGB\");\n\n        if (sRGBExtension != null) {\n          this._caps.supportSRGBBuffers = true;\n          this._glSRGBExtensionValues = {\n            SRGB: sRGBExtension.SRGB_EXT,\n            SRGB8: sRGBExtension.SRGB_ALPHA_EXT,\n            SRGB8_ALPHA8: sRGBExtension.SRGB_ALPHA_EXT\n          };\n        }\n      } // take into account the forced state that was provided in options\n      // When the issue in angle/chrome is fixed the flag should be taken into account only when it is explicitly defined\n\n\n      this._caps.supportSRGBBuffers = this._caps.supportSRGBBuffers && !!(this._creationOptions && this._creationOptions.forceSRGBBufferSupportState);\n    } // Depth buffer\n\n\n    this._depthCullingState.depthTest = true;\n    this._depthCullingState.depthFunc = this._gl.LEQUAL;\n    this._depthCullingState.depthMask = true; // Texture maps\n\n    this._maxSimultaneousTextures = this._caps.maxCombinedTexturesImageUnits;\n\n    for (let slot = 0; slot < this._maxSimultaneousTextures; slot++) {\n      this._nextFreeTextureSlots.push(slot);\n    }\n\n    if (this._glRenderer === \"Mali-G72\") {\n      // Overcome a bug when using a texture to store morph targets on Mali-G72\n      this._caps.disableMorphTargetTexture = true;\n    }\n  }\n\n  _initFeatures() {\n    this._features = {\n      forceBitmapOverHTMLImageElement: false,\n      supportRenderAndCopyToLodForFloatTextures: this._webGLVersion !== 1,\n      supportDepthStencilTexture: this._webGLVersion !== 1,\n      supportShadowSamplers: this._webGLVersion !== 1,\n      uniformBufferHardCheckMatrix: false,\n      allowTexturePrefiltering: this._webGLVersion !== 1,\n      trackUbosInFrame: false,\n      checkUbosContentBeforeUpload: false,\n      supportCSM: this._webGLVersion !== 1,\n      basisNeedsPOT: this._webGLVersion === 1,\n      support3DTextures: this._webGLVersion !== 1,\n      needTypeSuffixInShaderConstants: this._webGLVersion !== 1,\n      supportMSAA: this._webGLVersion !== 1,\n      supportSSAO2: this._webGLVersion !== 1,\n      supportExtendedTextureFormats: this._webGLVersion !== 1,\n      supportSwitchCaseInShader: this._webGLVersion !== 1,\n      supportSyncTextureRead: true,\n      needsInvertingBitmap: true,\n      useUBOBindingCache: true,\n      needShaderCodeInlining: false,\n      needToAlwaysBindUniformBuffers: false,\n      supportRenderPasses: false,\n      supportSpriteInstancing: true,\n      _collectUbosUpdatedInFrame: false\n    };\n  }\n  /**\n   * Gets version of the current webGL context\n   * Keep it for back compat - use version instead\n   */\n\n\n  get webGLVersion() {\n    return this._webGLVersion;\n  }\n  /**\n   * Gets a string identifying the name of the class\n   * @returns \"Engine\" string\n   */\n\n\n  getClassName() {\n    return \"ThinEngine\";\n  }\n  /**\n   * Returns true if the stencil buffer has been enabled through the creation option of the context.\n   */\n\n\n  get isStencilEnable() {\n    return this._isStencilEnable;\n  }\n  /** @internal */\n\n\n  _prepareWorkingCanvas() {\n    if (this._workingCanvas) {\n      return;\n    }\n\n    this._workingCanvas = this.createCanvas(1, 1);\n\n    const context = this._workingCanvas.getContext(\"2d\");\n\n    if (context) {\n      this._workingContext = context;\n    }\n  }\n  /**\n   * Reset the texture cache to empty state\n   */\n\n\n  resetTextureCache() {\n    for (const key in this._boundTexturesCache) {\n      if (!Object.prototype.hasOwnProperty.call(this._boundTexturesCache, key)) {\n        continue;\n      }\n\n      this._boundTexturesCache[key] = null;\n    }\n\n    this._currentTextureChannel = -1;\n  }\n  /**\n   * Gets an object containing information about the current engine context\n   * @returns an object containing the vendor, the renderer and the version of the current engine context\n   */\n\n\n  getInfo() {\n    return this.getGlInfo();\n  }\n  /**\n   * Gets an object containing information about the current webGL context\n   * @returns an object containing the vendor, the renderer and the version of the current webGL context\n   */\n\n\n  getGlInfo() {\n    return {\n      vendor: this._glVendor,\n      renderer: this._glRenderer,\n      version: this._glVersion\n    };\n  }\n  /**\n   * Defines the hardware scaling level.\n   * By default the hardware scaling level is computed from the window device ratio.\n   * if level = 1 then the engine will render at the exact resolution of the canvas. If level = 0.5 then the engine will render at twice the size of the canvas.\n   * @param level defines the level to use\n   */\n\n\n  setHardwareScalingLevel(level) {\n    this._hardwareScalingLevel = level;\n    this.resize();\n  }\n  /**\n   * Gets the current hardware scaling level.\n   * By default the hardware scaling level is computed from the window device ratio.\n   * if level = 1 then the engine will render at the exact resolution of the canvas. If level = 0.5 then the engine will render at twice the size of the canvas.\n   * @returns a number indicating the current hardware scaling level\n   */\n\n\n  getHardwareScalingLevel() {\n    return this._hardwareScalingLevel;\n  }\n  /**\n   * Gets the list of loaded textures\n   * @returns an array containing all loaded textures\n   */\n\n\n  getLoadedTexturesCache() {\n    return this._internalTexturesCache;\n  }\n  /**\n   * Gets the object containing all engine capabilities\n   * @returns the EngineCapabilities object\n   */\n\n\n  getCaps() {\n    return this._caps;\n  }\n  /**\n   * stop executing a render loop function and remove it from the execution array\n   * @param renderFunction defines the function to be removed. If not provided all functions will be removed.\n   */\n\n\n  stopRenderLoop(renderFunction) {\n    if (!renderFunction) {\n      this._activeRenderLoops.length = 0;\n      return;\n    }\n\n    const index = this._activeRenderLoops.indexOf(renderFunction);\n\n    if (index >= 0) {\n      this._activeRenderLoops.splice(index, 1);\n    }\n  }\n  /** @internal */\n\n\n  _renderLoop() {\n    if (!this._contextWasLost) {\n      let shouldRender = true;\n\n      if (this._isDisposed || !this.renderEvenInBackground && this._windowIsBackground) {\n        shouldRender = false;\n      }\n\n      if (shouldRender) {\n        // Start new frame\n        this.beginFrame();\n\n        for (let index = 0; index < this._activeRenderLoops.length; index++) {\n          const renderFunction = this._activeRenderLoops[index];\n          renderFunction();\n        } // Present\n\n\n        this.endFrame();\n      }\n    }\n\n    if (this._activeRenderLoops.length > 0) {\n      this._frameHandler = this._queueNewFrame(this._boundRenderFunction, this.getHostWindow());\n    } else {\n      this._renderingQueueLaunched = false;\n    }\n  }\n  /**\n   * Gets the HTML canvas attached with the current webGL context\n   * @returns a HTML canvas\n   */\n\n\n  getRenderingCanvas() {\n    return this._renderingCanvas;\n  }\n  /**\n   * Gets the audio context specified in engine initialization options\n   * @returns an Audio Context\n   */\n\n\n  getAudioContext() {\n    return this._audioContext;\n  }\n  /**\n   * Gets the audio destination specified in engine initialization options\n   * @returns an audio destination node\n   */\n\n\n  getAudioDestination() {\n    return this._audioDestination;\n  }\n  /**\n   * Gets host window\n   * @returns the host window object\n   */\n\n\n  getHostWindow() {\n    if (!(0, _domManagement.IsWindowObjectExist)()) {\n      return null;\n    }\n\n    if (this._renderingCanvas && this._renderingCanvas.ownerDocument && this._renderingCanvas.ownerDocument.defaultView) {\n      return this._renderingCanvas.ownerDocument.defaultView;\n    }\n\n    return window;\n  }\n  /**\n   * Gets the current render width\n   * @param useScreen defines if screen size must be used (or the current render target if any)\n   * @returns a number defining the current render width\n   */\n\n\n  getRenderWidth(useScreen = false) {\n    if (!useScreen && this._currentRenderTarget) {\n      return this._currentRenderTarget.width;\n    }\n\n    return this._framebufferDimensionsObject ? this._framebufferDimensionsObject.framebufferWidth : this._gl.drawingBufferWidth;\n  }\n  /**\n   * Gets the current render height\n   * @param useScreen defines if screen size must be used (or the current render target if any)\n   * @returns a number defining the current render height\n   */\n\n\n  getRenderHeight(useScreen = false) {\n    if (!useScreen && this._currentRenderTarget) {\n      return this._currentRenderTarget.height;\n    }\n\n    return this._framebufferDimensionsObject ? this._framebufferDimensionsObject.framebufferHeight : this._gl.drawingBufferHeight;\n  }\n  /**\n   * Can be used to override the current requestAnimationFrame requester.\n   * @internal\n   */\n\n\n  _queueNewFrame(bindedRenderFunction, requester) {\n    return ThinEngine.QueueNewFrame(bindedRenderFunction, requester);\n  }\n  /**\n   * Register and execute a render loop. The engine can have more than one render function\n   * @param renderFunction defines the function to continuously execute\n   */\n\n\n  runRenderLoop(renderFunction) {\n    if (this._activeRenderLoops.indexOf(renderFunction) !== -1) {\n      return;\n    }\n\n    this._activeRenderLoops.push(renderFunction);\n\n    if (!this._renderingQueueLaunched) {\n      this._renderingQueueLaunched = true;\n      this._boundRenderFunction = this._renderLoop.bind(this);\n      this._frameHandler = this._queueNewFrame(this._boundRenderFunction, this.getHostWindow());\n    }\n  }\n  /**\n   * Clear the current render buffer or the current render target (if any is set up)\n   * @param color defines the color to use\n   * @param backBuffer defines if the back buffer must be cleared\n   * @param depth defines if the depth buffer must be cleared\n   * @param stencil defines if the stencil buffer must be cleared\n   */\n\n\n  clear(color, backBuffer, depth, stencil = false) {\n    const useStencilGlobalOnly = this.stencilStateComposer.useStencilGlobalOnly;\n    this.stencilStateComposer.useStencilGlobalOnly = true; // make sure the stencil mask is coming from the global stencil and not from a material (effect) which would currently be in effect\n\n    this.applyStates();\n    this.stencilStateComposer.useStencilGlobalOnly = useStencilGlobalOnly;\n    let mode = 0;\n\n    if (backBuffer && color) {\n      this._gl.clearColor(color.r, color.g, color.b, color.a !== undefined ? color.a : 1.0);\n\n      mode |= this._gl.COLOR_BUFFER_BIT;\n    }\n\n    if (depth) {\n      if (this.useReverseDepthBuffer) {\n        this._depthCullingState.depthFunc = this._gl.GEQUAL;\n\n        this._gl.clearDepth(0.0);\n      } else {\n        this._gl.clearDepth(1.0);\n      }\n\n      mode |= this._gl.DEPTH_BUFFER_BIT;\n    }\n\n    if (stencil) {\n      this._gl.clearStencil(0);\n\n      mode |= this._gl.STENCIL_BUFFER_BIT;\n    }\n\n    this._gl.clear(mode);\n  }\n  /**\n   * @internal\n   */\n\n\n  _viewport(x, y, width, height) {\n    if (x !== this._viewportCached.x || y !== this._viewportCached.y || width !== this._viewportCached.z || height !== this._viewportCached.w) {\n      this._viewportCached.x = x;\n      this._viewportCached.y = y;\n      this._viewportCached.z = width;\n      this._viewportCached.w = height;\n\n      this._gl.viewport(x, y, width, height);\n    }\n  }\n  /**\n   * Set the WebGL's viewport\n   * @param viewport defines the viewport element to be used\n   * @param requiredWidth defines the width required for rendering. If not provided the rendering canvas' width is used\n   * @param requiredHeight defines the height required for rendering. If not provided the rendering canvas' height is used\n   */\n\n\n  setViewport(viewport, requiredWidth, requiredHeight) {\n    const width = requiredWidth || this.getRenderWidth();\n    const height = requiredHeight || this.getRenderHeight();\n    const x = viewport.x || 0;\n    const y = viewport.y || 0;\n    this._cachedViewport = viewport;\n\n    this._viewport(x * width, y * height, width * viewport.width, height * viewport.height);\n  }\n  /**\n   * Begin a new frame\n   */\n\n\n  beginFrame() {}\n  /**\n   * Enf the current frame\n   */\n\n\n  endFrame() {\n    // Force a flush in case we are using a bad OS.\n    if (this._badOS) {\n      this.flushFramebuffer();\n    }\n\n    this._frameId++;\n  }\n  /**\n   * Resize the view according to the canvas' size\n   * @param forceSetSize true to force setting the sizes of the underlying canvas\n   */\n\n\n  resize(forceSetSize = false) {\n    let width;\n    let height; // Re-query hardware scaling level to handle zoomed-in resizing.\n\n    if (this.adaptToDeviceRatio) {\n      const devicePixelRatio = (0, _domManagement.IsWindowObjectExist)() ? window.devicePixelRatio || 1.0 : 1.0;\n      const changeRatio = this._lastDevicePixelRatio / devicePixelRatio;\n      this._lastDevicePixelRatio = devicePixelRatio;\n      this._hardwareScalingLevel *= changeRatio;\n    }\n\n    if ((0, _domManagement.IsWindowObjectExist)() && (0, _domManagement.IsDocumentAvailable)()) {\n      // make sure it is a Node object, and is a part of the document.\n      if (this._renderingCanvas) {\n        const boundingRect = this._renderingCanvas.getBoundingClientRect ? this._renderingCanvas.getBoundingClientRect() : {\n          // fallback to last solution in case the function doesn't exist\n          width: this._renderingCanvas.width * this._hardwareScalingLevel,\n          height: this._renderingCanvas.height * this._hardwareScalingLevel\n        };\n        width = this._renderingCanvas.clientWidth || boundingRect.width || this._renderingCanvas.width || 100;\n        height = this._renderingCanvas.clientHeight || boundingRect.height || this._renderingCanvas.height || 100;\n      } else {\n        width = window.innerWidth;\n        height = window.innerHeight;\n      }\n    } else {\n      width = this._renderingCanvas ? this._renderingCanvas.width : 100;\n      height = this._renderingCanvas ? this._renderingCanvas.height : 100;\n    }\n\n    this.setSize(width / this._hardwareScalingLevel, height / this._hardwareScalingLevel, forceSetSize);\n  }\n  /**\n   * Force a specific size of the canvas\n   * @param width defines the new canvas' width\n   * @param height defines the new canvas' height\n   * @param forceSetSize true to force setting the sizes of the underlying canvas\n   * @returns true if the size was changed\n   */\n\n\n  setSize(width, height, forceSetSize = false) {\n    if (!this._renderingCanvas) {\n      return false;\n    }\n\n    width = width | 0;\n    height = height | 0;\n\n    if (!forceSetSize && this._renderingCanvas.width === width && this._renderingCanvas.height === height) {\n      return false;\n    }\n\n    this._renderingCanvas.width = width;\n    this._renderingCanvas.height = height;\n    return true;\n  }\n  /**\n   * Binds the frame buffer to the specified texture.\n   * @param rtWrapper The render target wrapper to render to\n   * @param faceIndex The face of the texture to render to in case of cube texture and if the render target wrapper is not a multi render target\n   * @param requiredWidth The width of the target to render to\n   * @param requiredHeight The height of the target to render to\n   * @param forceFullscreenViewport Forces the viewport to be the entire texture/screen if true\n   * @param lodLevel Defines the lod level to bind to the frame buffer\n   * @param layer Defines the 2d array index to bind to the frame buffer if the render target wrapper is not a multi render target\n   */\n\n\n  bindFramebuffer(rtWrapper, faceIndex = 0, requiredWidth, requiredHeight, forceFullscreenViewport, lodLevel = 0, layer = 0) {\n    var _a, _b, _c, _d, _e;\n\n    const webglRTWrapper = rtWrapper;\n\n    if (this._currentRenderTarget) {\n      this.unBindFramebuffer(this._currentRenderTarget);\n    }\n\n    this._currentRenderTarget = rtWrapper;\n\n    this._bindUnboundFramebuffer(webglRTWrapper._MSAAFramebuffer ? webglRTWrapper._MSAAFramebuffer : webglRTWrapper._framebuffer);\n\n    const gl = this._gl;\n\n    if (!rtWrapper.isMulti) {\n      if (rtWrapper.is2DArray) {\n        gl.framebufferTextureLayer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, (_a = rtWrapper.texture._hardwareTexture) === null || _a === void 0 ? void 0 : _a.underlyingResource, lodLevel, layer);\n      } else if (rtWrapper.isCube) {\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex, (_b = rtWrapper.texture._hardwareTexture) === null || _b === void 0 ? void 0 : _b.underlyingResource, lodLevel);\n      }\n    }\n\n    const depthStencilTexture = rtWrapper._depthStencilTexture;\n\n    if (depthStencilTexture) {\n      const attachment = rtWrapper._depthStencilTextureWithStencil ? gl.DEPTH_STENCIL_ATTACHMENT : gl.DEPTH_ATTACHMENT;\n\n      if (rtWrapper.is2DArray) {\n        gl.framebufferTextureLayer(gl.FRAMEBUFFER, attachment, (_c = depthStencilTexture._hardwareTexture) === null || _c === void 0 ? void 0 : _c.underlyingResource, lodLevel, layer);\n      } else if (rtWrapper.isCube) {\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex, (_d = depthStencilTexture._hardwareTexture) === null || _d === void 0 ? void 0 : _d.underlyingResource, lodLevel);\n      } else {\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_2D, (_e = depthStencilTexture._hardwareTexture) === null || _e === void 0 ? void 0 : _e.underlyingResource, lodLevel);\n      }\n    }\n\n    if (this._cachedViewport && !forceFullscreenViewport) {\n      this.setViewport(this._cachedViewport, requiredWidth, requiredHeight);\n    } else {\n      if (!requiredWidth) {\n        requiredWidth = rtWrapper.width;\n\n        if (lodLevel) {\n          requiredWidth = requiredWidth / Math.pow(2, lodLevel);\n        }\n      }\n\n      if (!requiredHeight) {\n        requiredHeight = rtWrapper.height;\n\n        if (lodLevel) {\n          requiredHeight = requiredHeight / Math.pow(2, lodLevel);\n        }\n      }\n\n      this._viewport(0, 0, requiredWidth, requiredHeight);\n    }\n\n    this.wipeCaches();\n  }\n  /**\n   * Set various states to the webGL context\n   * @param culling defines culling state: true to enable culling, false to disable it\n   * @param zOffset defines the value to apply to zOffset (0 by default)\n   * @param force defines if states must be applied even if cache is up to date\n   * @param reverseSide defines if culling must be reversed (CCW if false, CW if true)\n   * @param cullBackFaces true to cull back faces, false to cull front faces (if culling is enabled)\n   * @param stencil stencil states to set\n   * @param zOffsetUnits defines the value to apply to zOffsetUnits (0 by default)\n   */\n\n\n  setState(culling, zOffset = 0, force, reverseSide = false, cullBackFaces, stencil, zOffsetUnits = 0) {\n    var _a, _b; // Culling\n\n\n    if (this._depthCullingState.cull !== culling || force) {\n      this._depthCullingState.cull = culling;\n    } // Cull face\n\n\n    const cullFace = ((_b = (_a = this.cullBackFaces) !== null && _a !== void 0 ? _a : cullBackFaces) !== null && _b !== void 0 ? _b : true) ? this._gl.BACK : this._gl.FRONT;\n\n    if (this._depthCullingState.cullFace !== cullFace || force) {\n      this._depthCullingState.cullFace = cullFace;\n    } // Z offset\n\n\n    this.setZOffset(zOffset);\n    this.setZOffsetUnits(zOffsetUnits); // Front face\n\n    const frontFace = reverseSide ? this._gl.CW : this._gl.CCW;\n\n    if (this._depthCullingState.frontFace !== frontFace || force) {\n      this._depthCullingState.frontFace = frontFace;\n    }\n\n    this._stencilStateComposer.stencilMaterial = stencil;\n  }\n  /**\n   * Gets a boolean indicating if depth testing is enabled\n   * @returns the current state\n   */\n\n\n  getDepthBuffer() {\n    return this._depthCullingState.depthTest;\n  }\n  /**\n   * Enable or disable depth buffering\n   * @param enable defines the state to set\n   */\n\n\n  setDepthBuffer(enable) {\n    this._depthCullingState.depthTest = enable;\n  }\n  /**\n   * Set the z offset Factor to apply to current rendering\n   * @param value defines the offset to apply\n   */\n\n\n  setZOffset(value) {\n    this._depthCullingState.zOffset = this.useReverseDepthBuffer ? -value : value;\n  }\n  /**\n   * Gets the current value of the zOffset Factor\n   * @returns the current zOffset Factor state\n   */\n\n\n  getZOffset() {\n    const zOffset = this._depthCullingState.zOffset;\n    return this.useReverseDepthBuffer ? -zOffset : zOffset;\n  }\n  /**\n   * Set the z offset Units to apply to current rendering\n   * @param value defines the offset to apply\n   */\n\n\n  setZOffsetUnits(value) {\n    this._depthCullingState.zOffsetUnits = this.useReverseDepthBuffer ? -value : value;\n  }\n  /**\n   * Gets the current value of the zOffset Units\n   * @returns the current zOffset Units state\n   */\n\n\n  getZOffsetUnits() {\n    const zOffsetUnits = this._depthCullingState.zOffsetUnits;\n    return this.useReverseDepthBuffer ? -zOffsetUnits : zOffsetUnits;\n  }\n  /**\n   * @internal\n   */\n\n\n  _bindUnboundFramebuffer(framebuffer) {\n    if (this._currentFramebuffer !== framebuffer) {\n      this._gl.bindFramebuffer(this._gl.FRAMEBUFFER, framebuffer);\n\n      this._currentFramebuffer = framebuffer;\n    }\n  }\n  /** @internal */\n\n\n  _currentFrameBufferIsDefaultFrameBuffer() {\n    return this._currentFramebuffer === null;\n  }\n  /**\n   * Generates the mipmaps for a texture\n   * @param texture texture to generate the mipmaps for\n   */\n\n\n  generateMipmaps(texture) {\n    this._bindTextureDirectly(this._gl.TEXTURE_2D, texture, true);\n\n    this._gl.generateMipmap(this._gl.TEXTURE_2D);\n\n    this._bindTextureDirectly(this._gl.TEXTURE_2D, null);\n  }\n  /**\n   * Unbind the current render target texture from the webGL context\n   * @param texture defines the render target wrapper to unbind\n   * @param disableGenerateMipMaps defines a boolean indicating that mipmaps must not be generated\n   * @param onBeforeUnbind defines a function which will be called before the effective unbind\n   */\n\n\n  unBindFramebuffer(texture, disableGenerateMipMaps = false, onBeforeUnbind) {\n    var _a;\n\n    const webglRTWrapper = texture;\n    this._currentRenderTarget = null; // If MSAA, we need to bitblt back to main texture\n\n    const gl = this._gl;\n\n    if (webglRTWrapper._MSAAFramebuffer) {\n      if (texture.isMulti) {\n        // This texture is part of a MRT texture, we need to treat all attachments\n        this.unBindMultiColorAttachmentFramebuffer(texture, disableGenerateMipMaps, onBeforeUnbind);\n        return;\n      }\n\n      gl.bindFramebuffer(gl.READ_FRAMEBUFFER, webglRTWrapper._MSAAFramebuffer);\n      gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, webglRTWrapper._framebuffer);\n      gl.blitFramebuffer(0, 0, texture.width, texture.height, 0, 0, texture.width, texture.height, gl.COLOR_BUFFER_BIT, gl.NEAREST);\n    }\n\n    if (((_a = texture.texture) === null || _a === void 0 ? void 0 : _a.generateMipMaps) && !disableGenerateMipMaps && !texture.isCube) {\n      this.generateMipmaps(texture.texture);\n    }\n\n    if (onBeforeUnbind) {\n      if (webglRTWrapper._MSAAFramebuffer) {\n        // Bind the correct framebuffer\n        this._bindUnboundFramebuffer(webglRTWrapper._framebuffer);\n      }\n\n      onBeforeUnbind();\n    }\n\n    this._bindUnboundFramebuffer(null);\n  }\n  /**\n   * Force a webGL flush (ie. a flush of all waiting webGL commands)\n   */\n\n\n  flushFramebuffer() {\n    this._gl.flush();\n  }\n  /**\n   * Unbind the current render target and bind the default framebuffer\n   */\n\n\n  restoreDefaultFramebuffer() {\n    if (this._currentRenderTarget) {\n      this.unBindFramebuffer(this._currentRenderTarget);\n    } else {\n      this._bindUnboundFramebuffer(null);\n    }\n\n    if (this._cachedViewport) {\n      this.setViewport(this._cachedViewport);\n    }\n\n    this.wipeCaches();\n  } // VBOs\n\n  /** @internal */\n\n\n  _resetVertexBufferBinding() {\n    this.bindArrayBuffer(null);\n    this._cachedVertexBuffers = null;\n  }\n  /**\n   * Creates a vertex buffer\n   * @param data the data for the vertex buffer\n   * @returns the new WebGL static buffer\n   */\n\n\n  createVertexBuffer(data) {\n    return this._createVertexBuffer(data, this._gl.STATIC_DRAW);\n  }\n\n  _createVertexBuffer(data, usage) {\n    const vbo = this._gl.createBuffer();\n\n    if (!vbo) {\n      throw new Error(\"Unable to create vertex buffer\");\n    }\n\n    const dataBuffer = new _webGLDataBuffer.WebGLDataBuffer(vbo);\n    this.bindArrayBuffer(dataBuffer);\n\n    if (data instanceof Array) {\n      this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array(data), usage);\n    } else {\n      this._gl.bufferData(this._gl.ARRAY_BUFFER, data, usage);\n    }\n\n    this._resetVertexBufferBinding();\n\n    dataBuffer.references = 1;\n    return dataBuffer;\n  }\n  /**\n   * Creates a dynamic vertex buffer\n   * @param data the data for the dynamic vertex buffer\n   * @returns the new WebGL dynamic buffer\n   */\n\n\n  createDynamicVertexBuffer(data) {\n    return this._createVertexBuffer(data, this._gl.DYNAMIC_DRAW);\n  }\n\n  _resetIndexBufferBinding() {\n    this.bindIndexBuffer(null);\n    this._cachedIndexBuffer = null;\n  }\n  /**\n   * Creates a new index buffer\n   * @param indices defines the content of the index buffer\n   * @param updatable defines if the index buffer must be updatable\n   * @returns a new webGL buffer\n   */\n\n\n  createIndexBuffer(indices, updatable) {\n    const vbo = this._gl.createBuffer();\n\n    const dataBuffer = new _webGLDataBuffer.WebGLDataBuffer(vbo);\n\n    if (!vbo) {\n      throw new Error(\"Unable to create index buffer\");\n    }\n\n    this.bindIndexBuffer(dataBuffer);\n\n    const data = this._normalizeIndexData(indices);\n\n    this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER, data, updatable ? this._gl.DYNAMIC_DRAW : this._gl.STATIC_DRAW);\n\n    this._resetIndexBufferBinding();\n\n    dataBuffer.references = 1;\n    dataBuffer.is32Bits = data.BYTES_PER_ELEMENT === 4;\n    return dataBuffer;\n  }\n\n  _normalizeIndexData(indices) {\n    const bytesPerElement = indices.BYTES_PER_ELEMENT;\n\n    if (bytesPerElement === 2) {\n      return indices;\n    } // Check 32 bit support\n\n\n    if (this._caps.uintIndices) {\n      if (indices instanceof Uint32Array) {\n        return indices;\n      } else {\n        // number[] or Int32Array, check if 32 bit is necessary\n        for (let index = 0; index < indices.length; index++) {\n          if (indices[index] >= 65535) {\n            return new Uint32Array(indices);\n          }\n        }\n\n        return new Uint16Array(indices);\n      }\n    } // No 32 bit support, force conversion to 16 bit (values greater 16 bit are lost)\n\n\n    return new Uint16Array(indices);\n  }\n  /**\n   * Bind a webGL buffer to the webGL context\n   * @param buffer defines the buffer to bind\n   */\n\n\n  bindArrayBuffer(buffer) {\n    if (!this._vaoRecordInProgress) {\n      this._unbindVertexArrayObject();\n    }\n\n    this._bindBuffer(buffer, this._gl.ARRAY_BUFFER);\n  }\n  /**\n   * Bind a specific block at a given index in a specific shader program\n   * @param pipelineContext defines the pipeline context to use\n   * @param blockName defines the block name\n   * @param index defines the index where to bind the block\n   */\n\n\n  bindUniformBlock(pipelineContext, blockName, index) {\n    const program = pipelineContext.program;\n\n    const uniformLocation = this._gl.getUniformBlockIndex(program, blockName);\n\n    this._gl.uniformBlockBinding(program, uniformLocation, index);\n  } // eslint-disable-next-line @typescript-eslint/naming-convention\n\n\n  bindIndexBuffer(buffer) {\n    if (!this._vaoRecordInProgress) {\n      this._unbindVertexArrayObject();\n    }\n\n    this._bindBuffer(buffer, this._gl.ELEMENT_ARRAY_BUFFER);\n  }\n\n  _bindBuffer(buffer, target) {\n    if (this._vaoRecordInProgress || this._currentBoundBuffer[target] !== buffer) {\n      this._gl.bindBuffer(target, buffer ? buffer.underlyingResource : null);\n\n      this._currentBoundBuffer[target] = buffer;\n    }\n  }\n  /**\n   * update the bound buffer with the given data\n   * @param data defines the data to update\n   */\n\n\n  updateArrayBuffer(data) {\n    this._gl.bufferSubData(this._gl.ARRAY_BUFFER, 0, data);\n  }\n\n  _vertexAttribPointer(buffer, indx, size, type, normalized, stride, offset) {\n    const pointer = this._currentBufferPointers[indx];\n\n    if (!pointer) {\n      return;\n    }\n\n    let changed = false;\n\n    if (!pointer.active) {\n      changed = true;\n      pointer.active = true;\n      pointer.index = indx;\n      pointer.size = size;\n      pointer.type = type;\n      pointer.normalized = normalized;\n      pointer.stride = stride;\n      pointer.offset = offset;\n      pointer.buffer = buffer;\n    } else {\n      if (pointer.buffer !== buffer) {\n        pointer.buffer = buffer;\n        changed = true;\n      }\n\n      if (pointer.size !== size) {\n        pointer.size = size;\n        changed = true;\n      }\n\n      if (pointer.type !== type) {\n        pointer.type = type;\n        changed = true;\n      }\n\n      if (pointer.normalized !== normalized) {\n        pointer.normalized = normalized;\n        changed = true;\n      }\n\n      if (pointer.stride !== stride) {\n        pointer.stride = stride;\n        changed = true;\n      }\n\n      if (pointer.offset !== offset) {\n        pointer.offset = offset;\n        changed = true;\n      }\n    }\n\n    if (changed || this._vaoRecordInProgress) {\n      this.bindArrayBuffer(buffer);\n\n      if (type === this._gl.UNSIGNED_INT || type === this._gl.INT) {\n        this._gl.vertexAttribIPointer(indx, size, type, stride, offset);\n      } else {\n        this._gl.vertexAttribPointer(indx, size, type, normalized, stride, offset);\n      }\n    }\n  }\n  /**\n   * @internal\n   */\n\n\n  _bindIndexBufferWithCache(indexBuffer) {\n    if (indexBuffer == null) {\n      return;\n    }\n\n    if (this._cachedIndexBuffer !== indexBuffer) {\n      this._cachedIndexBuffer = indexBuffer;\n      this.bindIndexBuffer(indexBuffer);\n      this._uintIndicesCurrentlySet = indexBuffer.is32Bits;\n    }\n  }\n\n  _bindVertexBuffersAttributes(vertexBuffers, effect, overrideVertexBuffers) {\n    const attributes = effect.getAttributesNames();\n\n    if (!this._vaoRecordInProgress) {\n      this._unbindVertexArrayObject();\n    }\n\n    this.unbindAllAttributes();\n\n    for (let index = 0; index < attributes.length; index++) {\n      const order = effect.getAttributeLocation(index);\n\n      if (order >= 0) {\n        const ai = attributes[index];\n        let vertexBuffer = null;\n\n        if (overrideVertexBuffers) {\n          vertexBuffer = overrideVertexBuffers[ai];\n        }\n\n        if (!vertexBuffer) {\n          vertexBuffer = vertexBuffers[ai];\n        }\n\n        if (!vertexBuffer) {\n          continue;\n        }\n\n        this._gl.enableVertexAttribArray(order);\n\n        if (!this._vaoRecordInProgress) {\n          this._vertexAttribArraysEnabled[order] = true;\n        }\n\n        const buffer = vertexBuffer.getBuffer();\n\n        if (buffer) {\n          this._vertexAttribPointer(buffer, order, vertexBuffer.getSize(), vertexBuffer.type, vertexBuffer.normalized, vertexBuffer.byteStride, vertexBuffer.byteOffset);\n\n          if (vertexBuffer.getIsInstanced()) {\n            this._gl.vertexAttribDivisor(order, vertexBuffer.getInstanceDivisor());\n\n            if (!this._vaoRecordInProgress) {\n              this._currentInstanceLocations.push(order);\n\n              this._currentInstanceBuffers.push(buffer);\n            }\n          }\n        }\n      }\n    }\n  }\n  /**\n   * Records a vertex array object\n   * @see https://doc.babylonjs.com/setup/support/webGL2#vertex-array-objects\n   * @param vertexBuffers defines the list of vertex buffers to store\n   * @param indexBuffer defines the index buffer to store\n   * @param effect defines the effect to store\n   * @param overrideVertexBuffers defines optional list of avertex buffers that overrides the entries in vertexBuffers\n   * @returns the new vertex array object\n   */\n\n\n  recordVertexArrayObject(vertexBuffers, indexBuffer, effect, overrideVertexBuffers) {\n    const vao = this._gl.createVertexArray();\n\n    if (!vao) {\n      throw new Error(\"Unable to create VAO\");\n    }\n\n    this._vaoRecordInProgress = true;\n\n    this._gl.bindVertexArray(vao);\n\n    this._mustWipeVertexAttributes = true;\n\n    this._bindVertexBuffersAttributes(vertexBuffers, effect, overrideVertexBuffers);\n\n    this.bindIndexBuffer(indexBuffer);\n    this._vaoRecordInProgress = false;\n\n    this._gl.bindVertexArray(null);\n\n    return vao;\n  }\n  /**\n   * Bind a specific vertex array object\n   * @see https://doc.babylonjs.com/setup/support/webGL2#vertex-array-objects\n   * @param vertexArrayObject defines the vertex array object to bind\n   * @param indexBuffer defines the index buffer to bind\n   */\n\n\n  bindVertexArrayObject(vertexArrayObject, indexBuffer) {\n    if (this._cachedVertexArrayObject !== vertexArrayObject) {\n      this._cachedVertexArrayObject = vertexArrayObject;\n\n      this._gl.bindVertexArray(vertexArrayObject);\n\n      this._cachedVertexBuffers = null;\n      this._cachedIndexBuffer = null;\n      this._uintIndicesCurrentlySet = indexBuffer != null && indexBuffer.is32Bits;\n      this._mustWipeVertexAttributes = true;\n    }\n  }\n  /**\n   * Bind webGl buffers directly to the webGL context\n   * @param vertexBuffer defines the vertex buffer to bind\n   * @param indexBuffer defines the index buffer to bind\n   * @param vertexDeclaration defines the vertex declaration to use with the vertex buffer\n   * @param vertexStrideSize defines the vertex stride of the vertex buffer\n   * @param effect defines the effect associated with the vertex buffer\n   */\n\n\n  bindBuffersDirectly(vertexBuffer, indexBuffer, vertexDeclaration, vertexStrideSize, effect) {\n    if (this._cachedVertexBuffers !== vertexBuffer || this._cachedEffectForVertexBuffers !== effect) {\n      this._cachedVertexBuffers = vertexBuffer;\n      this._cachedEffectForVertexBuffers = effect;\n      const attributesCount = effect.getAttributesCount();\n\n      this._unbindVertexArrayObject();\n\n      this.unbindAllAttributes();\n      let offset = 0;\n\n      for (let index = 0; index < attributesCount; index++) {\n        if (index < vertexDeclaration.length) {\n          const order = effect.getAttributeLocation(index);\n\n          if (order >= 0) {\n            this._gl.enableVertexAttribArray(order);\n\n            this._vertexAttribArraysEnabled[order] = true;\n\n            this._vertexAttribPointer(vertexBuffer, order, vertexDeclaration[index], this._gl.FLOAT, false, vertexStrideSize, offset);\n          }\n\n          offset += vertexDeclaration[index] * 4;\n        }\n      }\n    }\n\n    this._bindIndexBufferWithCache(indexBuffer);\n  }\n\n  _unbindVertexArrayObject() {\n    if (!this._cachedVertexArrayObject) {\n      return;\n    }\n\n    this._cachedVertexArrayObject = null;\n\n    this._gl.bindVertexArray(null);\n  }\n  /**\n   * Bind a list of vertex buffers to the webGL context\n   * @param vertexBuffers defines the list of vertex buffers to bind\n   * @param indexBuffer defines the index buffer to bind\n   * @param effect defines the effect associated with the vertex buffers\n   * @param overrideVertexBuffers defines optional list of avertex buffers that overrides the entries in vertexBuffers\n   */\n\n\n  bindBuffers(vertexBuffers, indexBuffer, effect, overrideVertexBuffers) {\n    if (this._cachedVertexBuffers !== vertexBuffers || this._cachedEffectForVertexBuffers !== effect) {\n      this._cachedVertexBuffers = vertexBuffers;\n      this._cachedEffectForVertexBuffers = effect;\n\n      this._bindVertexBuffersAttributes(vertexBuffers, effect, overrideVertexBuffers);\n    }\n\n    this._bindIndexBufferWithCache(indexBuffer);\n  }\n  /**\n   * Unbind all instance attributes\n   */\n\n\n  unbindInstanceAttributes() {\n    let boundBuffer;\n\n    for (let i = 0, ul = this._currentInstanceLocations.length; i < ul; i++) {\n      const instancesBuffer = this._currentInstanceBuffers[i];\n\n      if (boundBuffer != instancesBuffer && instancesBuffer.references) {\n        boundBuffer = instancesBuffer;\n        this.bindArrayBuffer(instancesBuffer);\n      }\n\n      const offsetLocation = this._currentInstanceLocations[i];\n\n      this._gl.vertexAttribDivisor(offsetLocation, 0);\n    }\n\n    this._currentInstanceBuffers.length = 0;\n    this._currentInstanceLocations.length = 0;\n  }\n  /**\n   * Release and free the memory of a vertex array object\n   * @param vao defines the vertex array object to delete\n   */\n\n\n  releaseVertexArrayObject(vao) {\n    this._gl.deleteVertexArray(vao);\n  }\n  /**\n   * @internal\n   */\n\n\n  _releaseBuffer(buffer) {\n    buffer.references--;\n\n    if (buffer.references === 0) {\n      this._deleteBuffer(buffer);\n\n      return true;\n    }\n\n    return false;\n  }\n\n  _deleteBuffer(buffer) {\n    this._gl.deleteBuffer(buffer.underlyingResource);\n  }\n  /**\n   * Update the content of a webGL buffer used with instantiation and bind it to the webGL context\n   * @param instancesBuffer defines the webGL buffer to update and bind\n   * @param data defines the data to store in the buffer\n   * @param offsetLocations defines the offsets or attributes information used to determine where data must be stored in the buffer\n   */\n\n\n  updateAndBindInstancesBuffer(instancesBuffer, data, offsetLocations) {\n    this.bindArrayBuffer(instancesBuffer);\n\n    if (data) {\n      this._gl.bufferSubData(this._gl.ARRAY_BUFFER, 0, data);\n    }\n\n    if (offsetLocations[0].index !== undefined) {\n      this.bindInstancesBuffer(instancesBuffer, offsetLocations, true);\n    } else {\n      for (let index = 0; index < 4; index++) {\n        const offsetLocation = offsetLocations[index];\n\n        if (!this._vertexAttribArraysEnabled[offsetLocation]) {\n          this._gl.enableVertexAttribArray(offsetLocation);\n\n          this._vertexAttribArraysEnabled[offsetLocation] = true;\n        }\n\n        this._vertexAttribPointer(instancesBuffer, offsetLocation, 4, this._gl.FLOAT, false, 64, index * 16);\n\n        this._gl.vertexAttribDivisor(offsetLocation, 1);\n\n        this._currentInstanceLocations.push(offsetLocation);\n\n        this._currentInstanceBuffers.push(instancesBuffer);\n      }\n    }\n  }\n  /**\n   * Bind the content of a webGL buffer used with instantiation\n   * @param instancesBuffer defines the webGL buffer to bind\n   * @param attributesInfo defines the offsets or attributes information used to determine where data must be stored in the buffer\n   * @param computeStride defines Whether to compute the strides from the info or use the default 0\n   */\n\n\n  bindInstancesBuffer(instancesBuffer, attributesInfo, computeStride = true) {\n    this.bindArrayBuffer(instancesBuffer);\n    let stride = 0;\n\n    if (computeStride) {\n      for (let i = 0; i < attributesInfo.length; i++) {\n        const ai = attributesInfo[i];\n        stride += ai.attributeSize * 4;\n      }\n    }\n\n    for (let i = 0; i < attributesInfo.length; i++) {\n      const ai = attributesInfo[i];\n\n      if (ai.index === undefined) {\n        ai.index = this._currentEffect.getAttributeLocationByName(ai.attributeName);\n      }\n\n      if (ai.index < 0) {\n        continue;\n      }\n\n      if (!this._vertexAttribArraysEnabled[ai.index]) {\n        this._gl.enableVertexAttribArray(ai.index);\n\n        this._vertexAttribArraysEnabled[ai.index] = true;\n      }\n\n      this._vertexAttribPointer(instancesBuffer, ai.index, ai.attributeSize, ai.attributeType || this._gl.FLOAT, ai.normalized || false, stride, ai.offset);\n\n      this._gl.vertexAttribDivisor(ai.index, ai.divisor === undefined ? 1 : ai.divisor);\n\n      this._currentInstanceLocations.push(ai.index);\n\n      this._currentInstanceBuffers.push(instancesBuffer);\n    }\n  }\n  /**\n   * Disable the instance attribute corresponding to the name in parameter\n   * @param name defines the name of the attribute to disable\n   */\n\n\n  disableInstanceAttributeByName(name) {\n    if (!this._currentEffect) {\n      return;\n    }\n\n    const attributeLocation = this._currentEffect.getAttributeLocationByName(name);\n\n    this.disableInstanceAttribute(attributeLocation);\n  }\n  /**\n   * Disable the instance attribute corresponding to the location in parameter\n   * @param attributeLocation defines the attribute location of the attribute to disable\n   */\n\n\n  disableInstanceAttribute(attributeLocation) {\n    let shouldClean = false;\n    let index;\n\n    while ((index = this._currentInstanceLocations.indexOf(attributeLocation)) !== -1) {\n      this._currentInstanceLocations.splice(index, 1);\n\n      this._currentInstanceBuffers.splice(index, 1);\n\n      shouldClean = true;\n      index = this._currentInstanceLocations.indexOf(attributeLocation);\n    }\n\n    if (shouldClean) {\n      this._gl.vertexAttribDivisor(attributeLocation, 0);\n\n      this.disableAttributeByIndex(attributeLocation);\n    }\n  }\n  /**\n   * Disable the attribute corresponding to the location in parameter\n   * @param attributeLocation defines the attribute location of the attribute to disable\n   */\n\n\n  disableAttributeByIndex(attributeLocation) {\n    this._gl.disableVertexAttribArray(attributeLocation);\n\n    this._vertexAttribArraysEnabled[attributeLocation] = false;\n    this._currentBufferPointers[attributeLocation].active = false;\n  }\n  /**\n   * Send a draw order\n   * @param useTriangles defines if triangles must be used to draw (else wireframe will be used)\n   * @param indexStart defines the starting index\n   * @param indexCount defines the number of index to draw\n   * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n   */\n\n\n  draw(useTriangles, indexStart, indexCount, instancesCount) {\n    this.drawElementsType(useTriangles ? 0 : 1, indexStart, indexCount, instancesCount);\n  }\n  /**\n   * Draw a list of points\n   * @param verticesStart defines the index of first vertex to draw\n   * @param verticesCount defines the count of vertices to draw\n   * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n   */\n\n\n  drawPointClouds(verticesStart, verticesCount, instancesCount) {\n    this.drawArraysType(2, verticesStart, verticesCount, instancesCount);\n  }\n  /**\n   * Draw a list of unindexed primitives\n   * @param useTriangles defines if triangles must be used to draw (else wireframe will be used)\n   * @param verticesStart defines the index of first vertex to draw\n   * @param verticesCount defines the count of vertices to draw\n   * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n   */\n\n\n  drawUnIndexed(useTriangles, verticesStart, verticesCount, instancesCount) {\n    this.drawArraysType(useTriangles ? 0 : 1, verticesStart, verticesCount, instancesCount);\n  }\n  /**\n   * Draw a list of indexed primitives\n   * @param fillMode defines the primitive to use\n   * @param indexStart defines the starting index\n   * @param indexCount defines the number of index to draw\n   * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n   */\n\n\n  drawElementsType(fillMode, indexStart, indexCount, instancesCount) {\n    // Apply states\n    this.applyStates();\n\n    this._reportDrawCall(); // Render\n\n\n    const drawMode = this._drawMode(fillMode);\n\n    const indexFormat = this._uintIndicesCurrentlySet ? this._gl.UNSIGNED_INT : this._gl.UNSIGNED_SHORT;\n    const mult = this._uintIndicesCurrentlySet ? 4 : 2;\n\n    if (instancesCount) {\n      this._gl.drawElementsInstanced(drawMode, indexCount, indexFormat, indexStart * mult, instancesCount);\n    } else {\n      this._gl.drawElements(drawMode, indexCount, indexFormat, indexStart * mult);\n    }\n  }\n  /**\n   * Draw a list of unindexed primitives\n   * @param fillMode defines the primitive to use\n   * @param verticesStart defines the index of first vertex to draw\n   * @param verticesCount defines the count of vertices to draw\n   * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n   */\n\n\n  drawArraysType(fillMode, verticesStart, verticesCount, instancesCount) {\n    // Apply states\n    this.applyStates();\n\n    this._reportDrawCall();\n\n    const drawMode = this._drawMode(fillMode);\n\n    if (instancesCount) {\n      this._gl.drawArraysInstanced(drawMode, verticesStart, verticesCount, instancesCount);\n    } else {\n      this._gl.drawArrays(drawMode, verticesStart, verticesCount);\n    }\n  }\n\n  _drawMode(fillMode) {\n    switch (fillMode) {\n      // Triangle views\n      case 0:\n        return this._gl.TRIANGLES;\n\n      case 2:\n        return this._gl.POINTS;\n\n      case 1:\n        return this._gl.LINES;\n      // Draw modes\n\n      case 3:\n        return this._gl.POINTS;\n\n      case 4:\n        return this._gl.LINES;\n\n      case 5:\n        return this._gl.LINE_LOOP;\n\n      case 6:\n        return this._gl.LINE_STRIP;\n\n      case 7:\n        return this._gl.TRIANGLE_STRIP;\n\n      case 8:\n        return this._gl.TRIANGLE_FAN;\n\n      default:\n        return this._gl.TRIANGLES;\n    }\n  }\n  /** @internal */\n\n\n  _reportDrawCall() {// Will be implemented by children\n  } // Shaders\n\n  /**\n   * @internal\n   */\n\n\n  _releaseEffect(effect) {\n    if (this._compiledEffects[effect._key]) {\n      delete this._compiledEffects[effect._key];\n    }\n\n    const pipelineContext = effect.getPipelineContext();\n\n    if (pipelineContext) {\n      this._deletePipelineContext(pipelineContext);\n    }\n  }\n  /**\n   * @internal\n   */\n\n\n  _deletePipelineContext(pipelineContext) {\n    const webGLPipelineContext = pipelineContext;\n\n    if (webGLPipelineContext && webGLPipelineContext.program) {\n      webGLPipelineContext.program.__SPECTOR_rebuildProgram = null;\n\n      this._gl.deleteProgram(webGLPipelineContext.program);\n    }\n  }\n  /** @internal */\n\n\n  _getGlobalDefines(defines) {\n    if (defines) {\n      if (this.isNDCHalfZRange) {\n        defines[\"IS_NDC_HALF_ZRANGE\"] = \"\";\n      } else {\n        delete defines[\"IS_NDC_HALF_ZRANGE\"];\n      }\n\n      if (this.useReverseDepthBuffer) {\n        defines[\"USE_REVERSE_DEPTHBUFFER\"] = \"\";\n      } else {\n        delete defines[\"USE_REVERSE_DEPTHBUFFER\"];\n      }\n\n      if (this.useExactSrgbConversions) {\n        defines[\"USE_EXACT_SRGB_CONVERSIONS\"] = \"\";\n      } else {\n        delete defines[\"USE_EXACT_SRGB_CONVERSIONS\"];\n      }\n\n      return;\n    } else {\n      let s = \"\";\n\n      if (this.isNDCHalfZRange) {\n        s += \"#define IS_NDC_HALF_ZRANGE\";\n      }\n\n      if (this.useReverseDepthBuffer) {\n        if (s) {\n          s += \"\\n\";\n        }\n\n        s += \"#define USE_REVERSE_DEPTHBUFFER\";\n      }\n\n      if (this.useExactSrgbConversions) {\n        if (s) {\n          s += \"\\n\";\n        }\n\n        s += \"#define USE_EXACT_SRGB_CONVERSIONS\";\n      }\n\n      return s;\n    }\n  }\n  /**\n   * Create a new effect (used to store vertex/fragment shaders)\n   * @param baseName defines the base name of the effect (The name of file without .fragment.fx or .vertex.fx)\n   * @param attributesNamesOrOptions defines either a list of attribute names or an IEffectCreationOptions object\n   * @param uniformsNamesOrEngine defines either a list of uniform names or the engine to use\n   * @param samplers defines an array of string used to represent textures\n   * @param defines defines the string containing the defines to use to compile the shaders\n   * @param fallbacks defines the list of potential fallbacks to use if shader compilation fails\n   * @param onCompiled defines a function to call when the effect creation is successful\n   * @param onError defines a function to call when the effect creation has failed\n   * @param indexParameters defines an object containing the index values to use to compile shaders (like the maximum number of simultaneous lights)\n   * @param shaderLanguage the language the shader is written in (default: GLSL)\n   * @returns the new Effect\n   */\n\n\n  createEffect(baseName, attributesNamesOrOptions, uniformsNamesOrEngine, samplers, defines, fallbacks, onCompiled, onError, indexParameters, shaderLanguage = _shaderLanguage.ShaderLanguage.GLSL) {\n    var _a;\n\n    const vertex = baseName.vertexElement || baseName.vertex || baseName.vertexToken || baseName.vertexSource || baseName;\n    const fragment = baseName.fragmentElement || baseName.fragment || baseName.fragmentToken || baseName.fragmentSource || baseName;\n\n    const globalDefines = this._getGlobalDefines();\n\n    let fullDefines = (_a = defines !== null && defines !== void 0 ? defines : attributesNamesOrOptions.defines) !== null && _a !== void 0 ? _a : \"\";\n\n    if (globalDefines) {\n      fullDefines += globalDefines;\n    }\n\n    const name = vertex + \"+\" + fragment + \"@\" + fullDefines;\n\n    if (this._compiledEffects[name]) {\n      const compiledEffect = this._compiledEffects[name];\n\n      if (onCompiled && compiledEffect.isReady()) {\n        onCompiled(compiledEffect);\n      }\n\n      return compiledEffect;\n    }\n\n    const effect = new _effect.Effect(baseName, attributesNamesOrOptions, uniformsNamesOrEngine, samplers, this, defines, fallbacks, onCompiled, onError, indexParameters, name, shaderLanguage);\n    this._compiledEffects[name] = effect;\n    return effect;\n  } // eslint-disable-next-line @typescript-eslint/naming-convention\n\n\n  static _ConcatenateShader(source, defines, shaderVersion = \"\") {\n    return shaderVersion + (defines ? defines + \"\\n\" : \"\") + source;\n  }\n\n  _compileShader(source, type, defines, shaderVersion) {\n    return this._compileRawShader(ThinEngine._ConcatenateShader(source, defines, shaderVersion), type);\n  }\n\n  _compileRawShader(source, type) {\n    const gl = this._gl;\n    const shader = gl.createShader(type === \"vertex\" ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER);\n\n    if (!shader) {\n      let error = gl.NO_ERROR;\n      let tempError = gl.NO_ERROR;\n\n      while ((tempError = gl.getError()) !== gl.NO_ERROR) {\n        error = tempError;\n      }\n\n      throw new Error(`Something went wrong while creating a gl ${type} shader object. gl error=${error}, gl isContextLost=${gl.isContextLost()}, _contextWasLost=${this._contextWasLost}`);\n    }\n\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    return shader;\n  }\n  /**\n   * @internal\n   */\n\n\n  _getShaderSource(shader) {\n    return this._gl.getShaderSource(shader);\n  }\n  /**\n   * Directly creates a webGL program\n   * @param pipelineContext  defines the pipeline context to attach to\n   * @param vertexCode defines the vertex shader code to use\n   * @param fragmentCode defines the fragment shader code to use\n   * @param context defines the webGL context to use (if not set, the current one will be used)\n   * @param transformFeedbackVaryings defines the list of transform feedback varyings to use\n   * @returns the new webGL program\n   */\n\n\n  createRawShaderProgram(pipelineContext, vertexCode, fragmentCode, context, transformFeedbackVaryings = null) {\n    context = context || this._gl;\n\n    const vertexShader = this._compileRawShader(vertexCode, \"vertex\");\n\n    const fragmentShader = this._compileRawShader(fragmentCode, \"fragment\");\n\n    return this._createShaderProgram(pipelineContext, vertexShader, fragmentShader, context, transformFeedbackVaryings);\n  }\n  /**\n   * Creates a webGL program\n   * @param pipelineContext  defines the pipeline context to attach to\n   * @param vertexCode  defines the vertex shader code to use\n   * @param fragmentCode defines the fragment shader code to use\n   * @param defines defines the string containing the defines to use to compile the shaders\n   * @param context defines the webGL context to use (if not set, the current one will be used)\n   * @param transformFeedbackVaryings defines the list of transform feedback varyings to use\n   * @returns the new webGL program\n   */\n\n\n  createShaderProgram(pipelineContext, vertexCode, fragmentCode, defines, context, transformFeedbackVaryings = null) {\n    context = context || this._gl;\n    const shaderVersion = this._webGLVersion > 1 ? \"#version 300 es\\n#define WEBGL2 \\n\" : \"\";\n\n    const vertexShader = this._compileShader(vertexCode, \"vertex\", defines, shaderVersion);\n\n    const fragmentShader = this._compileShader(fragmentCode, \"fragment\", defines, shaderVersion);\n\n    return this._createShaderProgram(pipelineContext, vertexShader, fragmentShader, context, transformFeedbackVaryings);\n  }\n  /**\n   * Inline functions in shader code that are marked to be inlined\n   * @param code code to inline\n   * @returns inlined code\n   */\n\n\n  inlineShaderCode(code) {\n    // no inlining needed in the WebGL engine\n    return code;\n  }\n  /**\n   * Creates a new pipeline context\n   * @param shaderProcessingContext defines the shader processing context used during the processing if available\n   * @returns the new pipeline\n   */\n\n\n  createPipelineContext(shaderProcessingContext) {\n    const pipelineContext = new _webGLPipelineContext.WebGLPipelineContext();\n    pipelineContext.engine = this;\n\n    if (this._caps.parallelShaderCompile) {\n      pipelineContext.isParallelCompiled = true;\n    }\n\n    return pipelineContext;\n  }\n  /**\n   * Creates a new material context\n   * @returns the new context\n   */\n\n\n  createMaterialContext() {\n    return undefined;\n  }\n  /**\n   * Creates a new draw context\n   * @returns the new context\n   */\n\n\n  createDrawContext() {\n    return undefined;\n  }\n\n  _createShaderProgram(pipelineContext, vertexShader, fragmentShader, context, transformFeedbackVaryings = null) {\n    const shaderProgram = context.createProgram();\n    pipelineContext.program = shaderProgram;\n\n    if (!shaderProgram) {\n      throw new Error(\"Unable to create program\");\n    }\n\n    context.attachShader(shaderProgram, vertexShader);\n    context.attachShader(shaderProgram, fragmentShader);\n    context.linkProgram(shaderProgram);\n    pipelineContext.context = context;\n    pipelineContext.vertexShader = vertexShader;\n    pipelineContext.fragmentShader = fragmentShader;\n\n    if (!pipelineContext.isParallelCompiled) {\n      this._finalizePipelineContext(pipelineContext);\n    }\n\n    return shaderProgram;\n  }\n\n  _finalizePipelineContext(pipelineContext) {\n    const context = pipelineContext.context;\n    const vertexShader = pipelineContext.vertexShader;\n    const fragmentShader = pipelineContext.fragmentShader;\n    const program = pipelineContext.program;\n    const linked = context.getProgramParameter(program, context.LINK_STATUS);\n\n    if (!linked) {\n      // Get more info\n      // Vertex\n      if (!this._gl.getShaderParameter(vertexShader, this._gl.COMPILE_STATUS)) {\n        const log = this._gl.getShaderInfoLog(vertexShader);\n\n        if (log) {\n          pipelineContext.vertexCompilationError = log;\n          throw new Error(\"VERTEX SHADER \" + log);\n        }\n      } // Fragment\n\n\n      if (!this._gl.getShaderParameter(fragmentShader, this._gl.COMPILE_STATUS)) {\n        const log = this._gl.getShaderInfoLog(fragmentShader);\n\n        if (log) {\n          pipelineContext.fragmentCompilationError = log;\n          throw new Error(\"FRAGMENT SHADER \" + log);\n        }\n      }\n\n      const error = context.getProgramInfoLog(program);\n\n      if (error) {\n        pipelineContext.programLinkError = error;\n        throw new Error(error);\n      }\n    }\n\n    if (this.validateShaderPrograms) {\n      context.validateProgram(program);\n      const validated = context.getProgramParameter(program, context.VALIDATE_STATUS);\n\n      if (!validated) {\n        const error = context.getProgramInfoLog(program);\n\n        if (error) {\n          pipelineContext.programValidationError = error;\n          throw new Error(error);\n        }\n      }\n    }\n\n    context.deleteShader(vertexShader);\n    context.deleteShader(fragmentShader);\n    pipelineContext.vertexShader = undefined;\n    pipelineContext.fragmentShader = undefined;\n\n    if (pipelineContext.onCompiled) {\n      pipelineContext.onCompiled();\n      pipelineContext.onCompiled = undefined;\n    }\n  }\n  /**\n   * @internal\n   */\n\n\n  _preparePipelineContext(pipelineContext, vertexSourceCode, fragmentSourceCode, createAsRaw, rawVertexSourceCode, rawFragmentSourceCode, rebuildRebind, defines, transformFeedbackVaryings, key) {\n    const webGLRenderingState = pipelineContext;\n\n    if (createAsRaw) {\n      webGLRenderingState.program = this.createRawShaderProgram(webGLRenderingState, vertexSourceCode, fragmentSourceCode, undefined, transformFeedbackVaryings);\n    } else {\n      webGLRenderingState.program = this.createShaderProgram(webGLRenderingState, vertexSourceCode, fragmentSourceCode, defines, undefined, transformFeedbackVaryings);\n    }\n\n    webGLRenderingState.program.__SPECTOR_rebuildProgram = rebuildRebind;\n  }\n  /**\n   * @internal\n   */\n\n\n  _isRenderingStateCompiled(pipelineContext) {\n    const webGLPipelineContext = pipelineContext;\n\n    if (this._isDisposed || webGLPipelineContext._isDisposed) {\n      return false;\n    }\n\n    if (this._gl.getProgramParameter(webGLPipelineContext.program, this._caps.parallelShaderCompile.COMPLETION_STATUS_KHR)) {\n      this._finalizePipelineContext(webGLPipelineContext);\n\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * @internal\n   */\n\n\n  _executeWhenRenderingStateIsCompiled(pipelineContext, action) {\n    const webGLPipelineContext = pipelineContext;\n\n    if (!webGLPipelineContext.isParallelCompiled) {\n      action();\n      return;\n    }\n\n    const oldHandler = webGLPipelineContext.onCompiled;\n\n    if (oldHandler) {\n      webGLPipelineContext.onCompiled = () => {\n        oldHandler();\n        action();\n      };\n    } else {\n      webGLPipelineContext.onCompiled = action;\n    }\n  }\n  /**\n   * Gets the list of webGL uniform locations associated with a specific program based on a list of uniform names\n   * @param pipelineContext defines the pipeline context to use\n   * @param uniformsNames defines the list of uniform names\n   * @returns an array of webGL uniform locations\n   */\n\n\n  getUniforms(pipelineContext, uniformsNames) {\n    const results = new Array();\n    const webGLPipelineContext = pipelineContext;\n\n    for (let index = 0; index < uniformsNames.length; index++) {\n      results.push(this._gl.getUniformLocation(webGLPipelineContext.program, uniformsNames[index]));\n    }\n\n    return results;\n  }\n  /**\n   * Gets the list of active attributes for a given webGL program\n   * @param pipelineContext defines the pipeline context to use\n   * @param attributesNames defines the list of attribute names to get\n   * @returns an array of indices indicating the offset of each attribute\n   */\n\n\n  getAttributes(pipelineContext, attributesNames) {\n    const results = [];\n    const webGLPipelineContext = pipelineContext;\n\n    for (let index = 0; index < attributesNames.length; index++) {\n      try {\n        results.push(this._gl.getAttribLocation(webGLPipelineContext.program, attributesNames[index]));\n      } catch (e) {\n        results.push(-1);\n      }\n    }\n\n    return results;\n  }\n  /**\n   * Activates an effect, making it the current one (ie. the one used for rendering)\n   * @param effect defines the effect to activate\n   */\n\n\n  enableEffect(effect) {\n    effect = effect !== null && _drawWrapper.DrawWrapper.IsWrapper(effect) ? effect.effect : effect; // get only the effect, we don't need a Wrapper in the WebGL engine\n\n    if (!effect || effect === this._currentEffect) {\n      return;\n    }\n\n    this._stencilStateComposer.stencilMaterial = undefined;\n    effect = effect; // Use program\n\n    this.bindSamplers(effect);\n    this._currentEffect = effect;\n\n    if (effect.onBind) {\n      effect.onBind(effect);\n    }\n\n    if (effect._onBindObservable) {\n      effect._onBindObservable.notifyObservers(effect);\n    }\n  }\n  /**\n   * Set the value of an uniform to a number (int)\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param value defines the int number to store\n   * @returns true if the value was set\n   */\n\n\n  setInt(uniform, value) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniform1i(uniform, value);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to a int2\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param x defines the 1st component of the value\n   * @param y defines the 2nd component of the value\n   * @returns true if the value was set\n   */\n\n\n  setInt2(uniform, x, y) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniform2i(uniform, x, y);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to a int3\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param x defines the 1st component of the value\n   * @param y defines the 2nd component of the value\n   * @param z defines the 3rd component of the value\n   * @returns true if the value was set\n   */\n\n\n  setInt3(uniform, x, y, z) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniform3i(uniform, x, y, z);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to a int4\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param x defines the 1st component of the value\n   * @param y defines the 2nd component of the value\n   * @param z defines the 3rd component of the value\n   * @param w defines the 4th component of the value\n   * @returns true if the value was set\n   */\n\n\n  setInt4(uniform, x, y, z, w) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniform4i(uniform, x, y, z, w);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to an array of int32\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param array defines the array of int32 to store\n   * @returns true if the value was set\n   */\n\n\n  setIntArray(uniform, array) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniform1iv(uniform, array);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to an array of int32 (stored as vec2)\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param array defines the array of int32 to store\n   * @returns true if the value was set\n   */\n\n\n  setIntArray2(uniform, array) {\n    if (!uniform || array.length % 2 !== 0) {\n      return false;\n    }\n\n    this._gl.uniform2iv(uniform, array);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to an array of int32 (stored as vec3)\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param array defines the array of int32 to store\n   * @returns true if the value was set\n   */\n\n\n  setIntArray3(uniform, array) {\n    if (!uniform || array.length % 3 !== 0) {\n      return false;\n    }\n\n    this._gl.uniform3iv(uniform, array);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to an array of int32 (stored as vec4)\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param array defines the array of int32 to store\n   * @returns true if the value was set\n   */\n\n\n  setIntArray4(uniform, array) {\n    if (!uniform || array.length % 4 !== 0) {\n      return false;\n    }\n\n    this._gl.uniform4iv(uniform, array);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to a number (unsigned int)\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param value defines the unsigned int number to store\n   * @returns true if the value was set\n   */\n\n\n  setUInt(uniform, value) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniform1ui(uniform, value);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to a unsigned int2\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param x defines the 1st component of the value\n   * @param y defines the 2nd component of the value\n   * @returns true if the value was set\n   */\n\n\n  setUInt2(uniform, x, y) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniform2ui(uniform, x, y);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to a unsigned int3\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param x defines the 1st component of the value\n   * @param y defines the 2nd component of the value\n   * @param z defines the 3rd component of the value\n   * @returns true if the value was set\n   */\n\n\n  setUInt3(uniform, x, y, z) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniform3ui(uniform, x, y, z);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to a unsigned int4\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param x defines the 1st component of the value\n   * @param y defines the 2nd component of the value\n   * @param z defines the 3rd component of the value\n   * @param w defines the 4th component of the value\n   * @returns true if the value was set\n   */\n\n\n  setUInt4(uniform, x, y, z, w) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniform4ui(uniform, x, y, z, w);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to an array of unsigned int32\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param array defines the array of unsigned int32 to store\n   * @returns true if the value was set\n   */\n\n\n  setUIntArray(uniform, array) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniform1uiv(uniform, array);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to an array of unsigned int32 (stored as vec2)\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param array defines the array of unsigned int32 to store\n   * @returns true if the value was set\n   */\n\n\n  setUIntArray2(uniform, array) {\n    if (!uniform || array.length % 2 !== 0) {\n      return false;\n    }\n\n    this._gl.uniform2uiv(uniform, array);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to an array of unsigned int32 (stored as vec3)\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param array defines the array of unsigned int32 to store\n   * @returns true if the value was set\n   */\n\n\n  setUIntArray3(uniform, array) {\n    if (!uniform || array.length % 3 !== 0) {\n      return false;\n    }\n\n    this._gl.uniform3uiv(uniform, array);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to an array of unsigned int32 (stored as vec4)\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param array defines the array of unsigned int32 to store\n   * @returns true if the value was set\n   */\n\n\n  setUIntArray4(uniform, array) {\n    if (!uniform || array.length % 4 !== 0) {\n      return false;\n    }\n\n    this._gl.uniform4uiv(uniform, array);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to an array of number\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param array defines the array of number to store\n   * @returns true if the value was set\n   */\n\n\n  setArray(uniform, array) {\n    if (!uniform) {\n      return false;\n    }\n\n    if (array.length < 1) {\n      return false;\n    }\n\n    this._gl.uniform1fv(uniform, array);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to an array of number (stored as vec2)\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param array defines the array of number to store\n   * @returns true if the value was set\n   */\n\n\n  setArray2(uniform, array) {\n    if (!uniform || array.length % 2 !== 0) {\n      return false;\n    }\n\n    this._gl.uniform2fv(uniform, array);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to an array of number (stored as vec3)\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param array defines the array of number to store\n   * @returns true if the value was set\n   */\n\n\n  setArray3(uniform, array) {\n    if (!uniform || array.length % 3 !== 0) {\n      return false;\n    }\n\n    this._gl.uniform3fv(uniform, array);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to an array of number (stored as vec4)\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param array defines the array of number to store\n   * @returns true if the value was set\n   */\n\n\n  setArray4(uniform, array) {\n    if (!uniform || array.length % 4 !== 0) {\n      return false;\n    }\n\n    this._gl.uniform4fv(uniform, array);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to an array of float32 (stored as matrices)\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param matrices defines the array of float32 to store\n   * @returns true if the value was set\n   */\n\n\n  setMatrices(uniform, matrices) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniformMatrix4fv(uniform, false, matrices);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to a matrix (3x3)\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param matrix defines the Float32Array representing the 3x3 matrix to store\n   * @returns true if the value was set\n   */\n\n\n  setMatrix3x3(uniform, matrix) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniformMatrix3fv(uniform, false, matrix);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to a matrix (2x2)\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param matrix defines the Float32Array representing the 2x2 matrix to store\n   * @returns true if the value was set\n   */\n\n\n  setMatrix2x2(uniform, matrix) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniformMatrix2fv(uniform, false, matrix);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to a number (float)\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param value defines the float number to store\n   * @returns true if the value was transferred\n   */\n\n\n  setFloat(uniform, value) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniform1f(uniform, value);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to a vec2\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param x defines the 1st component of the value\n   * @param y defines the 2nd component of the value\n   * @returns true if the value was set\n   */\n\n\n  setFloat2(uniform, x, y) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniform2f(uniform, x, y);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to a vec3\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param x defines the 1st component of the value\n   * @param y defines the 2nd component of the value\n   * @param z defines the 3rd component of the value\n   * @returns true if the value was set\n   */\n\n\n  setFloat3(uniform, x, y, z) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniform3f(uniform, x, y, z);\n\n    return true;\n  }\n  /**\n   * Set the value of an uniform to a vec4\n   * @param uniform defines the webGL uniform location where to store the value\n   * @param x defines the 1st component of the value\n   * @param y defines the 2nd component of the value\n   * @param z defines the 3rd component of the value\n   * @param w defines the 4th component of the value\n   * @returns true if the value was set\n   */\n\n\n  setFloat4(uniform, x, y, z, w) {\n    if (!uniform) {\n      return false;\n    }\n\n    this._gl.uniform4f(uniform, x, y, z, w);\n\n    return true;\n  } // States\n\n  /**\n   * Apply all cached states (depth, culling, stencil and alpha)\n   */\n\n\n  applyStates() {\n    this._depthCullingState.apply(this._gl);\n\n    this._stencilStateComposer.apply(this._gl);\n\n    this._alphaState.apply(this._gl);\n\n    if (this._colorWriteChanged) {\n      this._colorWriteChanged = false;\n      const enable = this._colorWrite;\n\n      this._gl.colorMask(enable, enable, enable, enable);\n    }\n  }\n  /**\n   * Enable or disable color writing\n   * @param enable defines the state to set\n   */\n\n\n  setColorWrite(enable) {\n    if (enable !== this._colorWrite) {\n      this._colorWriteChanged = true;\n      this._colorWrite = enable;\n    }\n  }\n  /**\n   * Gets a boolean indicating if color writing is enabled\n   * @returns the current color writing state\n   */\n\n\n  getColorWrite() {\n    return this._colorWrite;\n  }\n  /**\n   * Gets the depth culling state manager\n   */\n\n\n  get depthCullingState() {\n    return this._depthCullingState;\n  }\n  /**\n   * Gets the alpha state manager\n   */\n\n\n  get alphaState() {\n    return this._alphaState;\n  }\n  /**\n   * Gets the stencil state manager\n   */\n\n\n  get stencilState() {\n    return this._stencilState;\n  }\n  /**\n   * Gets the stencil state composer\n   */\n\n\n  get stencilStateComposer() {\n    return this._stencilStateComposer;\n  } // Textures\n\n  /**\n   * Clears the list of texture accessible through engine.\n   * This can help preventing texture load conflict due to name collision.\n   */\n\n\n  clearInternalTexturesCache() {\n    this._internalTexturesCache.length = 0;\n  }\n  /**\n   * Force the entire cache to be cleared\n   * You should not have to use this function unless your engine needs to share the webGL context with another engine\n   * @param bruteForce defines a boolean to force clearing ALL caches (including stencil, detoh and alpha states)\n   */\n\n\n  wipeCaches(bruteForce) {\n    if (this.preventCacheWipeBetweenFrames && !bruteForce) {\n      return;\n    }\n\n    this._currentEffect = null;\n    this._viewportCached.x = 0;\n    this._viewportCached.y = 0;\n    this._viewportCached.z = 0;\n    this._viewportCached.w = 0; // Done before in case we clean the attributes\n\n    this._unbindVertexArrayObject();\n\n    if (bruteForce) {\n      this._currentProgram = null;\n      this.resetTextureCache();\n\n      this._stencilStateComposer.reset();\n\n      this._depthCullingState.reset();\n\n      this._depthCullingState.depthFunc = this._gl.LEQUAL;\n\n      this._alphaState.reset();\n\n      this._alphaMode = 1;\n      this._alphaEquation = 0;\n      this._colorWrite = true;\n      this._colorWriteChanged = true;\n      this._unpackFlipYCached = null;\n\n      this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, this._gl.NONE);\n\n      this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0);\n\n      this._mustWipeVertexAttributes = true;\n      this.unbindAllAttributes();\n    }\n\n    this._resetVertexBufferBinding();\n\n    this._cachedIndexBuffer = null;\n    this._cachedEffectForVertexBuffers = null;\n    this.bindIndexBuffer(null);\n  }\n  /**\n   * @internal\n   */\n\n\n  _getSamplingParameters(samplingMode, generateMipMaps) {\n    const gl = this._gl;\n    let magFilter = gl.NEAREST;\n    let minFilter = gl.NEAREST;\n\n    switch (samplingMode) {\n      case 11:\n        magFilter = gl.LINEAR;\n\n        if (generateMipMaps) {\n          minFilter = gl.LINEAR_MIPMAP_NEAREST;\n        } else {\n          minFilter = gl.LINEAR;\n        }\n\n        break;\n\n      case 3:\n        magFilter = gl.LINEAR;\n\n        if (generateMipMaps) {\n          minFilter = gl.LINEAR_MIPMAP_LINEAR;\n        } else {\n          minFilter = gl.LINEAR;\n        }\n\n        break;\n\n      case 8:\n        magFilter = gl.NEAREST;\n\n        if (generateMipMaps) {\n          minFilter = gl.NEAREST_MIPMAP_LINEAR;\n        } else {\n          minFilter = gl.NEAREST;\n        }\n\n        break;\n\n      case 4:\n        magFilter = gl.NEAREST;\n\n        if (generateMipMaps) {\n          minFilter = gl.NEAREST_MIPMAP_NEAREST;\n        } else {\n          minFilter = gl.NEAREST;\n        }\n\n        break;\n\n      case 5:\n        magFilter = gl.NEAREST;\n\n        if (generateMipMaps) {\n          minFilter = gl.LINEAR_MIPMAP_NEAREST;\n        } else {\n          minFilter = gl.LINEAR;\n        }\n\n        break;\n\n      case 6:\n        magFilter = gl.NEAREST;\n\n        if (generateMipMaps) {\n          minFilter = gl.LINEAR_MIPMAP_LINEAR;\n        } else {\n          minFilter = gl.LINEAR;\n        }\n\n        break;\n\n      case 7:\n        magFilter = gl.NEAREST;\n        minFilter = gl.LINEAR;\n        break;\n\n      case 1:\n        magFilter = gl.NEAREST;\n        minFilter = gl.NEAREST;\n        break;\n\n      case 9:\n        magFilter = gl.LINEAR;\n\n        if (generateMipMaps) {\n          minFilter = gl.NEAREST_MIPMAP_NEAREST;\n        } else {\n          minFilter = gl.NEAREST;\n        }\n\n        break;\n\n      case 10:\n        magFilter = gl.LINEAR;\n\n        if (generateMipMaps) {\n          minFilter = gl.NEAREST_MIPMAP_LINEAR;\n        } else {\n          minFilter = gl.NEAREST;\n        }\n\n        break;\n\n      case 2:\n        magFilter = gl.LINEAR;\n        minFilter = gl.LINEAR;\n        break;\n\n      case 12:\n        magFilter = gl.LINEAR;\n        minFilter = gl.NEAREST;\n        break;\n    }\n\n    return {\n      min: minFilter,\n      mag: magFilter\n    };\n  }\n  /** @internal */\n\n\n  _createTexture() {\n    const texture = this._gl.createTexture();\n\n    if (!texture) {\n      throw new Error(\"Unable to create texture\");\n    }\n\n    return texture;\n  }\n  /** @internal */\n\n\n  _createHardwareTexture() {\n    return new _webGLHardwareTexture.WebGLHardwareTexture(this._createTexture(), this._gl);\n  }\n  /**\n   * Creates an internal texture without binding it to a framebuffer\n   * @internal\n   * @param size defines the size of the texture\n   * @param options defines the options used to create the texture\n   * @param delayGPUTextureCreation true to delay the texture creation the first time it is really needed. false to create it right away\n   * @param source source type of the texture\n   * @returns a new internal texture\n   */\n\n\n  _createInternalTexture(size, options, delayGPUTextureCreation = true, source = _internalTexture.InternalTextureSource.Unknown) {\n    var _a;\n\n    let generateMipMaps = false;\n    let type = 0;\n    let samplingMode = 3;\n    let format = 5;\n    let useSRGBBuffer = false;\n    let samples = 1;\n    let label;\n\n    if (options !== undefined && typeof options === \"object\") {\n      generateMipMaps = !!options.generateMipMaps;\n      type = options.type === undefined ? 0 : options.type;\n      samplingMode = options.samplingMode === undefined ? 3 : options.samplingMode;\n      format = options.format === undefined ? 5 : options.format;\n      useSRGBBuffer = options.useSRGBBuffer === undefined ? false : options.useSRGBBuffer;\n      samples = (_a = options.samples) !== null && _a !== void 0 ? _a : 1;\n      label = options.label;\n    } else {\n      generateMipMaps = !!options;\n    }\n\n    useSRGBBuffer && (useSRGBBuffer = this._caps.supportSRGBBuffers && (this.webGLVersion > 1 || this.isWebGPU));\n\n    if (type === 1 && !this._caps.textureFloatLinearFiltering) {\n      // if floating point linear (gl.FLOAT) then force to NEAREST_SAMPLINGMODE\n      samplingMode = 1;\n    } else if (type === 2 && !this._caps.textureHalfFloatLinearFiltering) {\n      // if floating point linear (HALF_FLOAT) then force to NEAREST_SAMPLINGMODE\n      samplingMode = 1;\n    }\n\n    if (type === 1 && !this._caps.textureFloat) {\n      type = 0;\n\n      _logger.Logger.Warn(\"Float textures are not supported. Type forced to TEXTURETYPE_UNSIGNED_BYTE\");\n    }\n\n    const gl = this._gl;\n    const texture = new _internalTexture.InternalTexture(this, source);\n    const width = size.width || size;\n    const height = size.height || size;\n    const layers = size.layers || 0;\n\n    const filters = this._getSamplingParameters(samplingMode, generateMipMaps);\n\n    const target = layers !== 0 ? gl.TEXTURE_2D_ARRAY : gl.TEXTURE_2D;\n\n    const sizedFormat = this._getRGBABufferInternalSizedFormat(type, format, useSRGBBuffer);\n\n    const internalFormat = this._getInternalFormat(format);\n\n    const textureType = this._getWebGLTextureType(type); // Bind\n\n\n    this._bindTextureDirectly(target, texture);\n\n    if (layers !== 0) {\n      texture.is2DArray = true;\n      gl.texImage3D(target, 0, sizedFormat, width, height, layers, 0, internalFormat, textureType, null);\n    } else {\n      gl.texImage2D(target, 0, sizedFormat, width, height, 0, internalFormat, textureType, null);\n    }\n\n    gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, filters.mag);\n    gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, filters.min);\n    gl.texParameteri(target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE); // MipMaps\n\n    if (generateMipMaps) {\n      this._gl.generateMipmap(target);\n    }\n\n    this._bindTextureDirectly(target, null);\n\n    texture._useSRGBBuffer = useSRGBBuffer;\n    texture.baseWidth = width;\n    texture.baseHeight = height;\n    texture.width = width;\n    texture.height = height;\n    texture.depth = layers;\n    texture.isReady = true;\n    texture.samples = samples;\n    texture.generateMipMaps = generateMipMaps;\n    texture.samplingMode = samplingMode;\n    texture.type = type;\n    texture.format = format;\n    texture.label = label;\n\n    this._internalTexturesCache.push(texture);\n\n    return texture;\n  }\n  /**\n   * @internal\n   */\n\n\n  _getUseSRGBBuffer(useSRGBBuffer, noMipmap) {\n    // Generating mipmaps for sRGB textures is not supported in WebGL1 so we must disable the support if mipmaps is enabled\n    return useSRGBBuffer && this._caps.supportSRGBBuffers && (this.webGLVersion > 1 || this.isWebGPU || noMipmap);\n  }\n\n  _createTextureBase(url, noMipmap, invertY, scene, samplingMode = 3, onLoad = null, onError = null, prepareTexture, prepareTextureProcessFunction, buffer = null, fallback = null, format = null, forcedExtension = null, mimeType, loaderOptions, useSRGBBuffer) {\n    url = url || \"\";\n    const fromData = url.substr(0, 5) === \"data:\";\n    const fromBlob = url.substr(0, 5) === \"blob:\";\n    const isBase64 = fromData && url.indexOf(\";base64,\") !== -1;\n    const texture = fallback ? fallback : new _internalTexture.InternalTexture(this, _internalTexture.InternalTextureSource.Url);\n\n    if (texture !== fallback) {\n      texture.label = url.substring(0, 60); // default label, can be overriden by the caller\n    }\n\n    const originalUrl = url;\n\n    if (this._transformTextureUrl && !isBase64 && !fallback && !buffer) {\n      url = this._transformTextureUrl(url);\n    }\n\n    if (originalUrl !== url) {\n      texture._originalUrl = originalUrl;\n    } // establish the file extension, if possible\n\n\n    const lastDot = url.lastIndexOf(\".\");\n    let extension = forcedExtension ? forcedExtension : lastDot > -1 ? url.substring(lastDot).toLowerCase() : \"\";\n    let loader = null; // Remove query string\n\n    const queryStringIndex = extension.indexOf(\"?\");\n\n    if (queryStringIndex > -1) {\n      extension = extension.split(\"?\")[0];\n    }\n\n    for (const availableLoader of ThinEngine._TextureLoaders) {\n      if (availableLoader.canLoad(extension, mimeType)) {\n        loader = availableLoader;\n        break;\n      }\n    }\n\n    if (scene) {\n      scene.addPendingData(texture);\n    }\n\n    texture.url = url;\n    texture.generateMipMaps = !noMipmap;\n    texture.samplingMode = samplingMode;\n    texture.invertY = invertY;\n    texture._useSRGBBuffer = this._getUseSRGBBuffer(!!useSRGBBuffer, noMipmap);\n\n    if (!this._doNotHandleContextLost) {\n      // Keep a link to the buffer only if we plan to handle context lost\n      texture._buffer = buffer;\n    }\n\n    let onLoadObserver = null;\n\n    if (onLoad && !fallback) {\n      onLoadObserver = texture.onLoadedObservable.add(onLoad);\n    }\n\n    if (!fallback) {\n      this._internalTexturesCache.push(texture);\n    }\n\n    const onInternalError = (message, exception) => {\n      if (scene) {\n        scene.removePendingData(texture);\n      }\n\n      if (url === originalUrl) {\n        if (onLoadObserver) {\n          texture.onLoadedObservable.remove(onLoadObserver);\n        }\n\n        if (_engineStore.EngineStore.UseFallbackTexture) {\n          this._createTextureBase(_engineStore.EngineStore.FallbackTexture, noMipmap, texture.invertY, scene, samplingMode, null, onError, prepareTexture, prepareTextureProcessFunction, buffer, texture);\n        }\n\n        message = (message || \"Unknown error\") + (_engineStore.EngineStore.UseFallbackTexture ? \" - Fallback texture was used\" : \"\");\n        texture.onErrorObservable.notifyObservers({\n          message,\n          exception\n        });\n\n        if (onError) {\n          onError(message, exception);\n        }\n      } else {\n        // fall back to the original url if the transformed url fails to load\n        _logger.Logger.Warn(`Failed to load ${url}, falling back to ${originalUrl}`);\n\n        this._createTextureBase(originalUrl, noMipmap, texture.invertY, scene, samplingMode, onLoad, onError, prepareTexture, prepareTextureProcessFunction, buffer, texture, format, forcedExtension, mimeType, loaderOptions, useSRGBBuffer);\n      }\n    }; // processing for non-image formats\n\n\n    if (loader) {\n      const callback = data => {\n        loader.loadData(data, texture, (width, height, loadMipmap, isCompressed, done, loadFailed) => {\n          if (loadFailed) {\n            onInternalError(\"TextureLoader failed to load data\");\n          } else {\n            prepareTexture(texture, extension, scene, {\n              width,\n              height\n            }, texture.invertY, !loadMipmap, isCompressed, () => {\n              done();\n              return false;\n            }, samplingMode);\n          }\n        }, loaderOptions);\n      };\n\n      if (!buffer) {\n        this._loadFile(url, data => callback(new Uint8Array(data)), undefined, scene ? scene.offlineProvider : undefined, true, (request, exception) => {\n          onInternalError(\"Unable to load \" + (request ? request.responseURL : url, exception));\n        });\n      } else {\n        if (buffer instanceof ArrayBuffer) {\n          callback(new Uint8Array(buffer));\n        } else if (ArrayBuffer.isView(buffer)) {\n          callback(buffer);\n        } else {\n          if (onError) {\n            onError(\"Unable to load: only ArrayBuffer or ArrayBufferView is supported\", null);\n          }\n        }\n      }\n    } else {\n      const onload = img => {\n        if (fromBlob && !this._doNotHandleContextLost) {\n          // We need to store the image if we need to rebuild the texture\n          // in case of a webgl context lost\n          texture._buffer = img;\n        }\n\n        prepareTexture(texture, extension, scene, img, texture.invertY, noMipmap, false, prepareTextureProcessFunction, samplingMode);\n      }; // According to the WebGL spec section 6.10, ImageBitmaps must be inverted on creation.\n      // So, we pass imageOrientation to _FileToolsLoadImage() as it may create an ImageBitmap.\n\n\n      if (!fromData || isBase64) {\n        if (buffer && (typeof buffer.decoding === \"string\" || buffer.close)) {\n          onload(buffer);\n        } else {\n          ThinEngine._FileToolsLoadImage(url, onload, onInternalError, scene ? scene.offlineProvider : null, mimeType, texture.invertY && this._features.needsInvertingBitmap ? {\n            imageOrientation: \"flipY\"\n          } : undefined);\n        }\n      } else if (typeof buffer === \"string\" || buffer instanceof ArrayBuffer || ArrayBuffer.isView(buffer) || buffer instanceof Blob) {\n        ThinEngine._FileToolsLoadImage(buffer, onload, onInternalError, scene ? scene.offlineProvider : null, mimeType, texture.invertY && this._features.needsInvertingBitmap ? {\n          imageOrientation: \"flipY\"\n        } : undefined);\n      } else if (buffer) {\n        onload(buffer);\n      }\n    }\n\n    return texture;\n  }\n  /**\n   * Usually called from Texture.ts.\n   * Passed information to create a WebGLTexture\n   * @param url defines a value which contains one of the following:\n   * * A conventional http URL, e.g. 'http://...' or 'file://...'\n   * * A base64 string of in-line texture data, e.g. 'data:image/jpg;base64,/...'\n   * * An indicator that data being passed using the buffer parameter, e.g. 'data:mytexture.jpg'\n   * @param noMipmap defines a boolean indicating that no mipmaps shall be generated.  Ignored for compressed textures.  They must be in the file\n   * @param invertY when true, image is flipped when loaded.  You probably want true. Certain compressed textures may invert this if their default is inverted (eg. ktx)\n   * @param scene needed for loading to the correct scene\n   * @param samplingMode mode with should be used sample / access the texture (Default: Texture.TRILINEAR_SAMPLINGMODE)\n   * @param onLoad optional callback to be called upon successful completion\n   * @param onError optional callback to be called upon failure\n   * @param buffer a source of a file previously fetched as either a base64 string, an ArrayBuffer (compressed or image format), HTMLImageElement (image format), or a Blob\n   * @param fallback an internal argument in case the function must be called again, due to etc1 not having alpha capabilities\n   * @param format internal format.  Default: RGB when extension is '.jpg' else RGBA.  Ignored for compressed textures\n   * @param forcedExtension defines the extension to use to pick the right loader\n   * @param mimeType defines an optional mime type\n   * @param loaderOptions options to be passed to the loader\n   * @param creationFlags specific flags to use when creating the texture (1 for storage textures, for eg)\n   * @param useSRGBBuffer defines if the texture must be loaded in a sRGB GPU buffer (if supported by the GPU).\n   * @returns a InternalTexture for assignment back into BABYLON.Texture\n   */\n\n\n  createTexture(url, noMipmap, invertY, scene, samplingMode = 3, onLoad = null, onError = null, buffer = null, fallback = null, format = null, forcedExtension = null, mimeType, loaderOptions, creationFlags, useSRGBBuffer) {\n    return this._createTextureBase(url, noMipmap, invertY, scene, samplingMode, onLoad, onError, this._prepareWebGLTexture.bind(this), (potWidth, potHeight, img, extension, texture, continuationCallback) => {\n      const gl = this._gl;\n      const isPot = img.width === potWidth && img.height === potHeight;\n      const internalFormat = format ? this._getInternalFormat(format, texture._useSRGBBuffer) : extension === \".jpg\" && !texture._useSRGBBuffer ? gl.RGB : texture._useSRGBBuffer ? this._glSRGBExtensionValues.SRGB8_ALPHA8 : gl.RGBA;\n      let texelFormat = format ? this._getInternalFormat(format) : extension === \".jpg\" && !texture._useSRGBBuffer ? gl.RGB : gl.RGBA;\n\n      if (texture._useSRGBBuffer && this.webGLVersion === 1) {\n        texelFormat = internalFormat;\n      }\n\n      if (isPot) {\n        gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, texelFormat, gl.UNSIGNED_BYTE, img);\n        return false;\n      }\n\n      const maxTextureSize = this._caps.maxTextureSize;\n\n      if (img.width > maxTextureSize || img.height > maxTextureSize || !this._supportsHardwareTextureRescaling) {\n        this._prepareWorkingCanvas();\n\n        if (!this._workingCanvas || !this._workingContext) {\n          return false;\n        }\n\n        this._workingCanvas.width = potWidth;\n        this._workingCanvas.height = potHeight;\n\n        this._workingContext.drawImage(img, 0, 0, img.width, img.height, 0, 0, potWidth, potHeight);\n\n        gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, texelFormat, gl.UNSIGNED_BYTE, this._workingCanvas);\n        texture.width = potWidth;\n        texture.height = potHeight;\n        return false;\n      } else {\n        // Using shaders when possible to rescale because canvas.drawImage is lossy\n        const source = new _internalTexture.InternalTexture(this, _internalTexture.InternalTextureSource.Temp);\n\n        this._bindTextureDirectly(gl.TEXTURE_2D, source, true);\n\n        gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, texelFormat, gl.UNSIGNED_BYTE, img);\n\n        this._rescaleTexture(source, texture, scene, internalFormat, () => {\n          this._releaseTexture(source);\n\n          this._bindTextureDirectly(gl.TEXTURE_2D, texture, true);\n\n          continuationCallback();\n        });\n      }\n\n      return true;\n    }, buffer, fallback, format, forcedExtension, mimeType, loaderOptions, useSRGBBuffer);\n  }\n  /**\n   * Loads an image as an HTMLImageElement.\n   * @param input url string, ArrayBuffer, or Blob to load\n   * @param onLoad callback called when the image successfully loads\n   * @param onError callback called when the image fails to load\n   * @param offlineProvider offline provider for caching\n   * @param mimeType optional mime type\n   * @param imageBitmapOptions optional the options to use when creating an ImageBitmap\n   * @returns the HTMLImageElement of the loaded image\n   * @internal\n   */\n\n\n  static _FileToolsLoadImage(input, onLoad, onError, offlineProvider, mimeType, imageBitmapOptions) {\n    throw (0, _devTools._WarnImport)(\"FileTools\");\n  }\n  /**\n   * @internal\n   */\n\n\n  _rescaleTexture(source, destination, scene, internalFormat, onComplete) {}\n  /**\n   * Creates a raw texture\n   * @param data defines the data to store in the texture\n   * @param width defines the width of the texture\n   * @param height defines the height of the texture\n   * @param format defines the format of the data\n   * @param generateMipMaps defines if the engine should generate the mip levels\n   * @param invertY defines if data must be stored with Y axis inverted\n   * @param samplingMode defines the required sampling mode (Texture.NEAREST_SAMPLINGMODE by default)\n   * @param compression defines the compression used (null by default)\n   * @param type defines the type fo the data (Engine.TEXTURETYPE_UNSIGNED_INT by default)\n   * @param creationFlags specific flags to use when creating the texture (1 for storage textures, for eg)\n   * @param useSRGBBuffer defines if the texture must be loaded in a sRGB GPU buffer (if supported by the GPU).\n   * @returns the raw texture inside an InternalTexture\n   */\n\n\n  createRawTexture(data, width, height, format, generateMipMaps, invertY, samplingMode, compression = null, type = 0, creationFlags = 0, useSRGBBuffer = false) {\n    throw (0, _devTools._WarnImport)(\"Engine.RawTexture\");\n  }\n  /**\n   * Creates a new raw cube texture\n   * @param data defines the array of data to use to create each face\n   * @param size defines the size of the textures\n   * @param format defines the format of the data\n   * @param type defines the type of the data (like Engine.TEXTURETYPE_UNSIGNED_INT)\n   * @param generateMipMaps  defines if the engine should generate the mip levels\n   * @param invertY defines if data must be stored with Y axis inverted\n   * @param samplingMode defines the required sampling mode (like Texture.NEAREST_SAMPLINGMODE)\n   * @param compression defines the compression used (null by default)\n   * @returns the cube texture as an InternalTexture\n   */\n\n\n  createRawCubeTexture(data, size, format, type, generateMipMaps, invertY, samplingMode, compression = null) {\n    throw (0, _devTools._WarnImport)(\"Engine.RawTexture\");\n  }\n  /**\n   * Creates a new raw 3D texture\n   * @param data defines the data used to create the texture\n   * @param width defines the width of the texture\n   * @param height defines the height of the texture\n   * @param depth defines the depth of the texture\n   * @param format defines the format of the texture\n   * @param generateMipMaps defines if the engine must generate mip levels\n   * @param invertY defines if data must be stored with Y axis inverted\n   * @param samplingMode defines the required sampling mode (like Texture.NEAREST_SAMPLINGMODE)\n   * @param compression defines the compressed used (can be null)\n   * @param textureType defines the compressed used (can be null)\n   * @returns a new raw 3D texture (stored in an InternalTexture)\n   */\n\n\n  createRawTexture3D(data, width, height, depth, format, generateMipMaps, invertY, samplingMode, compression = null, textureType = 0) {\n    throw (0, _devTools._WarnImport)(\"Engine.RawTexture\");\n  }\n  /**\n   * Creates a new raw 2D array texture\n   * @param data defines the data used to create the texture\n   * @param width defines the width of the texture\n   * @param height defines the height of the texture\n   * @param depth defines the number of layers of the texture\n   * @param format defines the format of the texture\n   * @param generateMipMaps defines if the engine must generate mip levels\n   * @param invertY defines if data must be stored with Y axis inverted\n   * @param samplingMode defines the required sampling mode (like Texture.NEAREST_SAMPLINGMODE)\n   * @param compression defines the compressed used (can be null)\n   * @param textureType defines the compressed used (can be null)\n   * @returns a new raw 2D array texture (stored in an InternalTexture)\n   */\n\n\n  createRawTexture2DArray(data, width, height, depth, format, generateMipMaps, invertY, samplingMode, compression = null, textureType = 0) {\n    throw (0, _devTools._WarnImport)(\"Engine.RawTexture\");\n  }\n  /**\n   * @internal\n   */\n\n\n  _unpackFlipY(value) {\n    if (this._unpackFlipYCached !== value) {\n      this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL, value ? 1 : 0);\n\n      if (this.enableUnpackFlipYCached) {\n        this._unpackFlipYCached = value;\n      }\n    }\n  }\n  /** @internal */\n\n\n  _getUnpackAlignement() {\n    return this._gl.getParameter(this._gl.UNPACK_ALIGNMENT);\n  }\n\n  _getTextureTarget(texture) {\n    if (texture.isCube) {\n      return this._gl.TEXTURE_CUBE_MAP;\n    } else if (texture.is3D) {\n      return this._gl.TEXTURE_3D;\n    } else if (texture.is2DArray || texture.isMultiview) {\n      return this._gl.TEXTURE_2D_ARRAY;\n    }\n\n    return this._gl.TEXTURE_2D;\n  }\n  /**\n   * Update the sampling mode of a given texture\n   * @param samplingMode defines the required sampling mode\n   * @param texture defines the texture to update\n   * @param generateMipMaps defines whether to generate mipmaps for the texture\n   */\n\n\n  updateTextureSamplingMode(samplingMode, texture, generateMipMaps = false) {\n    const target = this._getTextureTarget(texture);\n\n    const filters = this._getSamplingParameters(samplingMode, texture.useMipMaps || generateMipMaps);\n\n    this._setTextureParameterInteger(target, this._gl.TEXTURE_MAG_FILTER, filters.mag, texture);\n\n    this._setTextureParameterInteger(target, this._gl.TEXTURE_MIN_FILTER, filters.min);\n\n    if (generateMipMaps) {\n      texture.generateMipMaps = true;\n\n      this._gl.generateMipmap(target);\n    }\n\n    this._bindTextureDirectly(target, null);\n\n    texture.samplingMode = samplingMode;\n  }\n  /**\n   * Update the dimensions of a texture\n   * @param texture texture to update\n   * @param width new width of the texture\n   * @param height new height of the texture\n   * @param depth new depth of the texture\n   */\n\n\n  updateTextureDimensions(texture, width, height, depth = 1) {}\n  /**\n   * Update the sampling mode of a given texture\n   * @param texture defines the texture to update\n   * @param wrapU defines the texture wrap mode of the u coordinates\n   * @param wrapV defines the texture wrap mode of the v coordinates\n   * @param wrapR defines the texture wrap mode of the r coordinates\n   */\n\n\n  updateTextureWrappingMode(texture, wrapU, wrapV = null, wrapR = null) {\n    const target = this._getTextureTarget(texture);\n\n    if (wrapU !== null) {\n      this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_S, this._getTextureWrapMode(wrapU), texture);\n\n      texture._cachedWrapU = wrapU;\n    }\n\n    if (wrapV !== null) {\n      this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_T, this._getTextureWrapMode(wrapV), texture);\n\n      texture._cachedWrapV = wrapV;\n    }\n\n    if ((texture.is2DArray || texture.is3D) && wrapR !== null) {\n      this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_R, this._getTextureWrapMode(wrapR), texture);\n\n      texture._cachedWrapR = wrapR;\n    }\n\n    this._bindTextureDirectly(target, null);\n  }\n  /**\n   * @internal\n   */\n\n\n  _setupDepthStencilTexture(internalTexture, size, generateStencil, bilinearFiltering, comparisonFunction, samples = 1) {\n    const width = size.width || size;\n    const height = size.height || size;\n    const layers = size.layers || 0;\n    internalTexture.baseWidth = width;\n    internalTexture.baseHeight = height;\n    internalTexture.width = width;\n    internalTexture.height = height;\n    internalTexture.is2DArray = layers > 0;\n    internalTexture.depth = layers;\n    internalTexture.isReady = true;\n    internalTexture.samples = samples;\n    internalTexture.generateMipMaps = false;\n    internalTexture.samplingMode = bilinearFiltering ? 2 : 1;\n    internalTexture.type = 0;\n    internalTexture._comparisonFunction = comparisonFunction;\n    const gl = this._gl;\n\n    const target = this._getTextureTarget(internalTexture);\n\n    const samplingParameters = this._getSamplingParameters(internalTexture.samplingMode, false);\n\n    gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, samplingParameters.mag);\n    gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, samplingParameters.min);\n    gl.texParameteri(target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE); // TEXTURE_COMPARE_FUNC/MODE are only availble in WebGL2.\n\n    if (this.webGLVersion > 1) {\n      if (comparisonFunction === 0) {\n        gl.texParameteri(target, gl.TEXTURE_COMPARE_FUNC, 515);\n        gl.texParameteri(target, gl.TEXTURE_COMPARE_MODE, gl.NONE);\n      } else {\n        gl.texParameteri(target, gl.TEXTURE_COMPARE_FUNC, comparisonFunction);\n        gl.texParameteri(target, gl.TEXTURE_COMPARE_MODE, gl.COMPARE_REF_TO_TEXTURE);\n      }\n    }\n  }\n  /**\n   * @internal\n   */\n\n\n  _uploadCompressedDataToTextureDirectly(texture, internalFormat, width, height, data, faceIndex = 0, lod = 0) {\n    const gl = this._gl;\n    let target = gl.TEXTURE_2D;\n\n    if (texture.isCube) {\n      target = gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex;\n    }\n\n    if (texture._useSRGBBuffer) {\n      switch (internalFormat) {\n        case 37492:\n        case 36196:\n          // Note, if using ETC1 and sRGB is requested, this will use ETC2 if available.\n          if (this._caps.etc2) {\n            internalFormat = gl.COMPRESSED_SRGB8_ETC2;\n          } else {\n            texture._useSRGBBuffer = false;\n          }\n\n          break;\n\n        case 37496:\n          if (this._caps.etc2) {\n            internalFormat = gl.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC;\n          } else {\n            texture._useSRGBBuffer = false;\n          }\n\n          break;\n\n        case 36492:\n          internalFormat = gl.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT;\n          break;\n\n        case 37808:\n          internalFormat = gl.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR;\n          break;\n\n        case 33776:\n          if (this._caps.s3tc_srgb) {\n            internalFormat = gl.COMPRESSED_SRGB_S3TC_DXT1_EXT;\n          } else {\n            // S3TC sRGB extension not supported\n            texture._useSRGBBuffer = false;\n          }\n\n          break;\n\n        case 33777:\n          if (this._caps.s3tc_srgb) {\n            internalFormat = gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;\n          } else {\n            // S3TC sRGB extension not supported\n            texture._useSRGBBuffer = false;\n          }\n\n          break;\n\n        case 33779:\n          if (this._caps.s3tc_srgb) {\n            internalFormat = gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;\n          } else {\n            // S3TC sRGB extension not supported\n            texture._useSRGBBuffer = false;\n          }\n\n          break;\n\n        default:\n          // We don't support a sRGB format corresponding to internalFormat, so revert to non sRGB format\n          texture._useSRGBBuffer = false;\n          break;\n      }\n    }\n\n    this._gl.compressedTexImage2D(target, lod, internalFormat, width, height, 0, data);\n  }\n  /**\n   * @internal\n   */\n\n\n  _uploadDataToTextureDirectly(texture, imageData, faceIndex = 0, lod = 0, babylonInternalFormat, useTextureWidthAndHeight = false) {\n    const gl = this._gl;\n\n    const textureType = this._getWebGLTextureType(texture.type);\n\n    const format = this._getInternalFormat(texture.format);\n\n    const internalFormat = babylonInternalFormat === undefined ? this._getRGBABufferInternalSizedFormat(texture.type, texture.format, texture._useSRGBBuffer) : this._getInternalFormat(babylonInternalFormat, texture._useSRGBBuffer);\n\n    this._unpackFlipY(texture.invertY);\n\n    let target = gl.TEXTURE_2D;\n\n    if (texture.isCube) {\n      target = gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex;\n    }\n\n    const lodMaxWidth = Math.round(Math.log(texture.width) * Math.LOG2E);\n    const lodMaxHeight = Math.round(Math.log(texture.height) * Math.LOG2E);\n    const width = useTextureWidthAndHeight ? texture.width : Math.pow(2, Math.max(lodMaxWidth - lod, 0));\n    const height = useTextureWidthAndHeight ? texture.height : Math.pow(2, Math.max(lodMaxHeight - lod, 0));\n    gl.texImage2D(target, lod, internalFormat, width, height, 0, format, textureType, imageData);\n  }\n  /**\n   * Update a portion of an internal texture\n   * @param texture defines the texture to update\n   * @param imageData defines the data to store into the texture\n   * @param xOffset defines the x coordinates of the update rectangle\n   * @param yOffset defines the y coordinates of the update rectangle\n   * @param width defines the width of the update rectangle\n   * @param height defines the height of the update rectangle\n   * @param faceIndex defines the face index if texture is a cube (0 by default)\n   * @param lod defines the lod level to update (0 by default)\n   * @param generateMipMaps defines whether to generate mipmaps or not\n   */\n\n\n  updateTextureData(texture, imageData, xOffset, yOffset, width, height, faceIndex = 0, lod = 0, generateMipMaps = false) {\n    const gl = this._gl;\n\n    const textureType = this._getWebGLTextureType(texture.type);\n\n    const format = this._getInternalFormat(texture.format);\n\n    this._unpackFlipY(texture.invertY);\n\n    let targetForBinding = gl.TEXTURE_2D;\n    let target = gl.TEXTURE_2D;\n\n    if (texture.isCube) {\n      target = gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex;\n      targetForBinding = gl.TEXTURE_CUBE_MAP;\n    }\n\n    this._bindTextureDirectly(targetForBinding, texture, true);\n\n    gl.texSubImage2D(target, lod, xOffset, yOffset, width, height, format, textureType, imageData);\n\n    if (generateMipMaps) {\n      this._gl.generateMipmap(target);\n    }\n\n    this._bindTextureDirectly(targetForBinding, null);\n  }\n  /**\n   * @internal\n   */\n\n\n  _uploadArrayBufferViewToTexture(texture, imageData, faceIndex = 0, lod = 0) {\n    const gl = this._gl;\n    const bindTarget = texture.isCube ? gl.TEXTURE_CUBE_MAP : gl.TEXTURE_2D;\n\n    this._bindTextureDirectly(bindTarget, texture, true);\n\n    this._uploadDataToTextureDirectly(texture, imageData, faceIndex, lod);\n\n    this._bindTextureDirectly(bindTarget, null, true);\n  }\n\n  _prepareWebGLTextureContinuation(texture, scene, noMipmap, isCompressed, samplingMode) {\n    const gl = this._gl;\n\n    if (!gl) {\n      return;\n    }\n\n    const filters = this._getSamplingParameters(samplingMode, !noMipmap);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filters.mag);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filters.min);\n\n    if (!noMipmap && !isCompressed) {\n      gl.generateMipmap(gl.TEXTURE_2D);\n    }\n\n    this._bindTextureDirectly(gl.TEXTURE_2D, null); // this.resetTextureCache();\n\n\n    if (scene) {\n      scene.removePendingData(texture);\n    }\n\n    texture.onLoadedObservable.notifyObservers(texture);\n    texture.onLoadedObservable.clear();\n  }\n\n  _prepareWebGLTexture(texture, extension, scene, img, invertY, noMipmap, isCompressed, processFunction, samplingMode = 3) {\n    const maxTextureSize = this.getCaps().maxTextureSize;\n    const potWidth = Math.min(maxTextureSize, this.needPOTTextures ? ThinEngine.GetExponentOfTwo(img.width, maxTextureSize) : img.width);\n    const potHeight = Math.min(maxTextureSize, this.needPOTTextures ? ThinEngine.GetExponentOfTwo(img.height, maxTextureSize) : img.height);\n    const gl = this._gl;\n\n    if (!gl) {\n      return;\n    }\n\n    if (!texture._hardwareTexture) {\n      //  this.resetTextureCache();\n      if (scene) {\n        scene.removePendingData(texture);\n      }\n\n      return;\n    }\n\n    this._bindTextureDirectly(gl.TEXTURE_2D, texture, true);\n\n    this._unpackFlipY(invertY === undefined ? true : invertY ? true : false);\n\n    texture.baseWidth = img.width;\n    texture.baseHeight = img.height;\n    texture.width = potWidth;\n    texture.height = potHeight;\n    texture.isReady = true;\n\n    if (processFunction(potWidth, potHeight, img, extension, texture, () => {\n      this._prepareWebGLTextureContinuation(texture, scene, noMipmap, isCompressed, samplingMode);\n    })) {\n      // Returning as texture needs extra async steps\n      return;\n    }\n\n    this._prepareWebGLTextureContinuation(texture, scene, noMipmap, isCompressed, samplingMode);\n  }\n  /**\n   * @internal\n   */\n\n\n  _setupFramebufferDepthAttachments(generateStencilBuffer, generateDepthBuffer, width, height, samples = 1) {\n    const gl = this._gl; // Create the depth/stencil buffer\n\n    if (generateStencilBuffer && generateDepthBuffer) {\n      return this._createRenderBuffer(width, height, samples, gl.DEPTH_STENCIL, gl.DEPTH24_STENCIL8, gl.DEPTH_STENCIL_ATTACHMENT);\n    }\n\n    if (generateDepthBuffer) {\n      let depthFormat = gl.DEPTH_COMPONENT16;\n\n      if (this._webGLVersion > 1) {\n        depthFormat = gl.DEPTH_COMPONENT32F;\n      }\n\n      return this._createRenderBuffer(width, height, samples, depthFormat, depthFormat, gl.DEPTH_ATTACHMENT);\n    }\n\n    if (generateStencilBuffer) {\n      return this._createRenderBuffer(width, height, samples, gl.STENCIL_INDEX8, gl.STENCIL_INDEX8, gl.STENCIL_ATTACHMENT);\n    }\n\n    return null;\n  }\n  /**\n   * @internal\n   */\n\n\n  _createRenderBuffer(width, height, samples, internalFormat, msInternalFormat, attachment, unbindBuffer = true) {\n    const gl = this._gl;\n    const renderBuffer = gl.createRenderbuffer();\n    return this._updateRenderBuffer(renderBuffer, width, height, samples, internalFormat, msInternalFormat, attachment, unbindBuffer);\n  }\n\n  _updateRenderBuffer(renderBuffer, width, height, samples, internalFormat, msInternalFormat, attachment, unbindBuffer = true) {\n    const gl = this._gl;\n    gl.bindRenderbuffer(gl.RENDERBUFFER, renderBuffer);\n\n    if (samples > 1 && gl.renderbufferStorageMultisample) {\n      gl.renderbufferStorageMultisample(gl.RENDERBUFFER, samples, msInternalFormat, width, height);\n    } else {\n      gl.renderbufferStorage(gl.RENDERBUFFER, internalFormat, width, height);\n    }\n\n    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachment, gl.RENDERBUFFER, renderBuffer);\n\n    if (unbindBuffer) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n    }\n\n    return renderBuffer;\n  }\n  /**\n   * @internal\n   */\n\n\n  _releaseTexture(texture) {\n    var _a;\n\n    this._deleteTexture((_a = texture._hardwareTexture) === null || _a === void 0 ? void 0 : _a.underlyingResource); // Unbind channels\n\n\n    this.unbindAllTextures();\n\n    const index = this._internalTexturesCache.indexOf(texture);\n\n    if (index !== -1) {\n      this._internalTexturesCache.splice(index, 1);\n    } // Integrated fixed lod samplers.\n\n\n    if (texture._lodTextureHigh) {\n      texture._lodTextureHigh.dispose();\n    }\n\n    if (texture._lodTextureMid) {\n      texture._lodTextureMid.dispose();\n    }\n\n    if (texture._lodTextureLow) {\n      texture._lodTextureLow.dispose();\n    } // Integrated irradiance map.\n\n\n    if (texture._irradianceTexture) {\n      texture._irradianceTexture.dispose();\n    }\n  }\n  /**\n   * @internal\n   */\n\n\n  _releaseRenderTargetWrapper(rtWrapper) {\n    const index = this._renderTargetWrapperCache.indexOf(rtWrapper);\n\n    if (index !== -1) {\n      this._renderTargetWrapperCache.splice(index, 1);\n    }\n  }\n\n  _deleteTexture(texture) {\n    if (texture) {\n      this._gl.deleteTexture(texture);\n    }\n  }\n\n  _setProgram(program) {\n    if (this._currentProgram !== program) {\n      this._gl.useProgram(program);\n\n      this._currentProgram = program;\n    }\n  }\n  /**\n   * Binds an effect to the webGL context\n   * @param effect defines the effect to bind\n   */\n\n\n  bindSamplers(effect) {\n    const webGLPipelineContext = effect.getPipelineContext();\n\n    this._setProgram(webGLPipelineContext.program);\n\n    const samplers = effect.getSamplers();\n\n    for (let index = 0; index < samplers.length; index++) {\n      const uniform = effect.getUniform(samplers[index]);\n\n      if (uniform) {\n        this._boundUniforms[index] = uniform;\n      }\n    }\n\n    this._currentEffect = null;\n  }\n\n  _activateCurrentTexture() {\n    if (this._currentTextureChannel !== this._activeChannel) {\n      this._gl.activeTexture(this._gl.TEXTURE0 + this._activeChannel);\n\n      this._currentTextureChannel = this._activeChannel;\n    }\n  }\n  /**\n   * @internal\n   */\n\n\n  _bindTextureDirectly(target, texture, forTextureDataUpdate = false, force = false) {\n    var _a, _b;\n\n    let wasPreviouslyBound = false;\n    const isTextureForRendering = texture && texture._associatedChannel > -1;\n\n    if (forTextureDataUpdate && isTextureForRendering) {\n      this._activeChannel = texture._associatedChannel;\n    }\n\n    const currentTextureBound = this._boundTexturesCache[this._activeChannel];\n\n    if (currentTextureBound !== texture || force) {\n      this._activateCurrentTexture();\n\n      if (texture && texture.isMultiview) {\n        //this._gl.bindTexture(target, texture ? texture._colorTextureArray : null);\n        console.error(target, texture);\n        throw \"_bindTextureDirectly called with a multiview texture!\";\n      } else {\n        this._gl.bindTexture(target, (_b = (_a = texture === null || texture === void 0 ? void 0 : texture._hardwareTexture) === null || _a === void 0 ? void 0 : _a.underlyingResource) !== null && _b !== void 0 ? _b : null);\n      }\n\n      this._boundTexturesCache[this._activeChannel] = texture;\n\n      if (texture) {\n        texture._associatedChannel = this._activeChannel;\n      }\n    } else if (forTextureDataUpdate) {\n      wasPreviouslyBound = true;\n\n      this._activateCurrentTexture();\n    }\n\n    if (isTextureForRendering && !forTextureDataUpdate) {\n      this._bindSamplerUniformToChannel(texture._associatedChannel, this._activeChannel);\n    }\n\n    return wasPreviouslyBound;\n  }\n  /**\n   * @internal\n   */\n\n\n  _bindTexture(channel, texture, name) {\n    if (channel === undefined) {\n      return;\n    }\n\n    if (texture) {\n      texture._associatedChannel = channel;\n    }\n\n    this._activeChannel = channel;\n    const target = texture ? this._getTextureTarget(texture) : this._gl.TEXTURE_2D;\n\n    this._bindTextureDirectly(target, texture);\n  }\n  /**\n   * Unbind all textures from the webGL context\n   */\n\n\n  unbindAllTextures() {\n    for (let channel = 0; channel < this._maxSimultaneousTextures; channel++) {\n      this._activeChannel = channel;\n\n      this._bindTextureDirectly(this._gl.TEXTURE_2D, null);\n\n      this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, null);\n\n      if (this.webGLVersion > 1) {\n        this._bindTextureDirectly(this._gl.TEXTURE_3D, null);\n\n        this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY, null);\n      }\n    }\n  }\n  /**\n   * Sets a texture to the according uniform.\n   * @param channel The texture channel\n   * @param uniform The uniform to set\n   * @param texture The texture to apply\n   * @param name The name of the uniform in the effect\n   */\n\n\n  setTexture(channel, uniform, texture, name) {\n    if (channel === undefined) {\n      return;\n    }\n\n    if (uniform) {\n      this._boundUniforms[channel] = uniform;\n    }\n\n    this._setTexture(channel, texture);\n  }\n\n  _bindSamplerUniformToChannel(sourceSlot, destination) {\n    const uniform = this._boundUniforms[sourceSlot];\n\n    if (!uniform || uniform._currentState === destination) {\n      return;\n    }\n\n    this._gl.uniform1i(uniform, destination);\n\n    uniform._currentState = destination;\n  }\n\n  _getTextureWrapMode(mode) {\n    switch (mode) {\n      case 1:\n        return this._gl.REPEAT;\n\n      case 0:\n        return this._gl.CLAMP_TO_EDGE;\n\n      case 2:\n        return this._gl.MIRRORED_REPEAT;\n    }\n\n    return this._gl.REPEAT;\n  }\n\n  _setTexture(channel, texture, isPartOfTextureArray = false, depthStencilTexture = false, name = \"\") {\n    // Not ready?\n    if (!texture) {\n      if (this._boundTexturesCache[channel] != null) {\n        this._activeChannel = channel;\n\n        this._bindTextureDirectly(this._gl.TEXTURE_2D, null);\n\n        this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, null);\n\n        if (this.webGLVersion > 1) {\n          this._bindTextureDirectly(this._gl.TEXTURE_3D, null);\n\n          this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY, null);\n        }\n      }\n\n      return false;\n    } // Video\n\n\n    if (texture.video) {\n      this._activeChannel = channel;\n      const videoInternalTexture = texture.getInternalTexture();\n\n      if (videoInternalTexture) {\n        videoInternalTexture._associatedChannel = channel;\n      }\n\n      texture.update();\n    } else if (texture.delayLoadState === 4) {\n      // Delay loading\n      texture.delayLoad();\n      return false;\n    }\n\n    let internalTexture;\n\n    if (depthStencilTexture) {\n      internalTexture = texture.depthStencilTexture;\n    } else if (texture.isReady()) {\n      internalTexture = texture.getInternalTexture();\n    } else if (texture.isCube) {\n      internalTexture = this.emptyCubeTexture;\n    } else if (texture.is3D) {\n      internalTexture = this.emptyTexture3D;\n    } else if (texture.is2DArray) {\n      internalTexture = this.emptyTexture2DArray;\n    } else {\n      internalTexture = this.emptyTexture;\n    }\n\n    if (!isPartOfTextureArray && internalTexture) {\n      internalTexture._associatedChannel = channel;\n    }\n\n    let needToBind = true;\n\n    if (this._boundTexturesCache[channel] === internalTexture) {\n      if (!isPartOfTextureArray) {\n        this._bindSamplerUniformToChannel(internalTexture._associatedChannel, channel);\n      }\n\n      needToBind = false;\n    }\n\n    this._activeChannel = channel;\n\n    const target = this._getTextureTarget(internalTexture);\n\n    if (needToBind) {\n      this._bindTextureDirectly(target, internalTexture, isPartOfTextureArray);\n    }\n\n    if (internalTexture && !internalTexture.isMultiview) {\n      // CUBIC_MODE and SKYBOX_MODE both require CLAMP_TO_EDGE.  All other modes use REPEAT.\n      if (internalTexture.isCube && internalTexture._cachedCoordinatesMode !== texture.coordinatesMode) {\n        internalTexture._cachedCoordinatesMode = texture.coordinatesMode;\n        const textureWrapMode = texture.coordinatesMode !== 3 && texture.coordinatesMode !== 5 ? 1 : 0;\n        texture.wrapU = textureWrapMode;\n        texture.wrapV = textureWrapMode;\n      }\n\n      if (internalTexture._cachedWrapU !== texture.wrapU) {\n        internalTexture._cachedWrapU = texture.wrapU;\n\n        this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_S, this._getTextureWrapMode(texture.wrapU), internalTexture);\n      }\n\n      if (internalTexture._cachedWrapV !== texture.wrapV) {\n        internalTexture._cachedWrapV = texture.wrapV;\n\n        this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_T, this._getTextureWrapMode(texture.wrapV), internalTexture);\n      }\n\n      if (internalTexture.is3D && internalTexture._cachedWrapR !== texture.wrapR) {\n        internalTexture._cachedWrapR = texture.wrapR;\n\n        this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_R, this._getTextureWrapMode(texture.wrapR), internalTexture);\n      }\n\n      this._setAnisotropicLevel(target, internalTexture, texture.anisotropicFilteringLevel);\n    }\n\n    return true;\n  }\n  /**\n   * Sets an array of texture to the webGL context\n   * @param channel defines the channel where the texture array must be set\n   * @param uniform defines the associated uniform location\n   * @param textures defines the array of textures to bind\n   * @param name name of the channel\n   */\n\n\n  setTextureArray(channel, uniform, textures, name) {\n    if (channel === undefined || !uniform) {\n      return;\n    }\n\n    if (!this._textureUnits || this._textureUnits.length !== textures.length) {\n      this._textureUnits = new Int32Array(textures.length);\n    }\n\n    for (let i = 0; i < textures.length; i++) {\n      const texture = textures[i].getInternalTexture();\n\n      if (texture) {\n        this._textureUnits[i] = channel + i;\n        texture._associatedChannel = channel + i;\n      } else {\n        this._textureUnits[i] = -1;\n      }\n    }\n\n    this._gl.uniform1iv(uniform, this._textureUnits);\n\n    for (let index = 0; index < textures.length; index++) {\n      this._setTexture(this._textureUnits[index], textures[index], true);\n    }\n  }\n  /**\n   * @internal\n   */\n\n\n  _setAnisotropicLevel(target, internalTexture, anisotropicFilteringLevel) {\n    const anisotropicFilterExtension = this._caps.textureAnisotropicFilterExtension;\n\n    if (internalTexture.samplingMode !== 11 && internalTexture.samplingMode !== 3 && internalTexture.samplingMode !== 2) {\n      anisotropicFilteringLevel = 1; // Forcing the anisotropic to 1 because else webgl will force filters to linear\n    }\n\n    if (anisotropicFilterExtension && internalTexture._cachedAnisotropicFilteringLevel !== anisotropicFilteringLevel) {\n      this._setTextureParameterFloat(target, anisotropicFilterExtension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(anisotropicFilteringLevel, this._caps.maxAnisotropy), internalTexture);\n\n      internalTexture._cachedAnisotropicFilteringLevel = anisotropicFilteringLevel;\n    }\n  }\n\n  _setTextureParameterFloat(target, parameter, value, texture) {\n    this._bindTextureDirectly(target, texture, true, true);\n\n    this._gl.texParameterf(target, parameter, value);\n  }\n\n  _setTextureParameterInteger(target, parameter, value, texture) {\n    if (texture) {\n      this._bindTextureDirectly(target, texture, true, true);\n    }\n\n    this._gl.texParameteri(target, parameter, value);\n  }\n  /**\n   * Unbind all vertex attributes from the webGL context\n   */\n\n\n  unbindAllAttributes() {\n    if (this._mustWipeVertexAttributes) {\n      this._mustWipeVertexAttributes = false;\n\n      for (let i = 0; i < this._caps.maxVertexAttribs; i++) {\n        this.disableAttributeByIndex(i);\n      }\n\n      return;\n    }\n\n    for (let i = 0, ul = this._vertexAttribArraysEnabled.length; i < ul; i++) {\n      if (i >= this._caps.maxVertexAttribs || !this._vertexAttribArraysEnabled[i]) {\n        continue;\n      }\n\n      this.disableAttributeByIndex(i);\n    }\n  }\n  /**\n   * Force the engine to release all cached effects. This means that next effect compilation will have to be done completely even if a similar effect was already compiled\n   */\n\n\n  releaseEffects() {\n    for (const name in this._compiledEffects) {\n      const webGLPipelineContext = this._compiledEffects[name].getPipelineContext();\n\n      this._deletePipelineContext(webGLPipelineContext);\n    }\n\n    this._compiledEffects = {};\n  }\n  /**\n   * Dispose and release all associated resources\n   */\n\n\n  dispose() {\n    var _a;\n\n    this._isDisposed = true;\n    this.stopRenderLoop(); // Clear observables\n\n    if (this.onBeforeTextureInitObservable) {\n      this.onBeforeTextureInitObservable.clear();\n    } // Empty texture\n\n\n    if (this._emptyTexture) {\n      this._releaseTexture(this._emptyTexture);\n\n      this._emptyTexture = null;\n    }\n\n    if (this._emptyCubeTexture) {\n      this._releaseTexture(this._emptyCubeTexture);\n\n      this._emptyCubeTexture = null;\n    }\n\n    if (this._dummyFramebuffer) {\n      this._gl.deleteFramebuffer(this._dummyFramebuffer);\n    } // Release effects\n\n\n    this.releaseEffects();\n    (_a = this.releaseComputeEffects) === null || _a === void 0 ? void 0 : _a.call(this); // Unbind\n\n    this.unbindAllAttributes();\n    this._boundUniforms = {}; // Events\n\n    if ((0, _domManagement.IsWindowObjectExist)()) {\n      if (this._renderingCanvas) {\n        if (!this._doNotHandleContextLost) {\n          this._renderingCanvas.removeEventListener(\"webglcontextlost\", this._onContextLost);\n\n          this._renderingCanvas.removeEventListener(\"webglcontextrestored\", this._onContextRestored);\n        }\n\n        window.removeEventListener(\"resize\", this._checkForMobile);\n      }\n    }\n\n    this._workingCanvas = null;\n    this._workingContext = null;\n    this._currentBufferPointers.length = 0;\n    this._renderingCanvas = null;\n    this._currentProgram = null;\n    this._boundRenderFunction = null;\n\n    _effect.Effect.ResetCache(); // Abort active requests\n\n\n    for (const request of this._activeRequests) {\n      request.abort();\n    }\n\n    this.onDisposeObservable.notifyObservers(this);\n    this.onDisposeObservable.clear();\n  }\n  /**\n   * Attach a new callback raised when context lost event is fired\n   * @param callback defines the callback to call\n   */\n\n\n  attachContextLostEvent(callback) {\n    if (this._renderingCanvas) {\n      this._renderingCanvas.addEventListener(\"webglcontextlost\", callback, false);\n    }\n  }\n  /**\n   * Attach a new callback raised when context restored event is fired\n   * @param callback defines the callback to call\n   */\n\n\n  attachContextRestoredEvent(callback) {\n    if (this._renderingCanvas) {\n      this._renderingCanvas.addEventListener(\"webglcontextrestored\", callback, false);\n    }\n  }\n  /**\n   * Get the current error code of the webGL context\n   * @returns the error code\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/getError\n   */\n\n\n  getError() {\n    return this._gl.getError();\n  }\n\n  _canRenderToFloatFramebuffer() {\n    if (this._webGLVersion > 1) {\n      return this._caps.colorBufferFloat;\n    }\n\n    return this._canRenderToFramebuffer(1);\n  }\n\n  _canRenderToHalfFloatFramebuffer() {\n    if (this._webGLVersion > 1) {\n      return this._caps.colorBufferFloat;\n    }\n\n    return this._canRenderToFramebuffer(2);\n  } // Thank you : http://stackoverflow.com/questions/28827511/webgl-ios-render-to-floating-point-texture\n\n\n  _canRenderToFramebuffer(type) {\n    const gl = this._gl; //clear existing errors\n    // eslint-disable-next-line no-empty\n\n    while (gl.getError() !== gl.NO_ERROR) {}\n\n    let successful = true;\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texImage2D(gl.TEXTURE_2D, 0, this._getRGBABufferInternalSizedFormat(type), 1, 1, 0, gl.RGBA, this._getWebGLTextureType(type), null);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    const fb = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fb);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n    const status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n    successful = successful && status === gl.FRAMEBUFFER_COMPLETE;\n    successful = successful && gl.getError() === gl.NO_ERROR; //try render by clearing frame buffer's color buffer\n\n    if (successful) {\n      gl.clear(gl.COLOR_BUFFER_BIT);\n      successful = successful && gl.getError() === gl.NO_ERROR;\n    } //try reading from frame to ensure render occurs (just creating the FBO is not sufficient to determine if rendering is supported)\n\n\n    if (successful) {\n      //in practice it's sufficient to just read from the backbuffer rather than handle potentially issues reading from the texture\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n      const readFormat = gl.RGBA;\n      const readType = gl.UNSIGNED_BYTE;\n      const buffer = new Uint8Array(4);\n      gl.readPixels(0, 0, 1, 1, readFormat, readType, buffer);\n      successful = successful && gl.getError() === gl.NO_ERROR;\n    } //clean up\n\n\n    gl.deleteTexture(texture);\n    gl.deleteFramebuffer(fb);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null); //clear accumulated errors\n    // eslint-disable-next-line no-empty\n\n    while (!successful && gl.getError() !== gl.NO_ERROR) {}\n\n    return successful;\n  }\n  /**\n   * @internal\n   */\n\n\n  _getWebGLTextureType(type) {\n    if (this._webGLVersion === 1) {\n      switch (type) {\n        case 1:\n          return this._gl.FLOAT;\n\n        case 2:\n          return this._gl.HALF_FLOAT_OES;\n\n        case 0:\n          return this._gl.UNSIGNED_BYTE;\n\n        case 8:\n          return this._gl.UNSIGNED_SHORT_4_4_4_4;\n\n        case 9:\n          return this._gl.UNSIGNED_SHORT_5_5_5_1;\n\n        case 10:\n          return this._gl.UNSIGNED_SHORT_5_6_5;\n      }\n\n      return this._gl.UNSIGNED_BYTE;\n    }\n\n    switch (type) {\n      case 3:\n        return this._gl.BYTE;\n\n      case 0:\n        return this._gl.UNSIGNED_BYTE;\n\n      case 4:\n        return this._gl.SHORT;\n\n      case 5:\n        return this._gl.UNSIGNED_SHORT;\n\n      case 6:\n        return this._gl.INT;\n\n      case 7:\n        // Refers to UNSIGNED_INT\n        return this._gl.UNSIGNED_INT;\n\n      case 1:\n        return this._gl.FLOAT;\n\n      case 2:\n        return this._gl.HALF_FLOAT;\n\n      case 8:\n        return this._gl.UNSIGNED_SHORT_4_4_4_4;\n\n      case 9:\n        return this._gl.UNSIGNED_SHORT_5_5_5_1;\n\n      case 10:\n        return this._gl.UNSIGNED_SHORT_5_6_5;\n\n      case 11:\n        return this._gl.UNSIGNED_INT_2_10_10_10_REV;\n\n      case 12:\n        return this._gl.UNSIGNED_INT_24_8;\n\n      case 13:\n        return this._gl.UNSIGNED_INT_10F_11F_11F_REV;\n\n      case 14:\n        return this._gl.UNSIGNED_INT_5_9_9_9_REV;\n\n      case 15:\n        return this._gl.FLOAT_32_UNSIGNED_INT_24_8_REV;\n    }\n\n    return this._gl.UNSIGNED_BYTE;\n  }\n  /**\n   * @internal\n   */\n\n\n  _getInternalFormat(format, useSRGBBuffer = false) {\n    let internalFormat = useSRGBBuffer ? this._glSRGBExtensionValues.SRGB8_ALPHA8 : this._gl.RGBA;\n\n    switch (format) {\n      case 0:\n        internalFormat = this._gl.ALPHA;\n        break;\n\n      case 1:\n        internalFormat = this._gl.LUMINANCE;\n        break;\n\n      case 2:\n        internalFormat = this._gl.LUMINANCE_ALPHA;\n        break;\n\n      case 6:\n        internalFormat = this._gl.RED;\n        break;\n\n      case 7:\n        internalFormat = this._gl.RG;\n        break;\n\n      case 4:\n        internalFormat = useSRGBBuffer ? this._glSRGBExtensionValues.SRGB : this._gl.RGB;\n        break;\n\n      case 5:\n        internalFormat = useSRGBBuffer ? this._glSRGBExtensionValues.SRGB8_ALPHA8 : this._gl.RGBA;\n        break;\n    }\n\n    if (this._webGLVersion > 1) {\n      switch (format) {\n        case 8:\n          internalFormat = this._gl.RED_INTEGER;\n          break;\n\n        case 9:\n          internalFormat = this._gl.RG_INTEGER;\n          break;\n\n        case 10:\n          internalFormat = this._gl.RGB_INTEGER;\n          break;\n\n        case 11:\n          internalFormat = this._gl.RGBA_INTEGER;\n          break;\n      }\n    }\n\n    return internalFormat;\n  }\n  /**\n   * @internal\n   */\n\n\n  _getRGBABufferInternalSizedFormat(type, format, useSRGBBuffer = false) {\n    if (this._webGLVersion === 1) {\n      if (format !== undefined) {\n        switch (format) {\n          case 0:\n            return this._gl.ALPHA;\n\n          case 1:\n            return this._gl.LUMINANCE;\n\n          case 2:\n            return this._gl.LUMINANCE_ALPHA;\n\n          case 4:\n            return useSRGBBuffer ? this._glSRGBExtensionValues.SRGB : this._gl.RGB;\n        }\n      }\n\n      return this._gl.RGBA;\n    }\n\n    switch (type) {\n      case 3:\n        switch (format) {\n          case 6:\n            return this._gl.R8_SNORM;\n\n          case 7:\n            return this._gl.RG8_SNORM;\n\n          case 4:\n            return this._gl.RGB8_SNORM;\n\n          case 8:\n            return this._gl.R8I;\n\n          case 9:\n            return this._gl.RG8I;\n\n          case 10:\n            return this._gl.RGB8I;\n\n          case 11:\n            return this._gl.RGBA8I;\n\n          default:\n            return this._gl.RGBA8_SNORM;\n        }\n\n      case 0:\n        switch (format) {\n          case 6:\n            return this._gl.R8;\n\n          case 7:\n            return this._gl.RG8;\n\n          case 4:\n            return useSRGBBuffer ? this._glSRGBExtensionValues.SRGB8 : this._gl.RGB8;\n          // By default. Other possibilities are RGB565, SRGB8.\n\n          case 5:\n            return useSRGBBuffer ? this._glSRGBExtensionValues.SRGB8_ALPHA8 : this._gl.RGBA8;\n          // By default. Other possibilities are RGB5_A1, RGBA4, SRGB8_ALPHA8.\n\n          case 8:\n            return this._gl.R8UI;\n\n          case 9:\n            return this._gl.RG8UI;\n\n          case 10:\n            return this._gl.RGB8UI;\n\n          case 11:\n            return this._gl.RGBA8UI;\n\n          case 0:\n            return this._gl.ALPHA;\n\n          case 1:\n            return this._gl.LUMINANCE;\n\n          case 2:\n            return this._gl.LUMINANCE_ALPHA;\n\n          default:\n            return this._gl.RGBA8;\n        }\n\n      case 4:\n        switch (format) {\n          case 8:\n            return this._gl.R16I;\n\n          case 9:\n            return this._gl.RG16I;\n\n          case 10:\n            return this._gl.RGB16I;\n\n          case 11:\n            return this._gl.RGBA16I;\n\n          default:\n            return this._gl.RGBA16I;\n        }\n\n      case 5:\n        switch (format) {\n          case 8:\n            return this._gl.R16UI;\n\n          case 9:\n            return this._gl.RG16UI;\n\n          case 10:\n            return this._gl.RGB16UI;\n\n          case 11:\n            return this._gl.RGBA16UI;\n\n          default:\n            return this._gl.RGBA16UI;\n        }\n\n      case 6:\n        switch (format) {\n          case 8:\n            return this._gl.R32I;\n\n          case 9:\n            return this._gl.RG32I;\n\n          case 10:\n            return this._gl.RGB32I;\n\n          case 11:\n            return this._gl.RGBA32I;\n\n          default:\n            return this._gl.RGBA32I;\n        }\n\n      case 7:\n        // Refers to UNSIGNED_INT\n        switch (format) {\n          case 8:\n            return this._gl.R32UI;\n\n          case 9:\n            return this._gl.RG32UI;\n\n          case 10:\n            return this._gl.RGB32UI;\n\n          case 11:\n            return this._gl.RGBA32UI;\n\n          default:\n            return this._gl.RGBA32UI;\n        }\n\n      case 1:\n        switch (format) {\n          case 6:\n            return this._gl.R32F;\n          // By default. Other possibility is R16F.\n\n          case 7:\n            return this._gl.RG32F;\n          // By default. Other possibility is RG16F.\n\n          case 4:\n            return this._gl.RGB32F;\n          // By default. Other possibilities are RGB16F, R11F_G11F_B10F, RGB9_E5.\n\n          case 5:\n            return this._gl.RGBA32F;\n          // By default. Other possibility is RGBA16F.\n\n          default:\n            return this._gl.RGBA32F;\n        }\n\n      case 2:\n        switch (format) {\n          case 6:\n            return this._gl.R16F;\n\n          case 7:\n            return this._gl.RG16F;\n\n          case 4:\n            return this._gl.RGB16F;\n          // By default. Other possibilities are R11F_G11F_B10F, RGB9_E5.\n\n          case 5:\n            return this._gl.RGBA16F;\n\n          default:\n            return this._gl.RGBA16F;\n        }\n\n      case 10:\n        return this._gl.RGB565;\n\n      case 13:\n        return this._gl.R11F_G11F_B10F;\n\n      case 14:\n        return this._gl.RGB9_E5;\n\n      case 8:\n        return this._gl.RGBA4;\n\n      case 9:\n        return this._gl.RGB5_A1;\n\n      case 11:\n        switch (format) {\n          case 5:\n            return this._gl.RGB10_A2;\n          // By default. Other possibility is RGB5_A1.\n\n          case 11:\n            return this._gl.RGB10_A2UI;\n\n          default:\n            return this._gl.RGB10_A2;\n        }\n\n    }\n\n    return useSRGBBuffer ? this._glSRGBExtensionValues.SRGB8_ALPHA8 : this._gl.RGBA8;\n  }\n  /**\n   * @internal\n   */\n\n\n  _getRGBAMultiSampleBufferFormat(type, format = 5) {\n    switch (type) {\n      case 1:\n        switch (format) {\n          case 6:\n            return this._gl.R32F;\n\n          default:\n            return this._gl.RGBA32F;\n        }\n\n      case 2:\n        switch (format) {\n          case 6:\n            return this._gl.R16F;\n\n          default:\n            return this._gl.RGBA16F;\n        }\n\n    }\n\n    return this._gl.RGBA8;\n  }\n  /**\n   * @internal\n   */\n\n\n  _loadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError) {\n    const request = ThinEngine._FileToolsLoadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError);\n\n    this._activeRequests.push(request);\n\n    request.onCompleteObservable.add(request => {\n      this._activeRequests.splice(this._activeRequests.indexOf(request), 1);\n    });\n    return request;\n  }\n  /**\n   * Loads a file from a url\n   * @param url url to load\n   * @param onSuccess callback called when the file successfully loads\n   * @param onProgress callback called while file is loading (if the server supports this mode)\n   * @param offlineProvider defines the offline provider for caching\n   * @param useArrayBuffer defines a boolean indicating that date must be returned as ArrayBuffer\n   * @param onError callback called when the file fails to load\n   * @returns a file request object\n   * @internal\n   */\n\n\n  static _FileToolsLoadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError) {\n    throw (0, _devTools._WarnImport)(\"FileTools\");\n  }\n  /**\n   * Reads pixels from the current frame buffer. Please note that this function can be slow\n   * @param x defines the x coordinate of the rectangle where pixels must be read\n   * @param y defines the y coordinate of the rectangle where pixels must be read\n   * @param width defines the width of the rectangle where pixels must be read\n   * @param height defines the height of the rectangle where pixels must be read\n   * @param hasAlpha defines whether the output should have alpha or not (defaults to true)\n   * @param flushRenderer true to flush the renderer from the pending commands before reading the pixels\n   * @returns a ArrayBufferView promise (Uint8Array) containing RGBA colors\n   */\n\n\n  readPixels(x, y, width, height, hasAlpha = true, flushRenderer = true) {\n    const numChannels = hasAlpha ? 4 : 3;\n    const format = hasAlpha ? this._gl.RGBA : this._gl.RGB;\n    const data = new Uint8Array(height * width * numChannels);\n\n    if (flushRenderer) {\n      this.flushFramebuffer();\n    }\n\n    this._gl.readPixels(x, y, width, height, format, this._gl.UNSIGNED_BYTE, data);\n\n    return Promise.resolve(data);\n  }\n  /**\n   * Gets a Promise<boolean> indicating if the engine can be instantiated (ie. if a webGL context can be found)\n   */\n\n\n  static get IsSupportedAsync() {\n    return Promise.resolve(this.isSupported());\n  }\n  /**\n   * Gets a boolean indicating if the engine can be instantiated (ie. if a webGL context can be found)\n   */\n\n\n  static get IsSupported() {\n    return this.isSupported(); // Backward compat\n  }\n  /**\n   * Gets a boolean indicating if the engine can be instantiated (ie. if a webGL context can be found)\n   * @returns true if the engine can be created\n   * @ignorenaming\n   */\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n\n\n  static isSupported() {\n    if (this._HasMajorPerformanceCaveat !== null) {\n      return !this._HasMajorPerformanceCaveat; // We know it is performant so WebGL is supported\n    }\n\n    if (this._IsSupported === null) {\n      try {\n        const tempcanvas = this._CreateCanvas(1, 1);\n\n        const gl = tempcanvas.getContext(\"webgl\") || tempcanvas.getContext(\"experimental-webgl\");\n        this._IsSupported = gl != null && !!window.WebGLRenderingContext;\n      } catch (e) {\n        this._IsSupported = false;\n      }\n    }\n\n    return this._IsSupported;\n  }\n  /**\n   * Gets a boolean indicating if the engine can be instantiated on a performant device (ie. if a webGL context can be found and it does not use a slow implementation)\n   */\n\n\n  static get HasMajorPerformanceCaveat() {\n    if (this._HasMajorPerformanceCaveat === null) {\n      try {\n        const tempcanvas = this._CreateCanvas(1, 1);\n\n        const gl = tempcanvas.getContext(\"webgl\", {\n          failIfMajorPerformanceCaveat: true\n        }) || tempcanvas.getContext(\"experimental-webgl\", {\n          failIfMajorPerformanceCaveat: true\n        });\n        this._HasMajorPerformanceCaveat = !gl;\n      } catch (e) {\n        this._HasMajorPerformanceCaveat = false;\n      }\n    }\n\n    return this._HasMajorPerformanceCaveat;\n  }\n  /**\n   * Find the next highest power of two.\n   * @param x Number to start search from.\n   * @returns Next highest power of two.\n   */\n\n\n  static CeilingPOT(x) {\n    x--;\n    x |= x >> 1;\n    x |= x >> 2;\n    x |= x >> 4;\n    x |= x >> 8;\n    x |= x >> 16;\n    x++;\n    return x;\n  }\n  /**\n   * Find the next lowest power of two.\n   * @param x Number to start search from.\n   * @returns Next lowest power of two.\n   */\n\n\n  static FloorPOT(x) {\n    x = x | x >> 1;\n    x = x | x >> 2;\n    x = x | x >> 4;\n    x = x | x >> 8;\n    x = x | x >> 16;\n    return x - (x >> 1);\n  }\n  /**\n   * Find the nearest power of two.\n   * @param x Number to start search from.\n   * @returns Next nearest power of two.\n   */\n\n\n  static NearestPOT(x) {\n    const c = ThinEngine.CeilingPOT(x);\n    const f = ThinEngine.FloorPOT(x);\n    return c - x > x - f ? f : c;\n  }\n  /**\n   * Get the closest exponent of two\n   * @param value defines the value to approximate\n   * @param max defines the maximum value to return\n   * @param mode defines how to define the closest value\n   * @returns closest exponent of two of the given value\n   */\n\n\n  static GetExponentOfTwo(value, max, mode = 2) {\n    let pot;\n\n    switch (mode) {\n      case 1:\n        pot = ThinEngine.FloorPOT(value);\n        break;\n\n      case 2:\n        pot = ThinEngine.NearestPOT(value);\n        break;\n\n      case 3:\n      default:\n        pot = ThinEngine.CeilingPOT(value);\n        break;\n    }\n\n    return Math.min(pot, max);\n  }\n  /**\n   * Queue a new function into the requested animation frame pool (ie. this function will be executed by the browser (or the javascript engine) for the next frame)\n   * @param func - the function to be called\n   * @param requester - the object that will request the next frame. Falls back to window.\n   * @returns frame number\n   */\n\n\n  static QueueNewFrame(func, requester) {\n    // Note that there is kind of a typing issue here, as `setTimeout` might return something else than a number (NodeJs returns a NodeJS.Timeout object).\n    // Also if the global `requestAnimationFrame`'s returnType is number, `requester.requestPostAnimationFrame` and `requester.requestAnimationFrame` types\n    // are `any`.\n    if (!(0, _domManagement.IsWindowObjectExist)()) {\n      if (typeof requestAnimationFrame === \"function\") {\n        return requestAnimationFrame(func);\n      }\n    } else {\n      const {\n        requestPostAnimationFrame,\n        requestAnimationFrame\n      } = requester || window;\n\n      if (typeof requestPostAnimationFrame === \"function\") {\n        return requestPostAnimationFrame(func);\n      }\n\n      if (typeof requestAnimationFrame === \"function\") {\n        return requestAnimationFrame(func);\n      }\n    } // fallback to the global `setTimeout`.\n    // In most cases (aka in the browser), `window` is the global object, so instead of calling `window.setTimeout` we could call the global `setTimeout`.\n\n\n    return setTimeout(func, 16);\n  }\n  /**\n   * Gets host document\n   * @returns the host document object\n   */\n\n\n  getHostDocument() {\n    if (this._renderingCanvas && this._renderingCanvas.ownerDocument) {\n      return this._renderingCanvas.ownerDocument;\n    }\n\n    return (0, _domManagement.IsDocumentAvailable)() ? document : null;\n  }\n\n}\n/** Use this array to turn off some WebGL2 features on known buggy browsers version */\n\n\nexports.ThinEngine = ThinEngine;\nThinEngine.ExceptionList = [{\n  key: \"Chrome/63.0\",\n  capture: \"63\\\\.0\\\\.3239\\\\.(\\\\d+)\",\n  captureConstraint: 108,\n  targets: [\"uniformBuffer\"]\n}, {\n  key: \"Firefox/58\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"uniformBuffer\"]\n}, {\n  key: \"Firefox/59\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"uniformBuffer\"]\n}, {\n  key: \"Chrome/72.+?Mobile\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Chrome/73.+?Mobile\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Chrome/74.+?Mobile\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Mac OS.+Chrome/71\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Mac OS.+Chrome/72\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Mac OS.+Chrome\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"uniformBuffer\"]\n}, // desktop osx safari 15.4\n{\n  key: \".*AppleWebKit.*(15.4).*Safari\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"antialias\", \"maxMSAASamples\"]\n}, // mobile browsers using safari 15.4 on ios\n{\n  key: \".*(15.4).*AppleWebKit.*Safari\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"antialias\", \"maxMSAASamples\"]\n}];\n/** @internal */\n\nThinEngine._TextureLoaders = []; // Updatable statics so stick with vars here\n\n/**\n * Gets or sets the epsilon value used by collision engine\n */\n\nThinEngine.CollisionsEpsilon = 0.001; // Statics\n\nThinEngine._IsSupported = null;\nThinEngine._HasMajorPerformanceCaveat = null;\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","ThinEngine","_engineStore","_effect","_devTools","_observable","_depthCullingState","_stencilState","_alphaCullingState","_internalTexture","_logger","_domManagement","_webGLShaderProcessors","_webGL2ShaderProcessors","_webGLDataBuffer","_webGLPipelineContext","_performanceConfigurator","_webGLHardwareTexture","_drawWrapper","_stencilStateComposer","_shaderLanguage","_precisionDate","BufferPointer","description","name","webGLVersion","_caps","parallelShaderCompile","_name","_webGLVersion","_isDisposed","Effect","ShadersRepository","_getShaderProcessor","shaderLanguage","_shaderProcessor","_useReverseDepthBuffer","useReverse","depthFunc","_frameId","disableUniformBuffers","getCreationOptions","_creationOptions","highPrecisionShaderSupported","_highPrecisionShadersAllowed","forcePOTTextures","_activeRenderLoops","_doNotHandleContextLost","dimensions","_framebufferDimensionsObject","_cachedViewport","_emptyTexture","createRawTexture","Uint8Array","_emptyTexture3D","createRawTexture3D","_emptyTexture2DArray","createRawTexture2DArray","_emptyCubeTexture","faceData","createRawCubeTexture","cubeData","_isWebGPU","_shaderPlatformName","activate","_snapshotRenderingMode","mode","snapshotRenderingReset","snapshotRendering","_CreateCanvas","width","height","document","OffscreenCanvas","canvas","createElement","createCanvas","createCanvasImage","constructor","canvasOrContext","antialias","options","adaptToDeviceRatio","_a","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","isFullscreen","cullBackFaces","renderEvenInBackground","isNDCHalfZRange","validateShaderPrograms","preventCacheWipeBetweenFrames","hasOriginBottomLeft","onDisposeObservable","Observable","_uniformBuffers","_storageBuffers","_windowIsBackground","_renderingQueueLaunched","_badDesktopOS","_badOS","onContextLostObservable","onContextRestoredObservable","disableVertexArrayObjects","_contextWasLost","_colorWriteChanged","_colorWrite","DepthCullingState","StencilStateComposer","StencilState","_alphaState","AlphaState","_alphaMode","_alphaEquation","_internalTexturesCache","_renderTargetWrapperCache","_activeChannel","_currentTextureChannel","_boundTexturesCache","_compiledEffects","_vertexAttribArraysEnabled","_uintIndicesCurrentlySet","_currentBoundBuffer","_dummyFramebuffer","_currentFramebuffer","_currentBufferPointers","_currentInstanceLocations","_currentInstanceBuffers","_mustWipeVertexAttributes","_vaoRecordInProgress","_nextFreeTextureSlots","_maxSimultaneousTextures","_maxMSAASamplesOverride","_activeRequests","_lastDevicePixelRatio","_transformTextureUrl","hostInformation","isMobile","premultipliedAlpha","onBeforeTextureInitObservable","_viewportCached","x","y","z","w","_unpackFlipYCached","enableUnpackFlipYCached","_boundUniforms","startTime","PrecisionDate","Now","stencilGlobal","PerformanceConfigurator","SetMatrixPrecision","useHighPrecisionMatrix","deterministicLockstep","lockstepMaxSteps","timeStep","audioEngine","stencil","_audioContext","audioEngineOptions","audioContext","_audioDestination","audioDestination","useExactSrgbConversions","doNotHandleContextLost","_isStencilEnable","devicePixelRatio","IsWindowObjectExist","window","limitDeviceRatio","_hardwareScalingLevel","Math","min","getContext","_renderingCanvas","undefined","preserveDrawingBuffer","xrCompatible","navigator","userAgent","_setupMobileChecks","ua","exception","ExceptionList","targets","test","check","RegExp","key","capture","captureConstraint","constraint","matches","exec","regex","length","parseInt","capturedValue","target","_onContextLost","evt","this._onContextLost","preventDefault","Logger","Warn","notifyObservers","_onContextRestored","this._onContextRestored","_restoreEngineAfterContextLost","_initGLContext","bind","addEventListener","powerPreference","disableWebGL2Support","_gl","deleteQuery","e","Error","attributes","renderbufferStorageMultisample","getContextAttributes","pixelStorei","UNPACK_COLORSPACE_CONVERSION_WEBGL","NONE","useHighPrecisionFloats","resize","_initFeatures","i","maxVertexAttribs","WebGL2ShaderProcessor","WebGLShaderProcessor","versionToLog","Version","console","log","setAttribute","_checkForMobile","this._checkForMobile","currentUA","indexOf","IsDocumentAvailable","initEngine","setTimeout","depthTest","depthMask","stencilTest","wipeCaches","_rebuildEffects","_rebuildComputeEffects","call","_rebuildBuffers","_rebuildInternalTextures","_rebuildRenderTargetWrappers","_sharedInit","_getShaderProcessingContext","currentState","slice","internalTexture","_rebuild","renderTargetWrapper","effect","_pipelineContext","_wasPreviouslyReady","_prepareEffect","ResetCache","areAllEffectsReady","isReady","uniformBuffer","storageBuffer","maxTexturesImageUnits","getParameter","MAX_TEXTURE_IMAGE_UNITS","maxCombinedTexturesImageUnits","MAX_COMBINED_TEXTURE_IMAGE_UNITS","maxVertexTextureImageUnits","MAX_VERTEX_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","maxSamples","MAX_SAMPLES","maxCubemapTextureSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxRenderTextureSize","MAX_RENDERBUFFER_SIZE","MAX_VERTEX_ATTRIBS","maxVaryingVectors","MAX_VARYING_VECTORS","maxFragmentUniformVectors","MAX_FRAGMENT_UNIFORM_VECTORS","maxVertexUniformVectors","MAX_VERTEX_UNIFORM_VECTORS","getExtension","standardDerivatives","maxAnisotropy","astc","bptc","s3tc","s3tc_srgb","pvrtc","etc1","etc2","textureAnisotropicFilterExtension","uintIndices","fragmentDepthSupported","timerQuery","supportOcclusionQuery","canUseTimestampForTimerQuery","drawBuffersExtension","maxMSAASamples","colorBufferFloat","colorBufferHalfFloat","textureFloat","textureHalfFloat","textureHalfFloatRender","textureFloatLinearFiltering","textureFloatRender","textureHalfFloatLinearFiltering","vertexArrayObject","instancedArrays","textureLOD","texelFetch","blendMinMax","multiview","oculusMultiview","depthTextureExtension","canUseGLInstanceID","canUseGLVertexID","supportComputeShaders","supportSRGBBuffers","supportTransformFeedbacks","textureMaxLevel","texture2DArrayMaxLayerCount","MAX_ARRAY_TEXTURE_LAYERS","disableMorphTargetTexture","_glVersion","VERSION","rendererInfo","_glRenderer","UNMASKED_RENDERER_WEBGL","_glVendor","UNMASKED_VENDOR_WEBGL","VENDOR","RENDERER","HALF_FLOAT_OES","RGBA16F","RGBA32F","DEPTH24_STENCIL8","getQuery","getQueryEXT","TIMESTAMP_EXT","QUERY_COUNTER_BITS_EXT","MAX_TEXTURE_MAX_ANISOTROPY_EXT","_canRenderToFloatFramebuffer","COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR","COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT","COMPRESSED_SRGB_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT","COMPRESSED_SRGB8_ETC2","COMPRESSED_SRGB8_ALPHA8_ETC2_EAC","_canRenderToHalfFloatFramebuffer","drawBuffers","drawBuffersWEBGL","DRAW_FRAMEBUFFER","FRAMEBUFFER","UNSIGNED_INT_24_8","UNSIGNED_INT_24_8_WEBGL","vertexArrayObjectExtension","createVertexArray","createVertexArrayOES","bindVertexArray","bindVertexArrayOES","deleteVertexArray","deleteVertexArrayOES","instanceExtension","drawArraysInstanced","drawArraysInstancedANGLE","drawElementsInstanced","drawElementsInstancedANGLE","vertexAttribDivisor","vertexAttribDivisorANGLE","getShaderPrecisionFormat","vertexhighp","VERTEX_SHADER","HIGH_FLOAT","fragmenthighp","FRAGMENT_SHADER","precision","blendMinMaxExtension","MAX","MAX_EXT","MIN","MIN_EXT","_glSRGBExtensionValues","SRGB","WebGL2RenderingContext","SRGB8","SRGB8_ALPHA8","sRGBExtension","SRGB_EXT","SRGB_ALPHA_EXT","forceSRGBBufferSupportState","LEQUAL","slot","push","_features","forceBitmapOverHTMLImageElement","supportRenderAndCopyToLodForFloatTextures","supportDepthStencilTexture","supportShadowSamplers","uniformBufferHardCheckMatrix","allowTexturePrefiltering","trackUbosInFrame","checkUbosContentBeforeUpload","supportCSM","basisNeedsPOT","support3DTextures","needTypeSuffixInShaderConstants","supportMSAA","supportSSAO2","supportExtendedTextureFormats","supportSwitchCaseInShader","supportSyncTextureRead","needsInvertingBitmap","useUBOBindingCache","needShaderCodeInlining","needToAlwaysBindUniformBuffers","supportRenderPasses","supportSpriteInstancing","_collectUbosUpdatedInFrame","getClassName","_prepareWorkingCanvas","_workingCanvas","context","_workingContext","resetTextureCache","prototype","hasOwnProperty","getInfo","getGlInfo","vendor","renderer","version","setHardwareScalingLevel","level","getHardwareScalingLevel","getLoadedTexturesCache","getCaps","stopRenderLoop","renderFunction","index","splice","_renderLoop","shouldRender","beginFrame","endFrame","_frameHandler","_queueNewFrame","_boundRenderFunction","getHostWindow","getRenderingCanvas","getAudioContext","getAudioDestination","ownerDocument","defaultView","getRenderWidth","useScreen","_currentRenderTarget","framebufferWidth","drawingBufferWidth","getRenderHeight","framebufferHeight","drawingBufferHeight","bindedRenderFunction","requester","QueueNewFrame","runRenderLoop","clear","color","backBuffer","depth","useStencilGlobalOnly","stencilStateComposer","applyStates","clearColor","r","g","b","a","COLOR_BUFFER_BIT","useReverseDepthBuffer","GEQUAL","clearDepth","DEPTH_BUFFER_BIT","clearStencil","STENCIL_BUFFER_BIT","_viewport","viewport","setViewport","requiredWidth","requiredHeight","flushFramebuffer","forceSetSize","changeRatio","boundingRect","getBoundingClientRect","clientWidth","clientHeight","innerWidth","innerHeight","setSize","bindFramebuffer","rtWrapper","faceIndex","forceFullscreenViewport","lodLevel","layer","unBindFramebuffer","_bindUnboundFramebuffer","_MSAAFramebuffer","_framebuffer","gl","isMulti","is2DArray","framebufferTextureLayer","COLOR_ATTACHMENT0","texture","_hardwareTexture","underlyingResource","isCube","framebufferTexture2D","TEXTURE_CUBE_MAP_POSITIVE_X","depthStencilTexture","_depthStencilTexture","attachment","_depthStencilTextureWithStencil","DEPTH_STENCIL_ATTACHMENT","DEPTH_ATTACHMENT","TEXTURE_2D","pow","setState","culling","zOffset","force","reverseSide","zOffsetUnits","cull","cullFace","BACK","FRONT","setZOffset","setZOffsetUnits","frontFace","CW","CCW","stencilMaterial","getDepthBuffer","setDepthBuffer","enable","getZOffset","getZOffsetUnits","framebuffer","_currentFrameBufferIsDefaultFrameBuffer","generateMipmaps","_bindTextureDirectly","generateMipmap","disableGenerateMipMaps","onBeforeUnbind","unBindMultiColorAttachmentFramebuffer","READ_FRAMEBUFFER","blitFramebuffer","NEAREST","generateMipMaps","flush","restoreDefaultFramebuffer","_resetVertexBufferBinding","bindArrayBuffer","_cachedVertexBuffers","createVertexBuffer","data","_createVertexBuffer","STATIC_DRAW","usage","vbo","createBuffer","dataBuffer","WebGLDataBuffer","Array","bufferData","ARRAY_BUFFER","Float32Array","references","createDynamicVertexBuffer","DYNAMIC_DRAW","_resetIndexBufferBinding","bindIndexBuffer","_cachedIndexBuffer","createIndexBuffer","indices","updatable","_normalizeIndexData","ELEMENT_ARRAY_BUFFER","is32Bits","BYTES_PER_ELEMENT","Uint32Array","Uint16Array","buffer","_unbindVertexArrayObject","_bindBuffer","bindUniformBlock","pipelineContext","blockName","program","uniformLocation","getUniformBlockIndex","uniformBlockBinding","bindBuffer","updateArrayBuffer","bufferSubData","_vertexAttribPointer","indx","size","type","normalized","stride","offset","pointer","changed","active","UNSIGNED_INT","INT","vertexAttribIPointer","vertexAttribPointer","_bindIndexBufferWithCache","indexBuffer","_bindVertexBuffersAttributes","vertexBuffers","overrideVertexBuffers","getAttributesNames","unbindAllAttributes","order","getAttributeLocation","ai","vertexBuffer","enableVertexAttribArray","getBuffer","getSize","byteStride","byteOffset","getIsInstanced","getInstanceDivisor","recordVertexArrayObject","vao","bindVertexArrayObject","_cachedVertexArrayObject","bindBuffersDirectly","vertexDeclaration","vertexStrideSize","_cachedEffectForVertexBuffers","attributesCount","getAttributesCount","FLOAT","bindBuffers","unbindInstanceAttributes","boundBuffer","ul","instancesBuffer","offsetLocation","releaseVertexArrayObject","_releaseBuffer","_deleteBuffer","deleteBuffer","updateAndBindInstancesBuffer","offsetLocations","bindInstancesBuffer","attributesInfo","computeStride","attributeSize","_currentEffect","getAttributeLocationByName","attributeName","attributeType","divisor","disableInstanceAttributeByName","attributeLocation","disableInstanceAttribute","shouldClean","disableAttributeByIndex","disableVertexAttribArray","draw","useTriangles","indexStart","indexCount","instancesCount","drawElementsType","drawPointClouds","verticesStart","verticesCount","drawArraysType","drawUnIndexed","fillMode","_reportDrawCall","drawMode","_drawMode","indexFormat","UNSIGNED_SHORT","mult","drawElements","drawArrays","TRIANGLES","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLE_STRIP","TRIANGLE_FAN","_releaseEffect","_key","getPipelineContext","_deletePipelineContext","__SPECTOR_rebuildProgram","deleteProgram","_getGlobalDefines","defines","s","createEffect","baseName","attributesNamesOrOptions","uniformsNamesOrEngine","samplers","fallbacks","onCompiled","onError","indexParameters","ShaderLanguage","GLSL","vertex","vertexElement","vertexToken","vertexSource","fragment","fragmentElement","fragmentToken","fragmentSource","globalDefines","fullDefines","compiledEffect","_ConcatenateShader","source","shaderVersion","_compileShader","_compileRawShader","shader","createShader","error","NO_ERROR","tempError","getError","isContextLost","shaderSource","compileShader","_getShaderSource","getShaderSource","createRawShaderProgram","vertexCode","fragmentCode","transformFeedbackVaryings","vertexShader","fragmentShader","_createShaderProgram","createShaderProgram","inlineShaderCode","code","createPipelineContext","shaderProcessingContext","WebGLPipelineContext","engine","isParallelCompiled","createMaterialContext","createDrawContext","shaderProgram","createProgram","attachShader","linkProgram","_finalizePipelineContext","getProgramParameter","linked","LINK_STATUS","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","vertexCompilationError","fragmentCompilationError","getProgramInfoLog","programLinkError","validateProgram","validated","VALIDATE_STATUS","programValidationError","deleteShader","_preparePipelineContext","vertexSourceCode","fragmentSourceCode","createAsRaw","rawVertexSourceCode","rawFragmentSourceCode","rebuildRebind","_isRenderingStateCompiled","COMPLETION_STATUS_KHR","_executeWhenRenderingStateIsCompiled","action","oldHandler","webGLPipelineContext.onCompiled","getUniforms","uniformsNames","results","getUniformLocation","getAttributes","attributesNames","getAttribLocation","enableEffect","DrawWrapper","IsWrapper","bindSamplers","onBind","_onBindObservable","setInt","uniform","uniform1i","setInt2","uniform2i","setInt3","uniform3i","setInt4","uniform4i","setIntArray","array","uniform1iv","setIntArray2","uniform2iv","setIntArray3","uniform3iv","setIntArray4","uniform4iv","setUInt","uniform1ui","setUInt2","uniform2ui","setUInt3","uniform3ui","setUInt4","uniform4ui","setUIntArray","uniform1uiv","setUIntArray2","uniform2uiv","setUIntArray3","uniform3uiv","setUIntArray4","uniform4uiv","setArray","uniform1fv","setArray2","uniform2fv","setArray3","uniform3fv","setArray4","uniform4fv","setMatrices","matrices","uniformMatrix4fv","setMatrix3x3","matrix","uniformMatrix3fv","setMatrix2x2","uniformMatrix2fv","setFloat","uniform1f","setFloat2","uniform2f","setFloat3","uniform3f","setFloat4","uniform4f","apply","colorMask","setColorWrite","getColorWrite","clearInternalTexturesCache","bruteForce","_currentProgram","reset","UNPACK_PREMULTIPLY_ALPHA_WEBGL","_getSamplingParameters","samplingMode","magFilter","minFilter","LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","NEAREST_MIPMAP_LINEAR","NEAREST_MIPMAP_NEAREST","mag","_createTexture","createTexture","_createHardwareTexture","WebGLHardwareTexture","_createInternalTexture","delayGPUTextureCreation","InternalTextureSource","Unknown","format","useSRGBBuffer","samples","label","isWebGPU","InternalTexture","layers","filters","TEXTURE_2D_ARRAY","sizedFormat","_getRGBABufferInternalSizedFormat","internalFormat","_getInternalFormat","textureType","_getWebGLTextureType","texImage3D","texImage2D","texParameteri","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","_useSRGBBuffer","baseWidth","baseHeight","_getUseSRGBBuffer","noMipmap","_createTextureBase","url","invertY","scene","onLoad","prepareTexture","prepareTextureProcessFunction","fallback","forcedExtension","mimeType","loaderOptions","fromData","substr","fromBlob","isBase64","Url","substring","originalUrl","_originalUrl","lastDot","lastIndexOf","extension","toLowerCase","loader","queryStringIndex","split","availableLoader","_TextureLoaders","canLoad","addPendingData","_buffer","onLoadObserver","onLoadedObservable","add","onInternalError","message","removePendingData","remove","EngineStore","UseFallbackTexture","FallbackTexture","onErrorObservable","callback","loadData","loadMipmap","isCompressed","done","loadFailed","ArrayBuffer","isView","_loadFile","offlineProvider","request","responseURL","onload","img","decoding","close","_FileToolsLoadImage","imageOrientation","Blob","creationFlags","_prepareWebGLTexture","potWidth","potHeight","continuationCallback","isPot","RGBA","RGB","texelFormat","UNSIGNED_BYTE","_supportsHardwareTextureRescaling","drawImage","Temp","_rescaleTexture","_releaseTexture","input","imageBitmapOptions","_WarnImport","destination","onComplete","compression","_unpackFlipY","UNPACK_FLIP_Y_WEBGL","_getUnpackAlignement","UNPACK_ALIGNMENT","_getTextureTarget","TEXTURE_CUBE_MAP","is3D","TEXTURE_3D","isMultiview","updateTextureSamplingMode","useMipMaps","_setTextureParameterInteger","updateTextureDimensions","updateTextureWrappingMode","wrapU","wrapV","wrapR","_getTextureWrapMode","_cachedWrapU","_cachedWrapV","TEXTURE_WRAP_R","_cachedWrapR","_setupDepthStencilTexture","generateStencil","bilinearFiltering","comparisonFunction","_comparisonFunction","samplingParameters","TEXTURE_COMPARE_FUNC","TEXTURE_COMPARE_MODE","COMPARE_REF_TO_TEXTURE","_uploadCompressedDataToTextureDirectly","lod","compressedTexImage2D","_uploadDataToTextureDirectly","imageData","babylonInternalFormat","useTextureWidthAndHeight","lodMaxWidth","round","LOG2E","lodMaxHeight","max","updateTextureData","xOffset","yOffset","targetForBinding","texSubImage2D","_uploadArrayBufferViewToTexture","bindTarget","_prepareWebGLTextureContinuation","processFunction","needPOTTextures","GetExponentOfTwo","_setupFramebufferDepthAttachments","generateStencilBuffer","generateDepthBuffer","_createRenderBuffer","DEPTH_STENCIL","depthFormat","DEPTH_COMPONENT16","DEPTH_COMPONENT32F","STENCIL_INDEX8","STENCIL_ATTACHMENT","msInternalFormat","unbindBuffer","renderBuffer","createRenderbuffer","_updateRenderBuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","framebufferRenderbuffer","_deleteTexture","unbindAllTextures","_lodTextureHigh","dispose","_lodTextureMid","_lodTextureLow","_irradianceTexture","_releaseRenderTargetWrapper","deleteTexture","_setProgram","useProgram","webGLPipelineContext","getSamplers","getUniform","_activateCurrentTexture","activeTexture","TEXTURE0","forTextureDataUpdate","wasPreviouslyBound","isTextureForRendering","_associatedChannel","currentTextureBound","bindTexture","_bindSamplerUniformToChannel","_bindTexture","channel","setTexture","_setTexture","sourceSlot","_currentState","MIRRORED_REPEAT","REPEAT","isPartOfTextureArray","video","videoInternalTexture","getInternalTexture","update","delayLoadState","delayLoad","emptyCubeTexture","emptyTexture3D","emptyTexture2DArray","emptyTexture","needToBind","_cachedCoordinatesMode","coordinatesMode","textureWrapMode","_setAnisotropicLevel","anisotropicFilteringLevel","setTextureArray","textures","_textureUnits","Int32Array","anisotropicFilterExtension","_cachedAnisotropicFilteringLevel","_setTextureParameterFloat","TEXTURE_MAX_ANISOTROPY_EXT","parameter","texParameterf","releaseEffects","deleteFramebuffer","releaseComputeEffects","removeEventListener","abort","attachContextLostEvent","attachContextRestoredEvent","_canRenderToFramebuffer","successful","fb","createFramebuffer","status","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readFormat","readType","readPixels","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","BYTE","SHORT","HALF_FLOAT","UNSIGNED_INT_2_10_10_10_REV","UNSIGNED_INT_10F_11F_11F_REV","UNSIGNED_INT_5_9_9_9_REV","FLOAT_32_UNSIGNED_INT_24_8_REV","ALPHA","LUMINANCE","LUMINANCE_ALPHA","RED","RG","RED_INTEGER","RG_INTEGER","RGB_INTEGER","RGBA_INTEGER","R8_SNORM","RG8_SNORM","RGB8_SNORM","R8I","RG8I","RGB8I","RGBA8I","RGBA8_SNORM","R8","RG8","RGB8","RGBA8","R8UI","RG8UI","RGB8UI","RGBA8UI","R16I","RG16I","RGB16I","RGBA16I","R16UI","RG16UI","RGB16UI","RGBA16UI","R32I","RG32I","RGB32I","RGBA32I","R32UI","RG32UI","RGB32UI","RGBA32UI","R32F","RG32F","RGB32F","R16F","RG16F","RGB16F","RGB565","R11F_G11F_B10F","RGB9_E5","RGBA4","RGB5_A1","RGB10_A2","RGB10_A2UI","_getRGBAMultiSampleBufferFormat","onSuccess","onProgress","useArrayBuffer","_FileToolsLoadFile","onCompleteObservable","hasAlpha","flushRenderer","numChannels","Promise","resolve","isSupported","_HasMajorPerformanceCaveat","_IsSupported","tempcanvas","WebGLRenderingContext","failIfMajorPerformanceCaveat","CeilingPOT","FloorPOT","NearestPOT","c","f","pot","func","requestPostAnimationFrame","requestAnimationFrame","getHostDocument","CollisionsEpsilon"]
}
