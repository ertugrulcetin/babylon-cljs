shadow$provide.module$node_modules$babylonjs_materials$babylonjs_materials=function(global,require,module$jscomp$0,exports$jscomp$0){(function(root,factory){"object"===typeof exports$jscomp$0&&"object"===typeof module$jscomp$0?module$jscomp$0.exports=factory(require("module$node_modules$babylonjs$babylon")):"function"===typeof define&&define.amd?define("babylonjs-materials",["babylonjs"],factory):"object"===typeof exports$jscomp$0?exports$jscomp$0["babylonjs-materials"]=factory(require("module$node_modules$babylonjs$babylon")):
root.MATERIALS=factory(root.BABYLON)})("undefined"!==typeof self?self:"undefined"!==typeof global?global:this,__WEBPACK_EXTERNAL_MODULE_babylonjs_Misc_decorators__=>(()=>{function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;cachedModule=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId](cachedModule,cachedModule.exports,__webpack_require__);return cachedModule.exports}var __webpack_modules__=
{"../../../dev/materials/src/cell/cell.fragment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{cellPixelShader:()=>cellPixelShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.cellPixelShader="precision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform sampler2D diffuseSampler;\nuniform vec2 vDiffuseInfos;\n#endif\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\nvec3 computeCustomDiffuseLighting(lightingInfo info,vec3 diffuseBase,float shadow)\n{\ndiffuseBase\x3dinfo.diffuse*shadow;\n#ifdef CELLBASIC\nfloat level\x3d1.0;\nif (info.ndl\x3c0.5)\nlevel\x3d0.5;\ndiffuseBase.rgb*vec3(level,level,level);\n#else\nfloat ToonThresholds[4];\nToonThresholds[0]\x3d0.95;\nToonThresholds[1]\x3d0.5;\nToonThresholds[2]\x3d0.2;\nToonThresholds[3]\x3d0.03;\nfloat ToonBrightnessLevels[5];\nToonBrightnessLevels[0]\x3d1.0;\nToonBrightnessLevels[1]\x3d0.8;\nToonBrightnessLevels[2]\x3d0.6;\nToonBrightnessLevels[3]\x3d0.35;\nToonBrightnessLevels[4]\x3d0.2;\nif (info.ndl\x3eToonThresholds[0])\n{\ndiffuseBase.rgb*\x3dToonBrightnessLevels[0];\n}\nelse if (info.ndl\x3eToonThresholds[1])\n{\ndiffuseBase.rgb*\x3dToonBrightnessLevels[1];\n}\nelse if (info.ndl\x3eToonThresholds[2])\n{\ndiffuseBase.rgb*\x3dToonBrightnessLevels[2];\n}\nelse if (info.ndl\x3eToonThresholds[3])\n{\ndiffuseBase.rgb*\x3dToonBrightnessLevels[3];\n}\nelse\n{\ndiffuseBase.rgb*\x3dToonBrightnessLevels[4];\n}\n#endif\nreturn max(diffuseBase,vec3(0.2));\n}\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void)\n{\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nvec4 baseColor\x3dvec4(1.,1.,1.,1.);\nvec3 diffuseColor\x3dvDiffuseColor.rgb;\nfloat alpha\x3dvDiffuseColor.a;\n#ifdef DIFFUSE\nbaseColor\x3dtexture2D(diffuseSampler,vDiffuseUV);\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\nbaseColor.rgb*\x3dvDiffuseInfos.y;\n#endif\n#ifdef VERTEXCOLOR\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\nlightingInfo info;\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nfloat shadow\x3d1.;\nfloat glossiness\x3d0.;\n#ifdef SPECULARTERM\nvec3 specularBase\x3dvec3(0.,0.,0.);\n#endif \n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\nvec4 color\x3dvec4(finalDiffuse,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}";
var cellPixelShader={name:"cellPixelShader",shader:"precision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform sampler2D diffuseSampler;\nuniform vec2 vDiffuseInfos;\n#endif\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\nvec3 computeCustomDiffuseLighting(lightingInfo info,vec3 diffuseBase,float shadow)\n{\ndiffuseBase\x3dinfo.diffuse*shadow;\n#ifdef CELLBASIC\nfloat level\x3d1.0;\nif (info.ndl\x3c0.5)\nlevel\x3d0.5;\ndiffuseBase.rgb*vec3(level,level,level);\n#else\nfloat ToonThresholds[4];\nToonThresholds[0]\x3d0.95;\nToonThresholds[1]\x3d0.5;\nToonThresholds[2]\x3d0.2;\nToonThresholds[3]\x3d0.03;\nfloat ToonBrightnessLevels[5];\nToonBrightnessLevels[0]\x3d1.0;\nToonBrightnessLevels[1]\x3d0.8;\nToonBrightnessLevels[2]\x3d0.6;\nToonBrightnessLevels[3]\x3d0.35;\nToonBrightnessLevels[4]\x3d0.2;\nif (info.ndl\x3eToonThresholds[0])\n{\ndiffuseBase.rgb*\x3dToonBrightnessLevels[0];\n}\nelse if (info.ndl\x3eToonThresholds[1])\n{\ndiffuseBase.rgb*\x3dToonBrightnessLevels[1];\n}\nelse if (info.ndl\x3eToonThresholds[2])\n{\ndiffuseBase.rgb*\x3dToonBrightnessLevels[2];\n}\nelse if (info.ndl\x3eToonThresholds[3])\n{\ndiffuseBase.rgb*\x3dToonBrightnessLevels[3];\n}\nelse\n{\ndiffuseBase.rgb*\x3dToonBrightnessLevels[4];\n}\n#endif\nreturn max(diffuseBase,vec3(0.2));\n}\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void)\n{\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nvec4 baseColor\x3dvec4(1.,1.,1.,1.);\nvec3 diffuseColor\x3dvDiffuseColor.rgb;\nfloat alpha\x3dvDiffuseColor.a;\n#ifdef DIFFUSE\nbaseColor\x3dtexture2D(diffuseSampler,vDiffuseUV);\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\nbaseColor.rgb*\x3dvDiffuseInfos.y;\n#endif\n#ifdef VERTEXCOLOR\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\nlightingInfo info;\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nfloat shadow\x3d1.;\nfloat glossiness\x3d0.;\n#ifdef SPECULARTERM\nvec3 specularBase\x3dvec3(0.,0.,0.);\n#endif \n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\nvec4 color\x3dvec4(finalDiffuse,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}"}},
"../../../dev/materials/src/cell/cell.vertex.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{cellVertexShader:()=>cellVertexShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.cellVertexShader="precision highp float;\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\ngl_Position\x3dviewProjection*worldPos;\nvPositionW\x3dvec3(worldPos);\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vDiffuseInfos.x\x3d\x3d0.)\n{\nvDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n";
var cellVertexShader={name:"cellVertexShader",shader:"precision highp float;\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\ngl_Position\x3dviewProjection*worldPos;\nvPositionW\x3dvec3(worldPos);\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vDiffuseInfos.x\x3d\x3d0.)\n{\nvDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n"}},
"../../../dev/materials/src/cell/cellMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{CellMaterial:()=>CellMaterial});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__);
__webpack_require__("../../../dev/materials/src/cell/cell.fragment.ts");__webpack_require__("../../../dev/materials/src/cell/cell.vertex.ts");var CellMaterialDefines=function(_super){function CellMaterialDefines(){var _this=_super.call(this)||this;_this.DIFFUSE=!1;_this.CLIPPLANE=!1;_this.CLIPPLANE2=!1;_this.CLIPPLANE3=!1;_this.CLIPPLANE4=!1;_this.CLIPPLANE5=!1;_this.CLIPPLANE6=!1;_this.ALPHATEST=!1;_this.POINTSIZE=!1;_this.FOG=!1;_this.NORMAL=!1;_this.UV1=!1;_this.UV2=!1;_this.VERTEXCOLOR=!1;_this.VERTEXALPHA=
!1;_this.NUM_BONE_INFLUENCERS=0;_this.BonesPerMesh=0;_this.INSTANCES=!1;_this.INSTANCESCOLOR=!1;_this.NDOTL=!0;_this.CUSTOMUSERLIGHTING=!0;_this.CELLBASIC=!0;_this.DEPTHPREPASS=!1;_this.IMAGEPROCESSINGPOSTPROCESS=!1;_this.SKIPFINALCOLORCLAMP=!1;_this.rebuild();return _this}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(CellMaterialDefines,_super);return CellMaterialDefines}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialDefines),CellMaterial=function(_super){function CellMaterial(name,
scene){name=_super.call(this,name,scene)||this;name.diffuseColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(1,1,1);name._computeHighLevel=!1;name._disableLighting=!1;name._maxSimultaneousLights=4;return name}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(CellMaterial,_super);CellMaterial.prototype.needAlphaBlending=function(){return 1>this.alpha};CellMaterial.prototype.needAlphaTesting=function(){return!1};CellMaterial.prototype.getAlphaTestTexture=function(){return null};
CellMaterial.prototype.isReadyForSubMesh=function(mesh,subMesh,useInstances){if(this.isFrozen&&subMesh.effect&&subMesh.effect._wasPreviouslyReady&&subMesh.effect._wasPreviouslyUsingInstances===useInstances)return!0;subMesh.materialDefines||(subMesh.materialDefines=new CellMaterialDefines);var defines=subMesh.materialDefines,scene=this.getScene();if(this._isReadyForSubMesh(subMesh))return!0;var engine=scene.getEngine();if(defines._areTexturesDirty&&(defines._needUVs=!1,scene.texturesEnabled&&this._diffuseTexture&&
babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled))if(this._diffuseTexture.isReady())defines._needUVs=!0,defines.DIFFUSE=!0;else return!1;defines.CELLBASIC=!this.computeHighLevel;babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForMisc(mesh,scene,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(mesh),defines);defines._needNormals=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForLights(scene,
mesh,defines,!1,this._maxSimultaneousLights,this._disableLighting);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForFrameBoundValues(scene,engine,this,defines,useInstances?!0:!1);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForAttributes(mesh,defines,!0,!0);if(defines.isDirty){defines.markAsProcessed();scene.resetCachedMaterial();var fallbacks=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.EffectFallbacks;defines.FOG&&
fallbacks.addFallback(1,"FOG");babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.HandleFallbacksForShadows(defines,fallbacks,this.maxSimultaneousLights);0<defines.NUM_BONE_INFLUENCERS&&fallbacks.addCPUSkinningFallback(0,mesh);defines.IMAGEPROCESSINGPOSTPROCESS=scene.imageProcessingConfiguration.applyByPostProcess;var attribs=[babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.PositionKind];defines.NORMAL&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.NormalKind);
defines.UV1&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UVKind);defines.UV2&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UV2Kind);defines.VERTEXCOLOR&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.ColorKind);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForBones(attribs,mesh,defines,fallbacks);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForInstances(attribs,
defines);mesh=defines.toString();var uniforms="world view viewProjection vEyePosition vLightsType vDiffuseColor vFogInfos vFogColor pointSize vDiffuseInfos mBones diffuseMatrix".split(" "),samplers=["diffuseSampler"],uniformBuffers=[];(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.addClipPlaneUniforms)(uniforms);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:uniforms,uniformBuffersNames:uniformBuffers,samplers,defines,
maxSimultaneousLights:this.maxSimultaneousLights});subMesh.setEffect(scene.getEngine().createEffect("cell",{attributes:attribs,uniformsNames:uniforms,uniformBuffersNames:uniformBuffers,samplers,defines:mesh,fallbacks,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this.maxSimultaneousLights-1}},engine),defines,this._materialContext)}if(!subMesh.effect||!subMesh.effect.isReady())return!1;defines._renderId=scene.getRenderId();subMesh.effect._wasPreviouslyReady=
!0;subMesh.effect._wasPreviouslyUsingInstances=!!useInstances;return!0};CellMaterial.prototype.bindForSubMesh=function(world,mesh,subMesh){var scene=this.getScene(),defines=subMesh.materialDefines;defines&&(subMesh=subMesh.effect)&&(this._activeEffect=subMesh,this.bindOnlyWorldMatrix(world),this._activeEffect.setMatrix("viewProjection",scene.getTransformMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindBonesParameters(mesh,this._activeEffect),this._mustRebind(scene,
subMesh)&&(this._diffuseTexture&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled&&(this._activeEffect.setTexture("diffuseSampler",this._diffuseTexture),this._activeEffect.setFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),this._activeEffect.setMatrix("diffuseMatrix",this._diffuseTexture.getTextureMatrix())),(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.bindClipPlane)(this._activeEffect,this,scene),this.pointsCloud&&
this._activeEffect.setFloat("pointSize",this.pointSize),scene.bindEyePosition(subMesh)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*mesh.visibility),scene.lightsEnabled&&!this.disableLighting&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindLights(scene,mesh,this._activeEffect,defines,this._maxSimultaneousLights),scene.fogEnabled&&mesh.applyFog&&scene.fogMode!==babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",
scene.getViewMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindFogParameters(scene,mesh,this._activeEffect),this._afterBind(mesh,this._activeEffect))};CellMaterial.prototype.getAnimatables=function(){var results=[];this._diffuseTexture&&this._diffuseTexture.animations&&0<this._diffuseTexture.animations.length&&results.push(this._diffuseTexture);return results};CellMaterial.prototype.getActiveTextures=function(){var activeTextures=_super.prototype.getActiveTextures.call(this);
this._diffuseTexture&&activeTextures.push(this._diffuseTexture);return activeTextures};CellMaterial.prototype.hasTexture=function(texture){return _super.prototype.hasTexture.call(this,texture)?!0:this._diffuseTexture===texture};CellMaterial.prototype.dispose=function(forceDisposeEffect){this._diffuseTexture&&this._diffuseTexture.dispose();_super.prototype.dispose.call(this,forceDisposeEffect)};CellMaterial.prototype.getClassName=function(){return"CellMaterial"};CellMaterial.prototype.clone=function(name){var _this=
this;return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Clone(function(){return new CellMaterial(name,_this.getScene())},this)};CellMaterial.prototype.serialize=function(){var serializationObject=_super.prototype.serialize.call(this);serializationObject.customType="BABYLON.CellMaterial";return serializationObject};CellMaterial.Parse=function(source,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Parse(function(){return new CellMaterial(source.name,
scene)},source,scene,rootUrl)};(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture")],CellMaterial.prototype,"_diffuseTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],CellMaterial.prototype,"diffuseTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)("diffuse")],
CellMaterial.prototype,"diffuseColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("computeHighLevel")],CellMaterial.prototype,"_computeHighLevel",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],CellMaterial.prototype,"computeHighLevel",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("disableLighting")],
CellMaterial.prototype,"_disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],CellMaterial.prototype,"disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("maxSimultaneousLights")],CellMaterial.prototype,"_maxSimultaneousLights",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],
CellMaterial.prototype,"maxSimultaneousLights",void 0);return CellMaterial}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.PushMaterial);(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.CellMaterial",CellMaterial)},"../../../dev/materials/src/cell/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{CellMaterial:()=>_cellMaterial__WEBPACK_IMPORTED_MODULE_0__.CellMaterial});
var _cellMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../dev/materials/src/cell/cellMaterial.ts")},"../../../dev/materials/src/custom/customMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{CustomMaterial:()=>CustomMaterial,CustomShaderStructure:()=>CustomShaderStructure,ShaderSpecialParts:()=>ShaderSpecialParts});var tslib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),
babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__);var CustomShaderStructure=function(){return function(){}}(),ShaderSpecialParts=function(){return function(){}}(),CustomMaterial=function(_super){function CustomMaterial(name,scene){name=_super.call(this,name,scene)||this;name.CustomParts=new ShaderSpecialParts;name.customShaderNameResolve=name.Builder;name.FragmentShader=
babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore.defaultPixelShader;name.VertexShader=babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore.defaultVertexShader;return name}(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__extends)(CustomMaterial,_super);CustomMaterial.prototype.AttachAfterBind=function(mesh,effect){if(this._newUniformInstances)for(var el in this._newUniformInstances)mesh=el.toString().split("-"),"vec2"==mesh[0]?effect.setVector2(mesh[1],this._newUniformInstances[el]):
"vec3"==mesh[0]?effect.setVector3(mesh[1],this._newUniformInstances[el]):"vec4"==mesh[0]?effect.setVector4(mesh[1],this._newUniformInstances[el]):"mat4"==mesh[0]?effect.setMatrix(mesh[1],this._newUniformInstances[el]):"float"==mesh[0]&&effect.setFloat(mesh[1],this._newUniformInstances[el]);if(this._newSamplerInstances)for(el in this._newSamplerInstances)mesh=el.toString().split("-"),"sampler2D"==mesh[0]&&this._newSamplerInstances[el].isReady&&this._newSamplerInstances[el].isReady()&&effect.setTexture(mesh[1],
this._newSamplerInstances[el])};CustomMaterial.prototype.ReviewUniform=function(name,arr){if("uniform"==name&&this._newUniforms)for(var ind=0;ind<this._newUniforms.length;ind++)-1==this._customUniform[ind].indexOf("sampler")&&arr.push(this._newUniforms[ind].replace(/\[\d*\]/g,""));if("sampler"==name&&this._newUniforms)for(ind=0;ind<this._newUniforms.length;ind++)-1!=this._customUniform[ind].indexOf("sampler")&&arr.push(this._newUniforms[ind].replace(/\[\d*\]/g,""));return arr};CustomMaterial.prototype.Builder=
function(shaderName,uniforms,uniformBuffers,samplers,defines,attributes){var _this=this;attributes&&this._customAttributes&&0<this._customAttributes.length&&attributes.push.apply(attributes,this._customAttributes);this.ReviewUniform("uniform",uniforms);this.ReviewUniform("sampler",samplers);if(this._isCreatedShader)return this._createdShaderName;this._isCreatedShader=!1;CustomMaterial.ShaderIndexer++;shaderName="custom_"+CustomMaterial.ShaderIndexer;var fn_afterBind=this._afterBind.bind(this);this._afterBind=
function(m,e$jscomp$0){if(e$jscomp$0){_this.AttachAfterBind(m,e$jscomp$0);try{fn_afterBind(m,e$jscomp$0)}catch(e){}}};babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[shaderName+"VertexShader"]=this.VertexShader.replace("#define CUSTOM_VERTEX_BEGIN",this.CustomParts.Vertex_Begin?this.CustomParts.Vertex_Begin:"").replace("#define CUSTOM_VERTEX_DEFINITIONS",(this._customUniform?this._customUniform.join("\n"):"")+(this.CustomParts.Vertex_Definitions?this.CustomParts.Vertex_Definitions:
"")).replace("#define CUSTOM_VERTEX_MAIN_BEGIN",this.CustomParts.Vertex_MainBegin?this.CustomParts.Vertex_MainBegin:"").replace("#define CUSTOM_VERTEX_UPDATE_POSITION",this.CustomParts.Vertex_Before_PositionUpdated?this.CustomParts.Vertex_Before_PositionUpdated:"").replace("#define CUSTOM_VERTEX_UPDATE_NORMAL",this.CustomParts.Vertex_Before_NormalUpdated?this.CustomParts.Vertex_Before_NormalUpdated:"").replace("#define CUSTOM_VERTEX_MAIN_END",this.CustomParts.Vertex_MainEnd?this.CustomParts.Vertex_MainEnd:
"");this.CustomParts.Vertex_After_WorldPosComputed&&(babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[shaderName+"VertexShader"]=babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[shaderName+"VertexShader"].replace("#define CUSTOM_VERTEX_UPDATE_WORLDPOS",this.CustomParts.Vertex_After_WorldPosComputed));babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[shaderName+"PixelShader"]=this.FragmentShader.replace("#define CUSTOM_FRAGMENT_BEGIN",
this.CustomParts.Fragment_Begin?this.CustomParts.Fragment_Begin:"").replace("#define CUSTOM_FRAGMENT_MAIN_BEGIN",this.CustomParts.Fragment_MainBegin?this.CustomParts.Fragment_MainBegin:"").replace("#define CUSTOM_FRAGMENT_DEFINITIONS",(this._customUniform?this._customUniform.join("\n"):"")+(this.CustomParts.Fragment_Definitions?this.CustomParts.Fragment_Definitions:"")).replace("#define CUSTOM_FRAGMENT_UPDATE_DIFFUSE",this.CustomParts.Fragment_Custom_Diffuse?this.CustomParts.Fragment_Custom_Diffuse:
"").replace("#define CUSTOM_FRAGMENT_UPDATE_ALPHA",this.CustomParts.Fragment_Custom_Alpha?this.CustomParts.Fragment_Custom_Alpha:"").replace("#define CUSTOM_FRAGMENT_BEFORE_LIGHTS",this.CustomParts.Fragment_Before_Lights?this.CustomParts.Fragment_Before_Lights:"").replace("#define CUSTOM_FRAGMENT_BEFORE_FRAGCOLOR",this.CustomParts.Fragment_Before_FragColor?this.CustomParts.Fragment_Before_FragColor:"").replace("#define CUSTOM_FRAGMENT_MAIN_END",this.CustomParts.Fragment_MainEnd?this.CustomParts.Fragment_MainEnd:
"");this.CustomParts.Fragment_Before_Fog&&(babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[shaderName+"PixelShader"]=babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[shaderName+"PixelShader"].replace("#define CUSTOM_FRAGMENT_BEFORE_FOG",this.CustomParts.Fragment_Before_Fog));this._isCreatedShader=!0;return this._createdShaderName=shaderName};CustomMaterial.prototype.AddUniform=function(name,kind,param){this._customUniform||(this._customUniform=
[],this._newUniforms=[],this._newSamplerInstances={},this._newUniformInstances={});param&&(-1!=kind.indexOf("sampler")?this._newSamplerInstances[kind+"-"+name]=param:this._newUniformInstances[kind+"-"+name]=param);this._customUniform.push("uniform "+kind+" "+name+";");this._newUniforms.push(name);return this};CustomMaterial.prototype.AddAttribute=function(name){this._customAttributes||(this._customAttributes=[]);this._customAttributes.push(name);return this};CustomMaterial.prototype.Fragment_Begin=
function(shaderPart){this.CustomParts.Fragment_Begin=shaderPart;return this};CustomMaterial.prototype.Fragment_Definitions=function(shaderPart){this.CustomParts.Fragment_Definitions=shaderPart;return this};CustomMaterial.prototype.Fragment_MainBegin=function(shaderPart){this.CustomParts.Fragment_MainBegin=shaderPart;return this};CustomMaterial.prototype.Fragment_MainEnd=function(shaderPart){this.CustomParts.Fragment_MainEnd=shaderPart;return this};CustomMaterial.prototype.Fragment_Custom_Diffuse=
function(shaderPart){this.CustomParts.Fragment_Custom_Diffuse=shaderPart.replace("result","diffuseColor");return this};CustomMaterial.prototype.Fragment_Custom_Alpha=function(shaderPart){this.CustomParts.Fragment_Custom_Alpha=shaderPart.replace("result","alpha");return this};CustomMaterial.prototype.Fragment_Before_Lights=function(shaderPart){this.CustomParts.Fragment_Before_Lights=shaderPart;return this};CustomMaterial.prototype.Fragment_Before_Fog=function(shaderPart){this.CustomParts.Fragment_Before_Fog=
shaderPart;return this};CustomMaterial.prototype.Fragment_Before_FragColor=function(shaderPart){this.CustomParts.Fragment_Before_FragColor=shaderPart.replace("result","color");return this};CustomMaterial.prototype.Vertex_Begin=function(shaderPart){this.CustomParts.Vertex_Begin=shaderPart;return this};CustomMaterial.prototype.Vertex_Definitions=function(shaderPart){this.CustomParts.Vertex_Definitions=shaderPart;return this};CustomMaterial.prototype.Vertex_MainBegin=function(shaderPart){this.CustomParts.Vertex_MainBegin=
shaderPart;return this};CustomMaterial.prototype.Vertex_Before_PositionUpdated=function(shaderPart){this.CustomParts.Vertex_Before_PositionUpdated=shaderPart.replace("result","positionUpdated");return this};CustomMaterial.prototype.Vertex_Before_NormalUpdated=function(shaderPart){this.CustomParts.Vertex_Before_NormalUpdated=shaderPart.replace("result","normalUpdated");return this};CustomMaterial.prototype.Vertex_After_WorldPosComputed=function(shaderPart){this.CustomParts.Vertex_After_WorldPosComputed=
shaderPart;return this};CustomMaterial.prototype.Vertex_MainEnd=function(shaderPart){this.CustomParts.Vertex_MainEnd=shaderPart;return this};CustomMaterial.ShaderIndexer=1;return CustomMaterial}(babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.StandardMaterial);(0,babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.CustomMaterial",CustomMaterial)},"../../../dev/materials/src/custom/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__,{CustomMaterial:()=>_customMaterial__WEBPACK_IMPORTED_MODULE_0__.CustomMaterial,CustomShaderStructure:()=>_customMaterial__WEBPACK_IMPORTED_MODULE_0__.CustomShaderStructure,PBRCustomMaterial:()=>_pbrCustomMaterial__WEBPACK_IMPORTED_MODULE_1__.PBRCustomMaterial,ShaderAlebdoParts:()=>_pbrCustomMaterial__WEBPACK_IMPORTED_MODULE_1__.ShaderAlebdoParts,ShaderSpecialParts:()=>_customMaterial__WEBPACK_IMPORTED_MODULE_0__.ShaderSpecialParts});var _customMaterial__WEBPACK_IMPORTED_MODULE_0__=
__webpack_require__("../../../dev/materials/src/custom/customMaterial.ts"),_pbrCustomMaterial__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../dev/materials/src/custom/pbrCustomMaterial.ts")},"../../../dev/materials/src/custom/pbrCustomMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{PBRCustomMaterial:()=>PBRCustomMaterial,ShaderAlebdoParts:()=>ShaderAlebdoParts});var tslib__WEBPACK_IMPORTED_MODULE_1__=
__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__);var ShaderAlebdoParts=function(){return function(){}}(),PBRCustomMaterial=function(_super){function PBRCustomMaterial(name,scene){name=_super.call(this,name,scene)||this;name.CustomParts=new ShaderAlebdoParts;name.customShaderNameResolve=name.Builder;
name.FragmentShader=babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore.pbrPixelShader;name.VertexShader=babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore.pbrVertexShader;name.FragmentShader=name.FragmentShader.replace(/#include<pbrBlockAlbedoOpacity>/g,babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.IncludesShadersStore.pbrBlockAlbedoOpacity);name.FragmentShader=name.FragmentShader.replace(/#include<pbrBlockReflectivity>/g,babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.IncludesShadersStore.pbrBlockReflectivity);
name.FragmentShader=name.FragmentShader.replace(/#include<pbrBlockFinalColorComposition>/g,babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.IncludesShadersStore.pbrBlockFinalColorComposition);return name}(0,tslib__WEBPACK_IMPORTED_MODULE_1__.__extends)(PBRCustomMaterial,_super);PBRCustomMaterial.prototype.AttachAfterBind=function(mesh,effect){if(this._newUniformInstances)for(var el in this._newUniformInstances)mesh=el.toString().split("-"),"vec2"==mesh[0]?effect.setVector2(mesh[1],this._newUniformInstances[el]):
"vec3"==mesh[0]?effect.setVector3(mesh[1],this._newUniformInstances[el]):"vec4"==mesh[0]?effect.setVector4(mesh[1],this._newUniformInstances[el]):"mat4"==mesh[0]?effect.setMatrix(mesh[1],this._newUniformInstances[el]):"float"==mesh[0]&&effect.setFloat(mesh[1],this._newUniformInstances[el]);if(this._newSamplerInstances)for(el in this._newSamplerInstances)mesh=el.toString().split("-"),"sampler2D"==mesh[0]&&this._newSamplerInstances[el].isReady&&this._newSamplerInstances[el].isReady()&&effect.setTexture(mesh[1],
this._newSamplerInstances[el])};PBRCustomMaterial.prototype.ReviewUniform=function(name,arr){if("uniform"==name&&this._newUniforms)for(var ind=0;ind<this._newUniforms.length;ind++)-1==this._customUniform[ind].indexOf("sampler")&&arr.push(this._newUniforms[ind].replace(/\[\d*\]/g,""));if("sampler"==name&&this._newUniforms)for(ind=0;ind<this._newUniforms.length;ind++)-1!=this._customUniform[ind].indexOf("sampler")&&arr.push(this._newUniforms[ind].replace(/\[\d*\]/g,""));return arr};PBRCustomMaterial.prototype.Builder=
function(shaderName,uniforms,uniformBuffers,samplers,defines,attributes,options){var _this=this;if(options){var currentProcessing_1=options.processFinalCode;options.processFinalCode=function(type,code){if("vertex"===type)return currentProcessing_1?currentProcessing_1(type,code):code;code=new babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.ShaderCodeInliner(code);code.inlineToken="#define pbr_inline";code.processCode();return currentProcessing_1?currentProcessing_1(type,code.code):code.code}}attributes&&
this._customAttributes&&0<this._customAttributes.length&&attributes.push.apply(attributes,this._customAttributes);this.ReviewUniform("uniform",uniforms);this.ReviewUniform("sampler",samplers);if(this._isCreatedShader)return this._createdShaderName;this._isCreatedShader=!1;PBRCustomMaterial.ShaderIndexer++;shaderName="custom_"+PBRCustomMaterial.ShaderIndexer;var fn_afterBind=this._afterBind.bind(this);this._afterBind=function(m,e$jscomp$0){if(e$jscomp$0){_this.AttachAfterBind(m,e$jscomp$0);try{fn_afterBind(m,
e$jscomp$0)}catch(e){}}};babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[shaderName+"VertexShader"]=this.VertexShader.replace("#define CUSTOM_VERTEX_BEGIN",this.CustomParts.Vertex_Begin?this.CustomParts.Vertex_Begin:"").replace("#define CUSTOM_VERTEX_DEFINITIONS",(this._customUniform?this._customUniform.join("\n"):"")+(this.CustomParts.Vertex_Definitions?this.CustomParts.Vertex_Definitions:"")).replace("#define CUSTOM_VERTEX_MAIN_BEGIN",this.CustomParts.Vertex_MainBegin?
this.CustomParts.Vertex_MainBegin:"").replace("#define CUSTOM_VERTEX_UPDATE_POSITION",this.CustomParts.Vertex_Before_PositionUpdated?this.CustomParts.Vertex_Before_PositionUpdated:"").replace("#define CUSTOM_VERTEX_UPDATE_NORMAL",this.CustomParts.Vertex_Before_NormalUpdated?this.CustomParts.Vertex_Before_NormalUpdated:"").replace("#define CUSTOM_VERTEX_MAIN_END",this.CustomParts.Vertex_MainEnd?this.CustomParts.Vertex_MainEnd:"");this.CustomParts.Vertex_After_WorldPosComputed&&(babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[shaderName+
"VertexShader"]=babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[shaderName+"VertexShader"].replace("#define CUSTOM_VERTEX_UPDATE_WORLDPOS",this.CustomParts.Vertex_After_WorldPosComputed));babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[shaderName+"PixelShader"]=this.FragmentShader.replace("#define CUSTOM_FRAGMENT_BEGIN",this.CustomParts.Fragment_Begin?this.CustomParts.Fragment_Begin:"").replace("#define CUSTOM_FRAGMENT_MAIN_BEGIN",this.CustomParts.Fragment_MainBegin?
this.CustomParts.Fragment_MainBegin:"").replace("#define CUSTOM_FRAGMENT_DEFINITIONS",(this._customUniform?this._customUniform.join("\n"):"")+(this.CustomParts.Fragment_Definitions?this.CustomParts.Fragment_Definitions:"")).replace("#define CUSTOM_FRAGMENT_UPDATE_ALBEDO",this.CustomParts.Fragment_Custom_Albedo?this.CustomParts.Fragment_Custom_Albedo:"").replace("#define CUSTOM_FRAGMENT_UPDATE_ALPHA",this.CustomParts.Fragment_Custom_Alpha?this.CustomParts.Fragment_Custom_Alpha:"").replace("#define CUSTOM_FRAGMENT_BEFORE_LIGHTS",
this.CustomParts.Fragment_Before_Lights?this.CustomParts.Fragment_Before_Lights:"").replace("#define CUSTOM_FRAGMENT_UPDATE_METALLICROUGHNESS",this.CustomParts.Fragment_Custom_MetallicRoughness?this.CustomParts.Fragment_Custom_MetallicRoughness:"").replace("#define CUSTOM_FRAGMENT_UPDATE_MICROSURFACE",this.CustomParts.Fragment_Custom_MicroSurface?this.CustomParts.Fragment_Custom_MicroSurface:"").replace("#define CUSTOM_FRAGMENT_BEFORE_FINALCOLORCOMPOSITION",this.CustomParts.Fragment_Before_FinalColorComposition?
this.CustomParts.Fragment_Before_FinalColorComposition:"").replace("#define CUSTOM_FRAGMENT_BEFORE_FRAGCOLOR",this.CustomParts.Fragment_Before_FragColor?this.CustomParts.Fragment_Before_FragColor:"").replace("#define CUSTOM_FRAGMENT_MAIN_END",this.CustomParts.Fragment_MainEnd?this.CustomParts.Fragment_MainEnd:"");this.CustomParts.Fragment_Before_Fog&&(babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[shaderName+"PixelShader"]=babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.Effect.ShadersStore[shaderName+
"PixelShader"].replace("#define CUSTOM_FRAGMENT_BEFORE_FOG",this.CustomParts.Fragment_Before_Fog));this._isCreatedShader=!0;return this._createdShaderName=shaderName};PBRCustomMaterial.prototype.AddUniform=function(name,kind,param){this._customUniform||(this._customUniform=[],this._newUniforms=[],this._newSamplerInstances={},this._newUniformInstances={});param&&(-1!=kind.indexOf("sampler")?this._newSamplerInstances[kind+"-"+name]=param:this._newUniformInstances[kind+"-"+name]=param);this._customUniform.push("uniform "+
kind+" "+name+";");this._newUniforms.push(name);return this};PBRCustomMaterial.prototype.AddAttribute=function(name){this._customAttributes||(this._customAttributes=[]);this._customAttributes.push(name);return this};PBRCustomMaterial.prototype.Fragment_Begin=function(shaderPart){this.CustomParts.Fragment_Begin=shaderPart;return this};PBRCustomMaterial.prototype.Fragment_Definitions=function(shaderPart){this.CustomParts.Fragment_Definitions=shaderPart;return this};PBRCustomMaterial.prototype.Fragment_MainBegin=
function(shaderPart){this.CustomParts.Fragment_MainBegin=shaderPart;return this};PBRCustomMaterial.prototype.Fragment_Custom_Albedo=function(shaderPart){this.CustomParts.Fragment_Custom_Albedo=shaderPart.replace("result","surfaceAlbedo");return this};PBRCustomMaterial.prototype.Fragment_Custom_Alpha=function(shaderPart){this.CustomParts.Fragment_Custom_Alpha=shaderPart.replace("result","alpha");return this};PBRCustomMaterial.prototype.Fragment_Before_Lights=function(shaderPart){this.CustomParts.Fragment_Before_Lights=
shaderPart;return this};PBRCustomMaterial.prototype.Fragment_Custom_MetallicRoughness=function(shaderPart){this.CustomParts.Fragment_Custom_MetallicRoughness=shaderPart;return this};PBRCustomMaterial.prototype.Fragment_Custom_MicroSurface=function(shaderPart){this.CustomParts.Fragment_Custom_MicroSurface=shaderPart;return this};PBRCustomMaterial.prototype.Fragment_Before_Fog=function(shaderPart){this.CustomParts.Fragment_Before_Fog=shaderPart;return this};PBRCustomMaterial.prototype.Fragment_Before_FinalColorComposition=
function(shaderPart){this.CustomParts.Fragment_Before_FinalColorComposition=shaderPart;return this};PBRCustomMaterial.prototype.Fragment_Before_FragColor=function(shaderPart){this.CustomParts.Fragment_Before_FragColor=shaderPart.replace("result","color");return this};PBRCustomMaterial.prototype.Fragment_MainEnd=function(shaderPart){this.CustomParts.Fragment_MainEnd=shaderPart;return this};PBRCustomMaterial.prototype.Vertex_Begin=function(shaderPart){this.CustomParts.Vertex_Begin=shaderPart;return this};
PBRCustomMaterial.prototype.Vertex_Definitions=function(shaderPart){this.CustomParts.Vertex_Definitions=shaderPart;return this};PBRCustomMaterial.prototype.Vertex_MainBegin=function(shaderPart){this.CustomParts.Vertex_MainBegin=shaderPart;return this};PBRCustomMaterial.prototype.Vertex_Before_PositionUpdated=function(shaderPart){this.CustomParts.Vertex_Before_PositionUpdated=shaderPart.replace("result","positionUpdated");return this};PBRCustomMaterial.prototype.Vertex_Before_NormalUpdated=function(shaderPart){this.CustomParts.Vertex_Before_NormalUpdated=
shaderPart.replace("result","normalUpdated");return this};PBRCustomMaterial.prototype.Vertex_After_WorldPosComputed=function(shaderPart){this.CustomParts.Vertex_After_WorldPosComputed=shaderPart;return this};PBRCustomMaterial.prototype.Vertex_MainEnd=function(shaderPart){this.CustomParts.Vertex_MainEnd=shaderPart;return this};PBRCustomMaterial.ShaderIndexer=1;return PBRCustomMaterial}(babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial);(0,babylonjs_Materials_effect__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.PBRCustomMaterial",
PBRCustomMaterial)},"../../../dev/materials/src/fire/fire.fragment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{firePixelShader:()=>firePixelShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.firePixelShader="precision highp float;uniform vec4 vEyePosition;varying vec3 vPositionW;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;uniform sampler2D diffuseSampler;uniform vec2 vDiffuseInfos;\n#endif\nuniform sampler2D distortionSampler;uniform sampler2D opacitySampler;\n#ifdef DIFFUSE\nvarying vec2 vDistortionCoords1;varying vec2 vDistortionCoords2;varying vec2 vDistortionCoords3;\n#endif\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\nvec4 bx2(vec4 x)\n{return vec4(2.0)*x-vec4(1.0);}\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);vec4 baseColor\x3dvec4(1.,1.,1.,1.);float alpha\x3d1.0;\n#ifdef DIFFUSE\nconst float distortionAmount0 \x3d0.092;const float distortionAmount1 \x3d0.092;const float distortionAmount2 \x3d0.092;vec2 heightAttenuation\x3dvec2(0.3,0.39);vec4 noise0\x3dtexture2D(distortionSampler,vDistortionCoords1);vec4 noise1\x3dtexture2D(distortionSampler,vDistortionCoords2);vec4 noise2\x3dtexture2D(distortionSampler,vDistortionCoords3);vec4 noiseSum\x3dbx2(noise0)*distortionAmount0+bx2(noise1)*distortionAmount1+bx2(noise2)*distortionAmount2;vec4 perturbedBaseCoords\x3dvec4(vDiffuseUV,0.0,1.0)+noiseSum*(vDiffuseUV.y*heightAttenuation.x+heightAttenuation.y);vec4 opacityColor\x3dtexture2D(opacitySampler,perturbedBaseCoords.xy);\n#ifdef ALPHATEST\nif (opacityColor.r\x3c0.1)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\nbaseColor\x3dtexture2D(diffuseSampler,perturbedBaseCoords.xy)*2.0;baseColor*\x3dopacityColor;baseColor.rgb*\x3dvDiffuseInfos.y;\n#endif\n#ifdef VERTEXCOLOR\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\nvec3 diffuseBase\x3dvec3(1.0,1.0,1.0);\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\nvec4 color\x3dvec4(baseColor.rgb,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}";
var firePixelShader={name:"firePixelShader",shader:"precision highp float;uniform vec4 vEyePosition;varying vec3 vPositionW;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;uniform sampler2D diffuseSampler;uniform vec2 vDiffuseInfos;\n#endif\nuniform sampler2D distortionSampler;uniform sampler2D opacitySampler;\n#ifdef DIFFUSE\nvarying vec2 vDistortionCoords1;varying vec2 vDistortionCoords2;varying vec2 vDistortionCoords3;\n#endif\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\nvec4 bx2(vec4 x)\n{return vec4(2.0)*x-vec4(1.0);}\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);vec4 baseColor\x3dvec4(1.,1.,1.,1.);float alpha\x3d1.0;\n#ifdef DIFFUSE\nconst float distortionAmount0 \x3d0.092;const float distortionAmount1 \x3d0.092;const float distortionAmount2 \x3d0.092;vec2 heightAttenuation\x3dvec2(0.3,0.39);vec4 noise0\x3dtexture2D(distortionSampler,vDistortionCoords1);vec4 noise1\x3dtexture2D(distortionSampler,vDistortionCoords2);vec4 noise2\x3dtexture2D(distortionSampler,vDistortionCoords3);vec4 noiseSum\x3dbx2(noise0)*distortionAmount0+bx2(noise1)*distortionAmount1+bx2(noise2)*distortionAmount2;vec4 perturbedBaseCoords\x3dvec4(vDiffuseUV,0.0,1.0)+noiseSum*(vDiffuseUV.y*heightAttenuation.x+heightAttenuation.y);vec4 opacityColor\x3dtexture2D(opacitySampler,perturbedBaseCoords.xy);\n#ifdef ALPHATEST\nif (opacityColor.r\x3c0.1)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\nbaseColor\x3dtexture2D(diffuseSampler,perturbedBaseCoords.xy)*2.0;baseColor*\x3dopacityColor;baseColor.rgb*\x3dvDiffuseInfos.y;\n#endif\n#ifdef VERTEXCOLOR\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\nvec3 diffuseBase\x3dvec3(1.0,1.0,1.0);\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\nvec4 color\x3dvec4(baseColor.rgb,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}"}},
"../../../dev/materials/src/fire/fire.vertex.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{fireVertexShader:()=>fireVertexShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.fireVertexShader="precision highp float;attribute vec3 position;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;uniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\nuniform float time;uniform float speed;\n#ifdef DIFFUSE\nvarying vec2 vDistortionCoords1;varying vec2 vDistortionCoords2;varying vec2 vDistortionCoords3;\n#endif\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);gl_Position\x3dviewProjection*worldPos;vPositionW\x3dvec3(worldPos);\n#ifdef DIFFUSE\nvDiffuseUV\x3duv;vDiffuseUV.y-\x3d0.2;\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#ifdef DIFFUSE\nvec3 layerSpeed\x3dvec3(-0.2,-0.52,-0.1)*speed;vDistortionCoords1.x\x3duv.x;vDistortionCoords1.y\x3duv.y+layerSpeed.x*time/1000.0;vDistortionCoords2.x\x3duv.x;vDistortionCoords2.y\x3duv.y+layerSpeed.y*time/1000.0;vDistortionCoords3.x\x3duv.x;vDistortionCoords3.y\x3duv.y+layerSpeed.z*time/1000.0;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n";
var fireVertexShader={name:"fireVertexShader",shader:"precision highp float;attribute vec3 position;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;uniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\nuniform float time;uniform float speed;\n#ifdef DIFFUSE\nvarying vec2 vDistortionCoords1;varying vec2 vDistortionCoords2;varying vec2 vDistortionCoords3;\n#endif\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);gl_Position\x3dviewProjection*worldPos;vPositionW\x3dvec3(worldPos);\n#ifdef DIFFUSE\nvDiffuseUV\x3duv;vDiffuseUV.y-\x3d0.2;\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#ifdef DIFFUSE\nvec3 layerSpeed\x3dvec3(-0.2,-0.52,-0.1)*speed;vDistortionCoords1.x\x3duv.x;vDistortionCoords1.y\x3duv.y+layerSpeed.x*time/1000.0;vDistortionCoords2.x\x3duv.x;vDistortionCoords2.y\x3duv.y+layerSpeed.y*time/1000.0;vDistortionCoords3.x\x3duv.x;vDistortionCoords3.y\x3duv.y+layerSpeed.z*time/1000.0;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n"}},
"../../../dev/materials/src/fire/fireMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{FireMaterial:()=>FireMaterial});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__);
__webpack_require__("../../../dev/materials/src/fire/fire.fragment.ts");__webpack_require__("../../../dev/materials/src/fire/fire.vertex.ts");var FireMaterialDefines=function(_super){function FireMaterialDefines(){var _this=_super.call(this)||this;_this.DIFFUSE=!1;_this.CLIPPLANE=!1;_this.CLIPPLANE2=!1;_this.CLIPPLANE3=!1;_this.CLIPPLANE4=!1;_this.CLIPPLANE5=!1;_this.CLIPPLANE6=!1;_this.ALPHATEST=!1;_this.DEPTHPREPASS=!1;_this.POINTSIZE=!1;_this.FOG=!1;_this.UV1=!1;_this.VERTEXCOLOR=!1;_this.VERTEXALPHA=
!1;_this.BonesPerMesh=0;_this.NUM_BONE_INFLUENCERS=0;_this.INSTANCES=!1;_this.INSTANCESCOLOR=!1;_this.IMAGEPROCESSINGPOSTPROCESS=!1;_this.SKIPFINALCOLORCLAMP=!1;_this.rebuild();return _this}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(FireMaterialDefines,_super);return FireMaterialDefines}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialDefines),FireMaterial=function(_super){function FireMaterial(name,scene){name=_super.call(this,name,scene)||this;name.diffuseColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(1,
1,1);name.speed=1;name._scaledDiffuse=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3;name._lastTime=0;return name}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(FireMaterial,_super);FireMaterial.prototype.needAlphaBlending=function(){return!1};FireMaterial.prototype.needAlphaTesting=function(){return!0};FireMaterial.prototype.getAlphaTestTexture=function(){return null};FireMaterial.prototype.isReadyForSubMesh=function(mesh,subMesh,useInstances){if(this.isFrozen&&subMesh.effect&&
subMesh.effect._wasPreviouslyReady&&subMesh.effect._wasPreviouslyUsingInstances===useInstances)return!0;subMesh.materialDefines||(subMesh.materialDefines=new FireMaterialDefines);var defines=subMesh.materialDefines,scene=this.getScene();if(this._isReadyForSubMesh(subMesh))return!0;var engine=scene.getEngine();if(defines._areTexturesDirty&&(defines._needUVs=!1,this._diffuseTexture&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled))if(this._diffuseTexture.isReady())defines._needUVs=
!0,defines.DIFFUSE=!0;else return!1;defines.ALPHATEST=this._opacityTexture?!0:!1;defines._areMiscDirty&&(defines.POINTSIZE=this.pointsCloud||scene.forcePointsCloud,defines.FOG=scene.fogEnabled&&mesh.applyFog&&scene.fogMode!==babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Scene.FOGMODE_NONE&&this.fogEnabled);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForFrameBoundValues(scene,engine,this,defines,useInstances?!0:!1);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForAttributes(mesh,
defines,!1,!0);if(defines.isDirty){defines.markAsProcessed();scene.resetCachedMaterial();var fallbacks=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.EffectFallbacks;defines.FOG&&fallbacks.addFallback(1,"FOG");0<defines.NUM_BONE_INFLUENCERS&&fallbacks.addCPUSkinningFallback(0,mesh);defines.IMAGEPROCESSINGPOSTPROCESS=scene.imageProcessingConfiguration.applyByPostProcess;var attribs=[babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.PositionKind];defines.UV1&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UVKind);
defines.VERTEXCOLOR&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.ColorKind);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForBones(attribs,mesh,defines,fallbacks);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForInstances(attribs,defines);mesh="world view viewProjection vEyePosition vFogInfos vFogColor pointSize vDiffuseInfos mBones diffuseMatrix time speed".split(" ");(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.addClipPlaneUniforms)(mesh);
var join=defines.toString();subMesh.setEffect(scene.getEngine().createEffect("fire",{attributes:attribs,uniformsNames:mesh,uniformBuffersNames:[],samplers:["diffuseSampler","distortionSampler","opacitySampler"],defines:join,fallbacks,onCompiled:this.onCompiled,onError:this.onError,indexParameters:null,maxSimultaneousLights:4,transformFeedbackVaryings:null},engine),defines,this._materialContext)}if(!subMesh.effect||!subMesh.effect.isReady())return!1;defines._renderId=scene.getRenderId();subMesh.effect._wasPreviouslyReady=
!0;subMesh.effect._wasPreviouslyUsingInstances=!!useInstances;return!0};FireMaterial.prototype.bindForSubMesh=function(world,mesh,subMesh){var scene=this.getScene();subMesh.materialDefines&&(subMesh=subMesh.effect)&&(this._activeEffect=subMesh,this.bindOnlyWorldMatrix(world),this._activeEffect.setMatrix("viewProjection",scene.getTransformMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindBonesParameters(mesh,this._activeEffect),this._mustRebind(scene,subMesh)&&(this._diffuseTexture&&
babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled&&(this._activeEffect.setTexture("diffuseSampler",this._diffuseTexture),this._activeEffect.setFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),this._activeEffect.setMatrix("diffuseMatrix",this._diffuseTexture.getTextureMatrix()),this._activeEffect.setTexture("distortionSampler",this._distortionTexture),this._activeEffect.setTexture("opacitySampler",this._opacityTexture)),
(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.bindClipPlane)(this._activeEffect,this,scene),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),scene.bindEyePosition(subMesh)),this._activeEffect.setColor4("vDiffuseColor",this._scaledDiffuse,this.alpha*mesh.visibility),scene.fogEnabled&&mesh.applyFog&&scene.fogMode!==babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",scene.getViewMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindFogParameters(scene,
mesh,this._activeEffect),this._lastTime+=scene.getEngine().getDeltaTime(),this._activeEffect.setFloat("time",this._lastTime),this._activeEffect.setFloat("speed",this.speed),this._afterBind(mesh,this._activeEffect))};FireMaterial.prototype.getAnimatables=function(){var results=[];this._diffuseTexture&&this._diffuseTexture.animations&&0<this._diffuseTexture.animations.length&&results.push(this._diffuseTexture);this._distortionTexture&&this._distortionTexture.animations&&0<this._distortionTexture.animations.length&&
results.push(this._distortionTexture);this._opacityTexture&&this._opacityTexture.animations&&0<this._opacityTexture.animations.length&&results.push(this._opacityTexture);return results};FireMaterial.prototype.getActiveTextures=function(){var activeTextures=_super.prototype.getActiveTextures.call(this);this._diffuseTexture&&activeTextures.push(this._diffuseTexture);this._distortionTexture&&activeTextures.push(this._distortionTexture);this._opacityTexture&&activeTextures.push(this._opacityTexture);
return activeTextures};FireMaterial.prototype.hasTexture=function(texture){return _super.prototype.hasTexture.call(this,texture)||this._diffuseTexture===texture||this._distortionTexture===texture||this._opacityTexture===texture?!0:!1};FireMaterial.prototype.getClassName=function(){return"FireMaterial"};FireMaterial.prototype.dispose=function(forceDisposeEffect){this._diffuseTexture&&this._diffuseTexture.dispose();this._distortionTexture&&this._distortionTexture.dispose();_super.prototype.dispose.call(this,
forceDisposeEffect)};FireMaterial.prototype.clone=function(name){var _this=this;return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Clone(function(){return new FireMaterial(name,_this.getScene())},this)};FireMaterial.prototype.serialize=function(){var serializationObject=_super.prototype.serialize.call(this);serializationObject.customType="BABYLON.FireMaterial";serializationObject.diffuseColor=this.diffuseColor.asArray();serializationObject.speed=this.speed;this._diffuseTexture&&
(serializationObject._diffuseTexture=this._diffuseTexture.serialize());this._distortionTexture&&(serializationObject._distortionTexture=this._distortionTexture.serialize());this._opacityTexture&&(serializationObject._opacityTexture=this._opacityTexture.serialize());return serializationObject};FireMaterial.Parse=function(source,scene,rootUrl){var material=new FireMaterial(source.name,scene);material.diffuseColor=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3.FromArray(source.diffuseColor);
material.speed=source.speed;material.alpha=source.alpha;material.id=source.id;babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Tags.AddTagsTo(material,source.tags);material.backFaceCulling=source.backFaceCulling;material.wireframe=source.wireframe;source._diffuseTexture&&(material._diffuseTexture=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Texture.Parse(source._diffuseTexture,scene,rootUrl));source._distortionTexture&&(material._distortionTexture=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Texture.Parse(source._distortionTexture,
scene,rootUrl));source._opacityTexture&&(material._opacityTexture=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Texture.Parse(source._opacityTexture,scene,rootUrl));return material};(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture")],FireMaterial.prototype,"_diffuseTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],
FireMaterial.prototype,"diffuseTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("distortionTexture")],FireMaterial.prototype,"_distortionTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],FireMaterial.prototype,"distortionTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("opacityTexture")],
FireMaterial.prototype,"_opacityTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],FireMaterial.prototype,"opacityTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)("diffuse")],FireMaterial.prototype,"diffuseColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],
FireMaterial.prototype,"speed",void 0);return FireMaterial}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.PushMaterial);(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.FireMaterial",FireMaterial)},"../../../dev/materials/src/fire/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{FireMaterial:()=>_fireMaterial__WEBPACK_IMPORTED_MODULE_0__.FireMaterial});
var _fireMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../dev/materials/src/fire/fireMaterial.ts")},"../../../dev/materials/src/fur/fur.fragment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{furPixelShader:()=>furPixelShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.furPixelShader=
"precision highp float;uniform vec4 vEyePosition;uniform vec4 vDiffuseColor;uniform vec4 furColor;uniform float furLength;varying vec3 vPositionW;varying float vfur_length;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;uniform sampler2D diffuseSampler;uniform vec2 vDiffuseInfos;\n#endif\n#ifdef HIGHLEVEL\nuniform float furOffset;uniform float furOcclusion;uniform sampler2D furTexture;varying vec2 vFurUV;\n#endif\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#include\x3cclipPlaneFragmentDeclaration\x3e\nfloat Rand(vec3 rv) {float x\x3ddot(rv,vec3(12.9898,78.233,24.65487));return fract(sin(x)*43758.5453);}\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);vec4 baseColor\x3dfurColor;vec3 diffuseColor\x3dvDiffuseColor.rgb;float alpha\x3dvDiffuseColor.a;\n#ifdef DIFFUSE\nbaseColor*\x3dtexture2D(diffuseSampler,vDiffuseUV);\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\nbaseColor.rgb*\x3dvDiffuseInfos.y;\n#endif\n#ifdef VERTEXCOLOR\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\n#ifdef HIGHLEVEL\nvec4 furTextureColor\x3dtexture2D(furTexture,vec2(vFurUV.x,vFurUV.y));if (furTextureColor.a\x3c\x3d0.0 || furTextureColor.g\x3cfurOffset) {discard;}\nfloat occlusion\x3dmix(0.0,furTextureColor.b*1.2,furOffset);baseColor\x3dvec4(baseColor.xyz*max(occlusion,furOcclusion),1.1-furOffset);\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);lightingInfo info;float shadow\x3d1.;float glossiness\x3d0.;\n#ifdef SPECULARTERM\nvec3 specularBase\x3dvec3(0.,0.,0.);\n#endif\n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase.rgb*baseColor.rgb,0.0,1.0);\n#ifdef HIGHLEVEL\nvec4 color\x3dvec4(finalDiffuse,alpha);\n#else\nfloat r\x3dvfur_length/furLength*0.5;vec4 color\x3dvec4(finalDiffuse*(0.5+r),alpha);\n#endif\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}";
var furPixelShader={name:"furPixelShader",shader:"precision highp float;uniform vec4 vEyePosition;uniform vec4 vDiffuseColor;uniform vec4 furColor;uniform float furLength;varying vec3 vPositionW;varying float vfur_length;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;uniform sampler2D diffuseSampler;uniform vec2 vDiffuseInfos;\n#endif\n#ifdef HIGHLEVEL\nuniform float furOffset;uniform float furOcclusion;uniform sampler2D furTexture;varying vec2 vFurUV;\n#endif\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#include\x3cclipPlaneFragmentDeclaration\x3e\nfloat Rand(vec3 rv) {float x\x3ddot(rv,vec3(12.9898,78.233,24.65487));return fract(sin(x)*43758.5453);}\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);vec4 baseColor\x3dfurColor;vec3 diffuseColor\x3dvDiffuseColor.rgb;float alpha\x3dvDiffuseColor.a;\n#ifdef DIFFUSE\nbaseColor*\x3dtexture2D(diffuseSampler,vDiffuseUV);\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\nbaseColor.rgb*\x3dvDiffuseInfos.y;\n#endif\n#ifdef VERTEXCOLOR\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\n#ifdef HIGHLEVEL\nvec4 furTextureColor\x3dtexture2D(furTexture,vec2(vFurUV.x,vFurUV.y));if (furTextureColor.a\x3c\x3d0.0 || furTextureColor.g\x3cfurOffset) {discard;}\nfloat occlusion\x3dmix(0.0,furTextureColor.b*1.2,furOffset);baseColor\x3dvec4(baseColor.xyz*max(occlusion,furOcclusion),1.1-furOffset);\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);lightingInfo info;float shadow\x3d1.;float glossiness\x3d0.;\n#ifdef SPECULARTERM\nvec3 specularBase\x3dvec3(0.,0.,0.);\n#endif\n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase.rgb*baseColor.rgb,0.0,1.0);\n#ifdef HIGHLEVEL\nvec4 color\x3dvec4(finalDiffuse,alpha);\n#else\nfloat r\x3dvfur_length/furLength*0.5;vec4 color\x3dvec4(finalDiffuse*(0.5+r),alpha);\n#endif\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}"}},
"../../../dev/materials/src/fur/fur.vertex.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{furVertexShader:()=>furVertexShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.furVertexShader="precision highp float;attribute vec3 position;attribute vec3 normal;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\nuniform float furLength;uniform float furAngle;\n#ifdef HIGHLEVEL\nuniform float furOffset;uniform vec3 furGravity;uniform float furTime;uniform float furSpacing;uniform float furDensity;\n#endif\n#ifdef HEIGHTMAP\nuniform sampler2D heightTexture;\n#endif\n#ifdef HIGHLEVEL\nvarying vec2 vFurUV;\n#endif\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;uniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;uniform mat4 diffuseMatrix;uniform vec2 vDiffuseInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\nvarying float vfur_length;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\nfloat Rand(vec3 rv) {float x\x3ddot(rv,vec3(12.9898,78.233,24.65487));return fract(sin(x)*43758.5453);}\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nfloat r\x3dRand(position);\n#ifdef HEIGHTMAP\n#if __VERSION__\x3e100\nvfur_length\x3dfurLength*texture(heightTexture,uv).x;\n#else\nvfur_length\x3dfurLength*texture2D(heightTexture,uv).r;\n#endif\n#else \nvfur_length\x3d(furLength*r);\n#endif\nvec3 tangent1\x3dvec3(normal.y,-normal.x,0);vec3 tangent2\x3dvec3(-normal.z,0,normal.x);r\x3dRand(tangent1*r);float J\x3d(2.0+4.0*r);r\x3dRand(tangent2*r);float K\x3d(2.0+2.0*r);tangent1\x3dtangent1*J+tangent2*K;tangent1\x3dnormalize(tangent1);vec3 newPosition\x3dposition+normal*vfur_length*cos(furAngle)+tangent1*vfur_length*sin(furAngle);\n#ifdef HIGHLEVEL\nvec3 forceDirection\x3dvec3(0.0,0.0,0.0);forceDirection.x\x3dsin(furTime+position.x*0.05)*0.2;forceDirection.y\x3dcos(furTime*0.7+position.y*0.04)*0.2;forceDirection.z\x3dsin(furTime*0.7+position.z*0.04)*0.2;vec3 displacement\x3dvec3(0.0,0.0,0.0);displacement\x3dfurGravity+forceDirection;float displacementFactor\x3dpow(furOffset,3.0);vec3 aNormal\x3dnormal;aNormal.xyz+\x3ddisplacement*displacementFactor;newPosition\x3dvec3(newPosition.x,newPosition.y,newPosition.z)+(normalize(aNormal)*furOffset*furSpacing);\n#endif\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\ngl_Position\x3dviewProjection*finalWorld*vec4(newPosition,1.0);vec4 worldPos\x3dfinalWorld*vec4(newPosition,1.0);vPositionW\x3dvec3(worldPos);\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vDiffuseInfos.x\x3d\x3d0.)\n{vDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv,1.0,0.0));}\nelse\n{vDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv2,1.0,0.0));}\n#ifdef HIGHLEVEL\nvFurUV\x3dvDiffuseUV*furDensity;\n#endif\n#else\n#ifdef HIGHLEVEL\nvFurUV\x3duv*furDensity;\n#endif\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n";
var furVertexShader={name:"furVertexShader",shader:"precision highp float;attribute vec3 position;attribute vec3 normal;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\nuniform float furLength;uniform float furAngle;\n#ifdef HIGHLEVEL\nuniform float furOffset;uniform vec3 furGravity;uniform float furTime;uniform float furSpacing;uniform float furDensity;\n#endif\n#ifdef HEIGHTMAP\nuniform sampler2D heightTexture;\n#endif\n#ifdef HIGHLEVEL\nvarying vec2 vFurUV;\n#endif\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;uniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;uniform mat4 diffuseMatrix;uniform vec2 vDiffuseInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\nvarying float vfur_length;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\nfloat Rand(vec3 rv) {float x\x3ddot(rv,vec3(12.9898,78.233,24.65487));return fract(sin(x)*43758.5453);}\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nfloat r\x3dRand(position);\n#ifdef HEIGHTMAP\n#if __VERSION__\x3e100\nvfur_length\x3dfurLength*texture(heightTexture,uv).x;\n#else\nvfur_length\x3dfurLength*texture2D(heightTexture,uv).r;\n#endif\n#else \nvfur_length\x3d(furLength*r);\n#endif\nvec3 tangent1\x3dvec3(normal.y,-normal.x,0);vec3 tangent2\x3dvec3(-normal.z,0,normal.x);r\x3dRand(tangent1*r);float J\x3d(2.0+4.0*r);r\x3dRand(tangent2*r);float K\x3d(2.0+2.0*r);tangent1\x3dtangent1*J+tangent2*K;tangent1\x3dnormalize(tangent1);vec3 newPosition\x3dposition+normal*vfur_length*cos(furAngle)+tangent1*vfur_length*sin(furAngle);\n#ifdef HIGHLEVEL\nvec3 forceDirection\x3dvec3(0.0,0.0,0.0);forceDirection.x\x3dsin(furTime+position.x*0.05)*0.2;forceDirection.y\x3dcos(furTime*0.7+position.y*0.04)*0.2;forceDirection.z\x3dsin(furTime*0.7+position.z*0.04)*0.2;vec3 displacement\x3dvec3(0.0,0.0,0.0);displacement\x3dfurGravity+forceDirection;float displacementFactor\x3dpow(furOffset,3.0);vec3 aNormal\x3dnormal;aNormal.xyz+\x3ddisplacement*displacementFactor;newPosition\x3dvec3(newPosition.x,newPosition.y,newPosition.z)+(normalize(aNormal)*furOffset*furSpacing);\n#endif\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\ngl_Position\x3dviewProjection*finalWorld*vec4(newPosition,1.0);vec4 worldPos\x3dfinalWorld*vec4(newPosition,1.0);vPositionW\x3dvec3(worldPos);\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vDiffuseInfos.x\x3d\x3d0.)\n{vDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv,1.0,0.0));}\nelse\n{vDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv2,1.0,0.0));}\n#ifdef HIGHLEVEL\nvFurUV\x3dvDiffuseUV*furDensity;\n#endif\n#else\n#ifdef HIGHLEVEL\nvFurUV\x3duv*furDensity;\n#endif\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n"}},
"../../../dev/materials/src/fur/furMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{FurMaterial:()=>FurMaterial});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__);
__webpack_require__("../../../dev/materials/src/fur/fur.fragment.ts");__webpack_require__("../../../dev/materials/src/fur/fur.vertex.ts");var FurMaterialDefines=function(_super){function FurMaterialDefines(){var _this=_super.call(this)||this;_this.DIFFUSE=!1;_this.HEIGHTMAP=!1;_this.CLIPPLANE=!1;_this.CLIPPLANE2=!1;_this.CLIPPLANE3=!1;_this.CLIPPLANE4=!1;_this.CLIPPLANE5=!1;_this.CLIPPLANE6=!1;_this.ALPHATEST=!1;_this.DEPTHPREPASS=!1;_this.POINTSIZE=!1;_this.FOG=!1;_this.NORMAL=!1;_this.UV1=!1;_this.UV2=
!1;_this.VERTEXCOLOR=!1;_this.VERTEXALPHA=!1;_this.NUM_BONE_INFLUENCERS=0;_this.BonesPerMesh=0;_this.INSTANCES=!1;_this.INSTANCESCOLOR=!1;_this.HIGHLEVEL=!1;_this.IMAGEPROCESSINGPOSTPROCESS=!1;_this.SKIPFINALCOLORCLAMP=!1;_this.rebuild();return _this}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(FurMaterialDefines,_super);return FurMaterialDefines}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialDefines),FurMaterial=function(_super){function FurMaterial(name,scene){name=_super.call(this,
name,scene)||this;name.diffuseColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(1,1,1);name.furLength=1;name.furAngle=0;name.furColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(.44,.21,.02);name.furOffset=0;name.furSpacing=12;name.furGravity=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,0,0);name.furSpeed=100;name.furDensity=20;name.furOcclusion=0;name._disableLighting=!1;name._maxSimultaneousLights=4;name.highLevelFur=!0;name._furTime=
0;return name}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(FurMaterial,_super);Object.defineProperty(FurMaterial.prototype,"furTime",{get:function(){return this._furTime},set:function(furTime){this._furTime=furTime},enumerable:!1,configurable:!0});FurMaterial.prototype.needAlphaBlending=function(){return 1>this.alpha};FurMaterial.prototype.needAlphaTesting=function(){return!1};FurMaterial.prototype.getAlphaTestTexture=function(){return null};FurMaterial.prototype.updateFur=function(){for(var i=
1;i<this._meshes.length;i++){var offsetFur=this._meshes[i].material;offsetFur.furLength=this.furLength;offsetFur.furAngle=this.furAngle;offsetFur.furGravity=this.furGravity;offsetFur.furSpacing=this.furSpacing;offsetFur.furSpeed=this.furSpeed;offsetFur.furColor=this.furColor;offsetFur.diffuseTexture=this.diffuseTexture;offsetFur.furTexture=this.furTexture;offsetFur.highLevelFur=this.highLevelFur;offsetFur.furTime=this.furTime;offsetFur.furDensity=this.furDensity}};FurMaterial.prototype.isReadyForSubMesh=
function(mesh,subMesh,useInstances){if(this.isFrozen&&subMesh.effect&&subMesh.effect._wasPreviouslyReady&&subMesh.effect._wasPreviouslyUsingInstances===useInstances)return!0;subMesh.materialDefines||(subMesh.materialDefines=new FurMaterialDefines);var defines=subMesh.materialDefines,scene=this.getScene();if(this._isReadyForSubMesh(subMesh))return!0;var engine=scene.getEngine();if(defines._areTexturesDirty&&scene.texturesEnabled){if(this.diffuseTexture&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled)if(this.diffuseTexture.isReady())defines._needUVs=
!0,defines.DIFFUSE=!0;else return!1;if(this.heightTexture&&engine.getCaps().maxVertexTextureImageUnits)if(this.heightTexture.isReady())defines._needUVs=!0,defines.HEIGHTMAP=!0;else return!1}this.highLevelFur!==defines.HIGHLEVEL&&(defines.HIGHLEVEL=!0,defines.markAsUnprocessed());babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForMisc(mesh,scene,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(mesh),defines);defines._needNormals=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForLights(scene,
mesh,defines,!1,this._maxSimultaneousLights,this._disableLighting);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForFrameBoundValues(scene,engine,this,defines,useInstances?!0:!1);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForAttributes(mesh,defines,!0,!0);if(defines.isDirty){defines.markAsProcessed();scene.resetCachedMaterial();var fallbacks=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.EffectFallbacks;defines.FOG&&
fallbacks.addFallback(1,"FOG");babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.HandleFallbacksForShadows(defines,fallbacks,this.maxSimultaneousLights);0<defines.NUM_BONE_INFLUENCERS&&fallbacks.addCPUSkinningFallback(0,mesh);defines.IMAGEPROCESSINGPOSTPROCESS=scene.imageProcessingConfiguration.applyByPostProcess;var attribs=[babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.PositionKind];defines.NORMAL&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.NormalKind);
defines.UV1&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UVKind);defines.UV2&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UV2Kind);defines.VERTEXCOLOR&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.ColorKind);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForBones(attribs,mesh,defines,fallbacks);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForInstances(attribs,
defines);mesh=defines.toString();var uniforms="world view viewProjection vEyePosition vLightsType vDiffuseColor vFogInfos vFogColor pointSize vDiffuseInfos mBones diffuseMatrix furLength furAngle furColor furOffset furGravity furTime furSpacing furDensity furOcclusion".split(" ");(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.addClipPlaneUniforms)(uniforms);var samplers=["diffuseSampler","heightTexture","furTexture"],uniformBuffers=[];babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:uniforms,
uniformBuffersNames:uniformBuffers,samplers,defines,maxSimultaneousLights:this.maxSimultaneousLights});subMesh.setEffect(scene.getEngine().createEffect("fur",{attributes:attribs,uniformsNames:uniforms,uniformBuffersNames:uniformBuffers,samplers,defines:mesh,fallbacks,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this.maxSimultaneousLights}},engine),defines,this._materialContext)}if(!subMesh.effect||!subMesh.effect.isReady())return!1;defines._renderId=scene.getRenderId();
subMesh.effect._wasPreviouslyReady=!0;subMesh.effect._wasPreviouslyUsingInstances=!!useInstances;return!0};FurMaterial.prototype.bindForSubMesh=function(world,mesh,subMesh){var scene=this.getScene(),defines=subMesh.materialDefines;defines&&(subMesh=subMesh.effect)&&(this._activeEffect=subMesh,this.bindOnlyWorldMatrix(world),this._activeEffect.setMatrix("viewProjection",scene.getTransformMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindBonesParameters(mesh,this._activeEffect),
scene.getCachedMaterial()!==this&&(this._diffuseTexture&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled&&(this._activeEffect.setTexture("diffuseSampler",this._diffuseTexture),this._activeEffect.setFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),this._activeEffect.setMatrix("diffuseMatrix",this._diffuseTexture.getTextureMatrix())),this._heightTexture&&this._activeEffect.setTexture("heightTexture",this._heightTexture),
(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.bindClipPlane)(this._activeEffect,this,scene),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),scene.bindEyePosition(subMesh)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*mesh.visibility),scene.lightsEnabled&&!this.disableLighting&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindLights(scene,mesh,this._activeEffect,defines,this.maxSimultaneousLights),scene.fogEnabled&&
mesh.applyFog&&scene.fogMode!==babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",scene.getViewMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindFogParameters(scene,mesh,this._activeEffect),this._activeEffect.setFloat("furLength",this.furLength),this._activeEffect.setFloat("furAngle",this.furAngle),this._activeEffect.setColor4("furColor",this.furColor,1),this.highLevelFur&&(this._activeEffect.setVector3("furGravity",
this.furGravity),this._activeEffect.setFloat("furOffset",this.furOffset),this._activeEffect.setFloat("furSpacing",this.furSpacing),this._activeEffect.setFloat("furDensity",this.furDensity),this._activeEffect.setFloat("furOcclusion",this.furOcclusion),this._furTime+=this.getScene().getEngine().getDeltaTime()/this.furSpeed,this._activeEffect.setFloat("furTime",this._furTime),this._activeEffect.setTexture("furTexture",this.furTexture)),this._afterBind(mesh,this._activeEffect))};FurMaterial.prototype.getAnimatables=
function(){var results=[];this.diffuseTexture&&this.diffuseTexture.animations&&0<this.diffuseTexture.animations.length&&results.push(this.diffuseTexture);this.heightTexture&&this.heightTexture.animations&&0<this.heightTexture.animations.length&&results.push(this.heightTexture);return results};FurMaterial.prototype.getActiveTextures=function(){var activeTextures=_super.prototype.getActiveTextures.call(this);this._diffuseTexture&&activeTextures.push(this._diffuseTexture);this._heightTexture&&activeTextures.push(this._heightTexture);
return activeTextures};FurMaterial.prototype.hasTexture=function(texture){return _super.prototype.hasTexture.call(this,texture)||this.diffuseTexture===texture||this._heightTexture===texture?!0:!1};FurMaterial.prototype.dispose=function(forceDisposeEffect){this.diffuseTexture&&this.diffuseTexture.dispose();if(this._meshes)for(var i=1;i<this._meshes.length;i++){var mat=this._meshes[i].material;mat&&mat.dispose(forceDisposeEffect);this._meshes[i].dispose()}_super.prototype.dispose.call(this,forceDisposeEffect)};
FurMaterial.prototype.clone=function(name){var _this=this;return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Clone(function(){return new FurMaterial(name,_this.getScene())},this)};FurMaterial.prototype.serialize=function(){var serializationObject=_super.prototype.serialize.call(this);serializationObject.customType="BABYLON.FurMaterial";this._meshes&&(serializationObject.sourceMeshName=this._meshes[0].name,serializationObject.quality=this._meshes.length);return serializationObject};
FurMaterial.prototype.getClassName=function(){return"FurMaterial"};FurMaterial.Parse=function(source,scene,rootUrl){var material=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Parse(function(){return new FurMaterial(source.name,scene)},source,scene,rootUrl);source.sourceMeshName&&material.highLevelFur&&scene.executeWhenReady(function(){var sourceMesh=scene.getMeshByName(source.sourceMeshName);if(sourceMesh){var furTexture=FurMaterial.GenerateTexture("Fur Texture",scene);
material.furTexture=furTexture;FurMaterial.FurifyMesh(sourceMesh,source.quality)}});return material};FurMaterial.GenerateTexture=function(name,scene){name=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.DynamicTexture("FurTexture "+name,256,scene,!0);scene=name.getContext();for(var i=0;2E4>i;++i)scene.fillStyle="rgba(255, "+Math.floor(255*Math.random())+", "+Math.floor(255*Math.random())+", 1)",scene.fillRect(Math.random()*name.getSize().width,Math.random()*name.getSize().height,2,2);name.update(!1);
name.wrapU=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Texture.WRAP_ADDRESSMODE;name.wrapV=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Texture.WRAP_ADDRESSMODE;return name};FurMaterial.FurifyMesh=function(sourceMesh,quality){var meshes=[sourceMesh],mat=sourceMesh.material,i;if(!(mat instanceof FurMaterial))throw"The material of the source mesh must be a Fur Material";for(i=1;i<quality;i++){var offsetFur=new FurMaterial(mat.name+i,sourceMesh.getScene());sourceMesh.getScene().materials.pop();
babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Tags.EnableFor(offsetFur);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Tags.AddTagsTo(offsetFur,"furShellMaterial");offsetFur.furLength=mat.furLength;offsetFur.furAngle=mat.furAngle;offsetFur.furGravity=mat.furGravity;offsetFur.furSpacing=mat.furSpacing;offsetFur.furSpeed=mat.furSpeed;offsetFur.furColor=mat.furColor;offsetFur.diffuseTexture=mat.diffuseTexture;offsetFur.furOffset=i/quality;offsetFur.furTexture=mat.furTexture;offsetFur.highLevelFur=
mat.highLevelFur;offsetFur.furTime=mat.furTime;offsetFur.furDensity=mat.furDensity;var offsetMesh=sourceMesh.clone(sourceMesh.name+i);offsetMesh.material=offsetFur;offsetMesh.skeleton=sourceMesh.skeleton;offsetMesh.position=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector3.Zero();meshes.push(offsetMesh)}for(i=1;i<meshes.length;i++)meshes[i].parent=sourceMesh;return sourceMesh.material._meshes=meshes};(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture")],
FurMaterial.prototype,"_diffuseTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],FurMaterial.prototype,"diffuseTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("heightTexture")],FurMaterial.prototype,"_heightTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],
FurMaterial.prototype,"heightTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],FurMaterial.prototype,"diffuseColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],FurMaterial.prototype,"furLength",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],
FurMaterial.prototype,"furAngle",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],FurMaterial.prototype,"furColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],FurMaterial.prototype,"furOffset",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],
FurMaterial.prototype,"furSpacing",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsVector3)()],FurMaterial.prototype,"furGravity",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],FurMaterial.prototype,"furSpeed",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],
FurMaterial.prototype,"furDensity",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],FurMaterial.prototype,"furOcclusion",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("disableLighting")],FurMaterial.prototype,"_disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],
FurMaterial.prototype,"disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("maxSimultaneousLights")],FurMaterial.prototype,"_maxSimultaneousLights",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],FurMaterial.prototype,"maxSimultaneousLights",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],
FurMaterial.prototype,"highLevelFur",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],FurMaterial.prototype,"furTime",null);return FurMaterial}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.PushMaterial);(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.FurMaterial",FurMaterial)},"../../../dev/materials/src/fur/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>
{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{FurMaterial:()=>_furMaterial__WEBPACK_IMPORTED_MODULE_0__.FurMaterial});var _furMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../dev/materials/src/fur/furMaterial.ts")},"../../../dev/materials/src/gradient/gradient.fragment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{gradientPixelShader:()=>
gradientPixelShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.gradientPixelShader="precision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 topColor;\nuniform vec4 bottomColor;\nuniform float offset;\nuniform float scale;\nuniform float smoothness;\nvarying vec3 vPositionW;\nvarying vec3 vPosition;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0]\n#include\x3c__decl__lightFragment\x3e[1]\n#include\x3c__decl__lightFragment\x3e[2]\n#include\x3c__decl__lightFragment\x3e[3]\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nfloat h\x3dvPosition.y*scale+offset;\nfloat mysmoothness\x3dclamp(smoothness,0.01,max(smoothness,10.));\nvec4 baseColor\x3dmix(bottomColor,topColor,max(pow(max(h,0.0),mysmoothness),0.0));\nvec3 diffuseColor\x3dbaseColor.rgb;\nfloat alpha\x3dbaseColor.a;\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\n#ifdef VERTEXCOLOR\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\n#ifdef EMISSIVE\nvec3 diffuseBase\x3dbaseColor.rgb;\n#else\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\n#endif\nlightingInfo info;\nfloat shadow\x3d1.;\nfloat glossiness\x3d0.;\n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\nvec4 color\x3dvec4(finalDiffuse,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}\n";
var gradientPixelShader={name:"gradientPixelShader",shader:"precision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 topColor;\nuniform vec4 bottomColor;\nuniform float offset;\nuniform float scale;\nuniform float smoothness;\nvarying vec3 vPositionW;\nvarying vec3 vPosition;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0]\n#include\x3c__decl__lightFragment\x3e[1]\n#include\x3c__decl__lightFragment\x3e[2]\n#include\x3c__decl__lightFragment\x3e[3]\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nfloat h\x3dvPosition.y*scale+offset;\nfloat mysmoothness\x3dclamp(smoothness,0.01,max(smoothness,10.));\nvec4 baseColor\x3dmix(bottomColor,topColor,max(pow(max(h,0.0),mysmoothness),0.0));\nvec3 diffuseColor\x3dbaseColor.rgb;\nfloat alpha\x3dbaseColor.a;\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\n#ifdef VERTEXCOLOR\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\n#ifdef EMISSIVE\nvec3 diffuseBase\x3dbaseColor.rgb;\n#else\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\n#endif\nlightingInfo info;\nfloat shadow\x3d1.;\nfloat glossiness\x3d0.;\n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\nvec4 color\x3dvec4(finalDiffuse,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}\n"}},
"../../../dev/materials/src/gradient/gradient.vertex.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{gradientVertexShader:()=>gradientVertexShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.gradientVertexShader="precision highp float;\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\nvarying vec3 vPosition;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\ngl_Position\x3dviewProjection*worldPos;\nvPositionW\x3dvec3(worldPos);\nvPosition\x3dposition;\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n";
var gradientVertexShader={name:"gradientVertexShader",shader:"precision highp float;\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\nvarying vec3 vPosition;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\ngl_Position\x3dviewProjection*worldPos;\nvPositionW\x3dvec3(worldPos);\nvPosition\x3dposition;\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n"}},
"../../../dev/materials/src/gradient/gradientMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{GradientMaterial:()=>GradientMaterial});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__);
__webpack_require__("../../../dev/materials/src/gradient/gradient.fragment.ts");__webpack_require__("../../../dev/materials/src/gradient/gradient.vertex.ts");var GradientMaterialDefines=function(_super){function GradientMaterialDefines(){var _this=_super.call(this)||this;_this.EMISSIVE=!1;_this.CLIPPLANE=!1;_this.CLIPPLANE2=!1;_this.CLIPPLANE3=!1;_this.CLIPPLANE4=!1;_this.CLIPPLANE5=!1;_this.CLIPPLANE6=!1;_this.ALPHATEST=!1;_this.DEPTHPREPASS=!1;_this.POINTSIZE=!1;_this.FOG=!1;_this.NORMAL=!1;_this.UV1=
!1;_this.UV2=!1;_this.VERTEXCOLOR=!1;_this.VERTEXALPHA=!1;_this.NUM_BONE_INFLUENCERS=0;_this.BonesPerMesh=0;_this.INSTANCES=!1;_this.INSTANCESCOLOR=!1;_this.IMAGEPROCESSINGPOSTPROCESS=!1;_this.SKIPFINALCOLORCLAMP=!1;_this.rebuild();return _this}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(GradientMaterialDefines,_super);return GradientMaterialDefines}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialDefines),GradientMaterial=function(_super){function GradientMaterial(name,scene){name=
_super.call(this,name,scene)||this;name._maxSimultaneousLights=4;name.topColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(1,0,0);name.topColorAlpha=1;name.bottomColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(0,0,1);name.bottomColorAlpha=1;name.offset=0;name.scale=1;name.smoothness=1;name._disableLighting=!1;return name}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(GradientMaterial,_super);GradientMaterial.prototype.needAlphaBlending=function(){return 1>
this.alpha||1>this.topColorAlpha||1>this.bottomColorAlpha};GradientMaterial.prototype.needAlphaTesting=function(){return!0};GradientMaterial.prototype.getAlphaTestTexture=function(){return null};GradientMaterial.prototype.isReadyForSubMesh=function(mesh,subMesh,useInstances){if(this.isFrozen&&subMesh.effect&&subMesh.effect._wasPreviouslyReady&&subMesh.effect._wasPreviouslyUsingInstances===useInstances)return!0;subMesh.materialDefines||(subMesh.materialDefines=new GradientMaterialDefines);var defines=
subMesh.materialDefines,scene=this.getScene();if(this._isReadyForSubMesh(subMesh))return!0;var engine=scene.getEngine();babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForFrameBoundValues(scene,engine,this,defines,useInstances?!0:!1);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForMisc(mesh,scene,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(mesh),defines);defines._needNormals=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForLights(scene,
mesh,defines,!1,this._maxSimultaneousLights,this._disableLighting);defines.EMISSIVE=this._disableLighting;babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForAttributes(mesh,defines,!1,!0);if(defines.isDirty){defines.markAsProcessed();scene.resetCachedMaterial();var fallbacks=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.EffectFallbacks;defines.FOG&&fallbacks.addFallback(1,"FOG");babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.HandleFallbacksForShadows(defines,
fallbacks);0<defines.NUM_BONE_INFLUENCERS&&fallbacks.addCPUSkinningFallback(0,mesh);defines.IMAGEPROCESSINGPOSTPROCESS=scene.imageProcessingConfiguration.applyByPostProcess;var attribs=[babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.PositionKind];defines.NORMAL&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.NormalKind);defines.UV1&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UVKind);defines.UV2&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UV2Kind);
defines.VERTEXCOLOR&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.ColorKind);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForBones(attribs,mesh,defines,fallbacks);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForInstances(attribs,defines);mesh=defines.toString();var uniforms="world view viewProjection vEyePosition vLightsType vFogInfos vFogColor pointSize mBones topColor bottomColor offset smoothness scale".split(" ");
(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.addClipPlaneUniforms)(uniforms);var samplers=[],uniformBuffers=[];babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:uniforms,uniformBuffersNames:uniformBuffers,samplers,defines,maxSimultaneousLights:4});subMesh.setEffect(scene.getEngine().createEffect("gradient",{attributes:attribs,uniformsNames:uniforms,uniformBuffersNames:uniformBuffers,samplers,defines:mesh,fallbacks,onCompiled:this.onCompiled,
onError:this.onError,indexParameters:{maxSimultaneousLights:4}},engine),defines,this._materialContext)}if(!subMesh.effect||!subMesh.effect.isReady())return!1;defines._renderId=scene.getRenderId();subMesh.effect._wasPreviouslyReady=!0;subMesh.effect._wasPreviouslyUsingInstances=!!useInstances;return!0};GradientMaterial.prototype.bindForSubMesh=function(world,mesh,subMesh){var scene=this.getScene(),defines=subMesh.materialDefines;defines&&(subMesh=subMesh.effect)&&(this._activeEffect=subMesh,this.bindOnlyWorldMatrix(world),
this._activeEffect.setMatrix("viewProjection",scene.getTransformMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindBonesParameters(mesh,subMesh),this._mustRebind(scene,subMesh)&&((0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.bindClipPlane)(subMesh,this,scene),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),scene.bindEyePosition(subMesh)),scene.lightsEnabled&&!this.disableLighting&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindLights(scene,
mesh,this._activeEffect,defines,this.maxSimultaneousLights),scene.fogEnabled&&mesh.applyFog&&scene.fogMode!==babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",scene.getViewMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindFogParameters(scene,mesh,this._activeEffect),this._activeEffect.setColor4("topColor",this.topColor,this.topColorAlpha),this._activeEffect.setColor4("bottomColor",this.bottomColor,this.bottomColorAlpha),
this._activeEffect.setFloat("offset",this.offset),this._activeEffect.setFloat("scale",this.scale),this._activeEffect.setFloat("smoothness",this.smoothness),this._afterBind(mesh,this._activeEffect))};GradientMaterial.prototype.getAnimatables=function(){return[]};GradientMaterial.prototype.dispose=function(forceDisposeEffect){_super.prototype.dispose.call(this,forceDisposeEffect)};GradientMaterial.prototype.clone=function(name){var _this=this;return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Clone(function(){return new GradientMaterial(name,
_this.getScene())},this)};GradientMaterial.prototype.serialize=function(){var serializationObject=_super.prototype.serialize.call(this);serializationObject.customType="BABYLON.GradientMaterial";return serializationObject};GradientMaterial.prototype.getClassName=function(){return"GradientMaterial"};GradientMaterial.Parse=function(source,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Parse(function(){return new GradientMaterial(source.name,scene)},source,
scene,rootUrl)};(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("maxSimultaneousLights")],GradientMaterial.prototype,"_maxSimultaneousLights",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],GradientMaterial.prototype,"maxSimultaneousLights",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],
GradientMaterial.prototype,"topColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],GradientMaterial.prototype,"topColorAlpha",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],GradientMaterial.prototype,"bottomColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],
GradientMaterial.prototype,"bottomColorAlpha",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],GradientMaterial.prototype,"offset",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],GradientMaterial.prototype,"scale",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],
GradientMaterial.prototype,"smoothness",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("disableLighting")],GradientMaterial.prototype,"_disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],GradientMaterial.prototype,"disableLighting",void 0);return GradientMaterial}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.PushMaterial);
(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.GradientMaterial",GradientMaterial)},"../../../dev/materials/src/gradient/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{GradientMaterial:()=>_gradientMaterial__WEBPACK_IMPORTED_MODULE_0__.GradientMaterial});var _gradientMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../dev/materials/src/gradient/gradientMaterial.ts")},
"../../../dev/materials/src/grid/grid.fragment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{gridPixelShader:()=>gridPixelShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.gridPixelShader="#extension GL_OES_standard_derivatives : enable\n#define SQRT2 1.41421356\n#define PI 3.14159\nprecision highp float;\nuniform float visibility;\nuniform vec3 mainColor;\nuniform vec3 lineColor;\nuniform vec4 gridControl;\nuniform vec3 gridOffset;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n#include\x3cfogFragmentDeclaration\x3e\n#ifdef OPACITY\nvarying vec2 vOpacityUV;\nuniform sampler2D opacitySampler;\nuniform vec2 vOpacityInfos;\n#endif\nfloat getDynamicVisibility(float position) {\nfloat majorGridFrequency\x3dgridControl.y;\nif (floor(position+0.5)\x3d\x3dfloor(position/majorGridFrequency+0.5)*majorGridFrequency)\n{\nreturn 1.0;\n} \nreturn gridControl.z;\n}\nfloat getAnisotropicAttenuation(float differentialLength) {\nconst float maxNumberOfLines\x3d10.0;\nreturn clamp(1.0/(differentialLength+1.0)-1.0/maxNumberOfLines,0.0,1.0);\n}\nfloat isPointOnLine(float position,float differentialLength) {\nfloat fractionPartOfPosition\x3dposition-floor(position+0.5); \nfractionPartOfPosition/\x3ddifferentialLength; \nfractionPartOfPosition\x3dclamp(fractionPartOfPosition,-1.,1.);\nfloat result\x3d0.5+0.5*cos(fractionPartOfPosition*PI); \nreturn result; \n}\nfloat contributionOnAxis(float position) {\nfloat differentialLength\x3dlength(vec2(dFdx(position),dFdy(position)));\ndifferentialLength*\x3dSQRT2; \nfloat result\x3disPointOnLine(position,differentialLength);\nfloat dynamicVisibility\x3dgetDynamicVisibility(position);\nresult*\x3ddynamicVisibility;\nfloat anisotropicAttenuation\x3dgetAnisotropicAttenuation(differentialLength);\nresult*\x3danisotropicAttenuation;\nreturn result;\n}\nfloat normalImpactOnAxis(float x) {\nfloat normalImpact\x3dclamp(1.0-3.0*abs(x*x*x),0.0,1.0);\nreturn normalImpact;\n}\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\nfloat gridRatio\x3dgridControl.x;\nvec3 gridPos\x3d(vPosition+gridOffset.xyz)/gridRatio;\nfloat x\x3dcontributionOnAxis(gridPos.x);\nfloat y\x3dcontributionOnAxis(gridPos.y);\nfloat z\x3dcontributionOnAxis(gridPos.z);\nvec3 normal\x3dnormalize(vNormal);\nx*\x3dnormalImpactOnAxis(normal.x);\ny*\x3dnormalImpactOnAxis(normal.y);\nz*\x3dnormalImpactOnAxis(normal.z);\n#ifdef MAX_LINE \nfloat grid\x3dclamp(max(max(x,y),z),0.,1.);\n#else\nfloat grid\x3dclamp(x+y+z,0.,1.);\n#endif\nvec3 color\x3dmix(mainColor,lineColor,grid);\n#ifdef FOG\n#include\x3cfogFragment\x3e\n#endif\nfloat opacity\x3d1.0;\n#ifdef TRANSPARENT\nopacity\x3dclamp(grid,0.08,gridControl.w*grid);\n#endif \n#ifdef OPACITY\nopacity*\x3dtexture2D(opacitySampler,vOpacityUV).a;\n#endif \ngl_FragColor\x3dvec4(color.rgb,opacity*visibility);\n#ifdef TRANSPARENT\n#ifdef PREMULTIPLYALPHA\ngl_FragColor.rgb*\x3dopacity;\n#endif\n#else \n#endif\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}\n";
var gridPixelShader={name:"gridPixelShader",shader:"#extension GL_OES_standard_derivatives : enable\n#define SQRT2 1.41421356\n#define PI 3.14159\nprecision highp float;\nuniform float visibility;\nuniform vec3 mainColor;\nuniform vec3 lineColor;\nuniform vec4 gridControl;\nuniform vec3 gridOffset;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n#include\x3cfogFragmentDeclaration\x3e\n#ifdef OPACITY\nvarying vec2 vOpacityUV;\nuniform sampler2D opacitySampler;\nuniform vec2 vOpacityInfos;\n#endif\nfloat getDynamicVisibility(float position) {\nfloat majorGridFrequency\x3dgridControl.y;\nif (floor(position+0.5)\x3d\x3dfloor(position/majorGridFrequency+0.5)*majorGridFrequency)\n{\nreturn 1.0;\n} \nreturn gridControl.z;\n}\nfloat getAnisotropicAttenuation(float differentialLength) {\nconst float maxNumberOfLines\x3d10.0;\nreturn clamp(1.0/(differentialLength+1.0)-1.0/maxNumberOfLines,0.0,1.0);\n}\nfloat isPointOnLine(float position,float differentialLength) {\nfloat fractionPartOfPosition\x3dposition-floor(position+0.5); \nfractionPartOfPosition/\x3ddifferentialLength; \nfractionPartOfPosition\x3dclamp(fractionPartOfPosition,-1.,1.);\nfloat result\x3d0.5+0.5*cos(fractionPartOfPosition*PI); \nreturn result; \n}\nfloat contributionOnAxis(float position) {\nfloat differentialLength\x3dlength(vec2(dFdx(position),dFdy(position)));\ndifferentialLength*\x3dSQRT2; \nfloat result\x3disPointOnLine(position,differentialLength);\nfloat dynamicVisibility\x3dgetDynamicVisibility(position);\nresult*\x3ddynamicVisibility;\nfloat anisotropicAttenuation\x3dgetAnisotropicAttenuation(differentialLength);\nresult*\x3danisotropicAttenuation;\nreturn result;\n}\nfloat normalImpactOnAxis(float x) {\nfloat normalImpact\x3dclamp(1.0-3.0*abs(x*x*x),0.0,1.0);\nreturn normalImpact;\n}\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\nfloat gridRatio\x3dgridControl.x;\nvec3 gridPos\x3d(vPosition+gridOffset.xyz)/gridRatio;\nfloat x\x3dcontributionOnAxis(gridPos.x);\nfloat y\x3dcontributionOnAxis(gridPos.y);\nfloat z\x3dcontributionOnAxis(gridPos.z);\nvec3 normal\x3dnormalize(vNormal);\nx*\x3dnormalImpactOnAxis(normal.x);\ny*\x3dnormalImpactOnAxis(normal.y);\nz*\x3dnormalImpactOnAxis(normal.z);\n#ifdef MAX_LINE \nfloat grid\x3dclamp(max(max(x,y),z),0.,1.);\n#else\nfloat grid\x3dclamp(x+y+z,0.,1.);\n#endif\nvec3 color\x3dmix(mainColor,lineColor,grid);\n#ifdef FOG\n#include\x3cfogFragment\x3e\n#endif\nfloat opacity\x3d1.0;\n#ifdef TRANSPARENT\nopacity\x3dclamp(grid,0.08,gridControl.w*grid);\n#endif \n#ifdef OPACITY\nopacity*\x3dtexture2D(opacitySampler,vOpacityUV).a;\n#endif \ngl_FragColor\x3dvec4(color.rgb,opacity*visibility);\n#ifdef TRANSPARENT\n#ifdef PREMULTIPLYALPHA\ngl_FragColor.rgb*\x3dopacity;\n#endif\n#else \n#endif\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}\n"}},
"../../../dev/materials/src/grid/grid.vertex.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{gridVertexShader:()=>gridVertexShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.gridVertexShader="precision highp float;\nattribute vec3 position;\nattribute vec3 normal;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 projection;\nuniform mat4 view;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n#include\x3cfogVertexDeclaration\x3e\n#ifdef OPACITY\nvarying vec2 vOpacityUV;\nuniform mat4 opacityMatrix;\nuniform vec2 vOpacityInfos;\n#endif\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\n#include\x3cfogVertex\x3e\nvec4 cameraSpacePosition\x3dview*worldPos;\ngl_Position\x3dprojection*cameraSpacePosition;\n#ifdef OPACITY\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\nif (vOpacityInfos.x\x3d\x3d0.)\n{\nvOpacityUV\x3dvec2(opacityMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvOpacityUV\x3dvec2(opacityMatrix*vec4(uv2,1.0,0.0));\n}\n#endif \nvPosition\x3dposition;\nvNormal\x3dnormal;\n#define CUSTOM_VERTEX_MAIN_END\n}";
var gridVertexShader={name:"gridVertexShader",shader:"precision highp float;\nattribute vec3 position;\nattribute vec3 normal;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 projection;\nuniform mat4 view;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n#include\x3cfogVertexDeclaration\x3e\n#ifdef OPACITY\nvarying vec2 vOpacityUV;\nuniform mat4 opacityMatrix;\nuniform vec2 vOpacityInfos;\n#endif\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\n#include\x3cfogVertex\x3e\nvec4 cameraSpacePosition\x3dview*worldPos;\ngl_Position\x3dprojection*cameraSpacePosition;\n#ifdef OPACITY\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\nif (vOpacityInfos.x\x3d\x3d0.)\n{\nvOpacityUV\x3dvec2(opacityMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvOpacityUV\x3dvec2(opacityMatrix*vec4(uv2,1.0,0.0));\n}\n#endif \nvPosition\x3dposition;\nvNormal\x3dnormal;\n#define CUSTOM_VERTEX_MAIN_END\n}"}},
"../../../dev/materials/src/grid/gridMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{GridMaterial:()=>GridMaterial});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__);
__webpack_require__("../../../dev/materials/src/grid/grid.fragment.ts");__webpack_require__("../../../dev/materials/src/grid/grid.vertex.ts");var GridMaterialDefines=function(_super){function GridMaterialDefines(){var _this=_super.call(this)||this;_this.OPACITY=!1;_this.TRANSPARENT=!1;_this.FOG=!1;_this.PREMULTIPLYALPHA=!1;_this.MAX_LINE=!1;_this.UV1=!1;_this.UV2=!1;_this.INSTANCES=!1;_this.THIN_INSTANCES=!1;_this.IMAGEPROCESSINGPOSTPROCESS=!1;_this.SKIPFINALCOLORCLAMP=!1;_this.rebuild();return _this}
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(GridMaterialDefines,_super);return GridMaterialDefines}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialDefines),GridMaterial=function(_super){function GridMaterial(name,scene){name=_super.call(this,name,scene)||this;name.mainColor=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3.Black();name.lineColor=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3.Teal();name.gridRatio=1;name.gridOffset=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector3.Zero();
name.majorUnitFrequency=10;name.minorUnitVisibility=.33;name.opacity=1;name.preMultiplyAlpha=!1;name.useMaxLine=!1;name._gridControl=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector4(name.gridRatio,name.majorUnitFrequency,name.minorUnitVisibility,name.opacity);return name}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(GridMaterial,_super);GridMaterial.prototype.needAlphaBlending=function(){return 1>this.opacity||this._opacityTexture&&this._opacityTexture.isReady()};GridMaterial.prototype.needAlphaBlendingForMesh=
function(mesh){return 1>mesh.visibility||this.needAlphaBlending()};GridMaterial.prototype.isReadyForSubMesh=function(mesh,subMesh,useInstances){if(this.isFrozen&&subMesh.effect&&subMesh.effect._wasPreviouslyReady&&subMesh.effect._wasPreviouslyUsingInstances===useInstances)return!0;subMesh.materialDefines||(subMesh.materialDefines=new GridMaterialDefines);var defines=subMesh.materialDefines,scene=this.getScene();if(this._isReadyForSubMesh(subMesh))return!0;defines.TRANSPARENT!==1>this.opacity&&(defines.TRANSPARENT=
!defines.TRANSPARENT,defines.markAsUnprocessed());defines.PREMULTIPLYALPHA!=this.preMultiplyAlpha&&(defines.PREMULTIPLYALPHA=!defines.PREMULTIPLYALPHA,defines.markAsUnprocessed());defines.MAX_LINE!==this.useMaxLine&&(defines.MAX_LINE=!defines.MAX_LINE,defines.markAsUnprocessed());if(defines._areTexturesDirty&&(defines._needUVs=!1,scene.texturesEnabled&&this._opacityTexture&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.OpacityTextureEnabled))if(this._opacityTexture.isReady())defines._needUVs=
!0,defines.OPACITY=!0;else return!1;babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForMisc(mesh,scene,!1,!1,this.fogEnabled,!1,defines);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForFrameBoundValues(scene,scene.getEngine(),this,defines,!!useInstances);if(defines.isDirty){defines.markAsProcessed();scene.resetCachedMaterial();babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForAttributes(mesh,
defines,!1,!1);mesh=[babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.PositionKind,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.NormalKind];defines.UV1&&mesh.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UVKind);defines.UV2&&mesh.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UV2Kind);defines.IMAGEPROCESSINGPOSTPROCESS=scene.imageProcessingConfiguration.applyByPostProcess;babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForInstances(mesh,
defines);var join=defines.toString();subMesh.setEffect(scene.getEngine().createEffect("grid",mesh,"projection mainColor lineColor gridControl gridOffset vFogInfos vFogColor world view opacityMatrix vOpacityInfos visibility".split(" "),["opacitySampler"],join,void 0,this.onCompiled,this.onError),defines,this._materialContext)}if(!subMesh.effect||!subMesh.effect.isReady())return!1;defines._renderId=scene.getRenderId();subMesh.effect._wasPreviouslyReady=!0;subMesh.effect._wasPreviouslyUsingInstances=
!!useInstances;return!0};GridMaterial.prototype.bindForSubMesh=function(world,mesh,subMesh){var scene=this.getScene(),defines=subMesh.materialDefines;defines&&(subMesh=subMesh.effect)&&(this._activeEffect=subMesh,this._activeEffect.setFloat("visibility",mesh.visibility),defines.INSTANCES&&!defines.THIN_INSTANCE||this.bindOnlyWorldMatrix(world),this._activeEffect.setMatrix("view",scene.getViewMatrix()),this._activeEffect.setMatrix("projection",scene.getProjectionMatrix()),this._mustRebind(scene,subMesh)&&
(this._activeEffect.setColor3("mainColor",this.mainColor),this._activeEffect.setColor3("lineColor",this.lineColor),this._activeEffect.setVector3("gridOffset",this.gridOffset),this._gridControl.x=this.gridRatio,this._gridControl.y=Math.round(this.majorUnitFrequency),this._gridControl.z=this.minorUnitVisibility,this._gridControl.w=this.opacity,this._activeEffect.setVector4("gridControl",this._gridControl),this._opacityTexture&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.OpacityTextureEnabled&&
(this._activeEffect.setTexture("opacitySampler",this._opacityTexture),this._activeEffect.setFloat2("vOpacityInfos",this._opacityTexture.coordinatesIndex,this._opacityTexture.level),this._activeEffect.setMatrix("opacityMatrix",this._opacityTexture.getTextureMatrix()))),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindFogParameters(scene,mesh,this._activeEffect),this._afterBind(mesh,this._activeEffect))};GridMaterial.prototype.dispose=function(forceDisposeEffect){_super.prototype.dispose.call(this,
forceDisposeEffect)};GridMaterial.prototype.clone=function(name){var _this=this;return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Clone(function(){return new GridMaterial(name,_this.getScene())},this)};GridMaterial.prototype.serialize=function(){var serializationObject=_super.prototype.serialize.call(this);serializationObject.customType="BABYLON.GridMaterial";return serializationObject};GridMaterial.prototype.getClassName=function(){return"GridMaterial"};GridMaterial.Parse=
function(source,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Parse(function(){return new GridMaterial(source.name,scene)},source,scene,rootUrl)};(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],GridMaterial.prototype,"mainColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],
GridMaterial.prototype,"lineColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],GridMaterial.prototype,"gridRatio",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsVector3)()],GridMaterial.prototype,"gridOffset",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],
GridMaterial.prototype,"majorUnitFrequency",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],GridMaterial.prototype,"minorUnitVisibility",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],GridMaterial.prototype,"opacity",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],
GridMaterial.prototype,"preMultiplyAlpha",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],GridMaterial.prototype,"useMaxLine",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("opacityTexture")],GridMaterial.prototype,"_opacityTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],
GridMaterial.prototype,"opacityTexture",void 0);return GridMaterial}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.PushMaterial);(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.GridMaterial",GridMaterial)},"../../../dev/materials/src/grid/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{GridMaterial:()=>_gridMaterial__WEBPACK_IMPORTED_MODULE_0__.GridMaterial});
var _gridMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../dev/materials/src/grid/gridMaterial.ts")},"../../../dev/materials/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{CellMaterial:()=>_cell_index__WEBPACK_IMPORTED_MODULE_0__.CellMaterial,CustomMaterial:()=>_custom_index__WEBPACK_IMPORTED_MODULE_1__.CustomMaterial,CustomShaderStructure:()=>_custom_index__WEBPACK_IMPORTED_MODULE_1__.CustomShaderStructure,
FireMaterial:()=>_fire_index__WEBPACK_IMPORTED_MODULE_2__.FireMaterial,FurMaterial:()=>_fur_index__WEBPACK_IMPORTED_MODULE_3__.FurMaterial,GradientMaterial:()=>_gradient_index__WEBPACK_IMPORTED_MODULE_4__.GradientMaterial,GridMaterial:()=>_grid_index__WEBPACK_IMPORTED_MODULE_5__.GridMaterial,LavaMaterial:()=>_lava_index__WEBPACK_IMPORTED_MODULE_6__.LavaMaterial,MixMaterial:()=>_mix_index__WEBPACK_IMPORTED_MODULE_7__.MixMaterial,NormalMaterial:()=>_normal_index__WEBPACK_IMPORTED_MODULE_8__.NormalMaterial,
PBRCustomMaterial:()=>_custom_index__WEBPACK_IMPORTED_MODULE_1__.PBRCustomMaterial,ShaderAlebdoParts:()=>_custom_index__WEBPACK_IMPORTED_MODULE_1__.ShaderAlebdoParts,ShaderSpecialParts:()=>_custom_index__WEBPACK_IMPORTED_MODULE_1__.ShaderSpecialParts,ShadowOnlyMaterial:()=>_shadowOnly_index__WEBPACK_IMPORTED_MODULE_9__.ShadowOnlyMaterial,SimpleMaterial:()=>_simple_index__WEBPACK_IMPORTED_MODULE_10__.SimpleMaterial,SkyMaterial:()=>_sky_index__WEBPACK_IMPORTED_MODULE_11__.SkyMaterial,TerrainMaterial:()=>
_terrain_index__WEBPACK_IMPORTED_MODULE_12__.TerrainMaterial,TriPlanarMaterial:()=>_triPlanar_index__WEBPACK_IMPORTED_MODULE_13__.TriPlanarMaterial,WaterMaterial:()=>_water_index__WEBPACK_IMPORTED_MODULE_14__.WaterMaterial});var _cell_index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../dev/materials/src/cell/index.ts"),_custom_index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../dev/materials/src/custom/index.ts"),_fire_index__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../../dev/materials/src/fire/index.ts"),
_fur_index__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../dev/materials/src/fur/index.ts"),_gradient_index__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../../dev/materials/src/gradient/index.ts"),_grid_index__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../../dev/materials/src/grid/index.ts"),_lava_index__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../../dev/materials/src/lava/index.ts"),_mix_index__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../../dev/materials/src/mix/index.ts"),
_normal_index__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../../dev/materials/src/normal/index.ts"),_shadowOnly_index__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../../dev/materials/src/shadowOnly/index.ts"),_simple_index__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../../dev/materials/src/simple/index.ts"),_sky_index__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../../dev/materials/src/sky/index.ts"),_terrain_index__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../../dev/materials/src/terrain/index.ts"),
_triPlanar_index__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../../dev/materials/src/triPlanar/index.ts"),_water_index__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../../dev/materials/src/water/index.ts")},"../../../dev/materials/src/lava/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{LavaMaterial:()=>_lavaMaterial__WEBPACK_IMPORTED_MODULE_0__.LavaMaterial});var _lavaMaterial__WEBPACK_IMPORTED_MODULE_0__=
__webpack_require__("../../../dev/materials/src/lava/lavaMaterial.ts")},"../../../dev/materials/src/lava/lava.fragment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{lavaPixelShader:()=>lavaPixelShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.lavaPixelShader="precision highp float;uniform vec4 vEyePosition;uniform vec4 vDiffuseColor;varying vec3 vPositionW;uniform float time;uniform float speed;uniform float movingSpeed;uniform vec3 fogColor;uniform sampler2D noiseTexture;uniform float fogDensity;varying float noise;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0]\n#include\x3c__decl__lightFragment\x3e[1]\n#include\x3c__decl__lightFragment\x3e[2]\n#include\x3c__decl__lightFragment\x3e[3]\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;uniform sampler2D diffuseSampler;uniform vec2 vDiffuseInfos;\n#endif\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\nfloat random( vec3 scale,float seed ){return fract( sin( dot( gl_FragCoord.xyz+seed,scale ) )*43758.5453+seed ) ;}\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);vec4 baseColor\x3dvec4(1.,1.,1.,1.);vec3 diffuseColor\x3dvDiffuseColor.rgb;float alpha\x3dvDiffuseColor.a;\n#ifdef DIFFUSE\nvec4 noiseTex\x3dtexture2D( noiseTexture,vDiffuseUV );vec2 T1\x3dvDiffuseUV+vec2( 1.5,-1.5 )*time *0.02;vec2 T2\x3dvDiffuseUV+vec2( -0.5,2.0 )*time*0.01*speed;T1.x+\x3dnoiseTex.x*2.0;T1.y+\x3dnoiseTex.y*2.0;T2.x-\x3dnoiseTex.y*0.2+time*0.001*movingSpeed;T2.y+\x3dnoiseTex.z*0.2+time*0.002*movingSpeed;float p\x3dtexture2D( noiseTexture,T1*3.0 ).a;vec4 lavaColor\x3dtexture2D( diffuseSampler,T2*4.0);vec4 temp\x3dlavaColor*( vec4( p,p,p,p )*2. )+( lavaColor*lavaColor-0.1 );baseColor\x3dtemp;float depth\x3dgl_FragCoord.z*4.0;const float LOG2\x3d1.442695;float fogFactor\x3dexp2(-fogDensity*fogDensity*depth*depth*LOG2 );fogFactor\x3d1.0-clamp( fogFactor,0.0,1.0 );baseColor\x3dmix( baseColor,vec4( fogColor,baseColor.w ),fogFactor );diffuseColor\x3dbaseColor.rgb;\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\nbaseColor.rgb*\x3dvDiffuseInfos.y;\n#endif\n#ifdef VERTEXCOLOR\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\n#ifdef UNLIT\nvec3 diffuseBase\x3dvec3(1.,1.,1.);\n#else\nvec3 diffuseBase\x3dvec3(0.,0.,0.);lightingInfo info;float shadow\x3d1.;float glossiness\x3d0.;\n#include\x3clightFragment\x3e[0]\n#include\x3clightFragment\x3e[1]\n#include\x3clightFragment\x3e[2]\n#include\x3clightFragment\x3e[3]\n#endif\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;vec4 color\x3dvec4(finalDiffuse,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}";
var lavaPixelShader={name:"lavaPixelShader",shader:"precision highp float;uniform vec4 vEyePosition;uniform vec4 vDiffuseColor;varying vec3 vPositionW;uniform float time;uniform float speed;uniform float movingSpeed;uniform vec3 fogColor;uniform sampler2D noiseTexture;uniform float fogDensity;varying float noise;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0]\n#include\x3c__decl__lightFragment\x3e[1]\n#include\x3c__decl__lightFragment\x3e[2]\n#include\x3c__decl__lightFragment\x3e[3]\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;uniform sampler2D diffuseSampler;uniform vec2 vDiffuseInfos;\n#endif\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\nfloat random( vec3 scale,float seed ){return fract( sin( dot( gl_FragCoord.xyz+seed,scale ) )*43758.5453+seed ) ;}\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);vec4 baseColor\x3dvec4(1.,1.,1.,1.);vec3 diffuseColor\x3dvDiffuseColor.rgb;float alpha\x3dvDiffuseColor.a;\n#ifdef DIFFUSE\nvec4 noiseTex\x3dtexture2D( noiseTexture,vDiffuseUV );vec2 T1\x3dvDiffuseUV+vec2( 1.5,-1.5 )*time *0.02;vec2 T2\x3dvDiffuseUV+vec2( -0.5,2.0 )*time*0.01*speed;T1.x+\x3dnoiseTex.x*2.0;T1.y+\x3dnoiseTex.y*2.0;T2.x-\x3dnoiseTex.y*0.2+time*0.001*movingSpeed;T2.y+\x3dnoiseTex.z*0.2+time*0.002*movingSpeed;float p\x3dtexture2D( noiseTexture,T1*3.0 ).a;vec4 lavaColor\x3dtexture2D( diffuseSampler,T2*4.0);vec4 temp\x3dlavaColor*( vec4( p,p,p,p )*2. )+( lavaColor*lavaColor-0.1 );baseColor\x3dtemp;float depth\x3dgl_FragCoord.z*4.0;const float LOG2\x3d1.442695;float fogFactor\x3dexp2(-fogDensity*fogDensity*depth*depth*LOG2 );fogFactor\x3d1.0-clamp( fogFactor,0.0,1.0 );baseColor\x3dmix( baseColor,vec4( fogColor,baseColor.w ),fogFactor );diffuseColor\x3dbaseColor.rgb;\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\nbaseColor.rgb*\x3dvDiffuseInfos.y;\n#endif\n#ifdef VERTEXCOLOR\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\n#ifdef UNLIT\nvec3 diffuseBase\x3dvec3(1.,1.,1.);\n#else\nvec3 diffuseBase\x3dvec3(0.,0.,0.);lightingInfo info;float shadow\x3d1.;float glossiness\x3d0.;\n#include\x3clightFragment\x3e[0]\n#include\x3clightFragment\x3e[1]\n#include\x3clightFragment\x3e[2]\n#include\x3clightFragment\x3e[3]\n#endif\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;vec4 color\x3dvec4(finalDiffuse,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}"}},
"../../../dev/materials/src/lava/lava.vertex.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{lavaVertexShader:()=>lavaVertexShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.lavaVertexShader="precision highp float;uniform float time;uniform float lowFrequencySpeed;varying float noise;attribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;uniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;uniform mat4 diffuseMatrix;uniform vec2 vDiffuseInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n/* NOISE FUNCTIONS */\nvec3 mod289(vec3 x)\n{return x-floor(x*(1.0/289.0))*289.0;}\nvec4 mod289(vec4 x)\n{return x-floor(x*(1.0/289.0))*289.0;}\nvec4 permute(vec4 x)\n{return mod289(((x*34.0)+1.0)*x);}\nvec4 taylorInvSqrt(vec4 r)\n{return 1.79284291400159-0.85373472095314*r;}\nvec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\nfloat pnoise(vec3 P,vec3 rep)\n{vec3 Pi0\x3dmod(floor(P),rep); \nvec3 Pi1\x3dmod(Pi0+vec3(1.0),rep); \nPi0\x3dmod289(Pi0);Pi1\x3dmod289(Pi1);vec3 Pf0\x3dfract(P); \nvec3 Pf1\x3dPf0-vec3(1.0); \nvec4 ix\x3dvec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy\x3dvec4(Pi0.yy,Pi1.yy);vec4 iz0\x3dPi0.zzzz;vec4 iz1\x3dPi1.zzzz;vec4 ixy\x3dpermute(permute(ix)+iy);vec4 ixy0\x3dpermute(ixy+iz0);vec4 ixy1\x3dpermute(ixy+iz1);vec4 gx0\x3dixy0*(1.0/7.0);vec4 gy0\x3dfract(floor(gx0)*(1.0/7.0))-0.5;gx0\x3dfract(gx0);vec4 gz0\x3dvec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0\x3dstep(gz0,vec4(0.0));gx0-\x3dsz0*(step(0.0,gx0)-0.5);gy0-\x3dsz0*(step(0.0,gy0)-0.5);vec4 gx1\x3dixy1*(1.0/7.0);vec4 gy1\x3dfract(floor(gx1)*(1.0/7.0))-0.5;gx1\x3dfract(gx1);vec4 gz1\x3dvec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1\x3dstep(gz1,vec4(0.0));gx1-\x3dsz1*(step(0.0,gx1)-0.5);gy1-\x3dsz1*(step(0.0,gy1)-0.5);vec3 g000\x3dvec3(gx0.x,gy0.x,gz0.x);vec3 g100\x3dvec3(gx0.y,gy0.y,gz0.y);vec3 g010\x3dvec3(gx0.z,gy0.z,gz0.z);vec3 g110\x3dvec3(gx0.w,gy0.w,gz0.w);vec3 g001\x3dvec3(gx1.x,gy1.x,gz1.x);vec3 g101\x3dvec3(gx1.y,gy1.y,gz1.y);vec3 g011\x3dvec3(gx1.z,gy1.z,gz1.z);vec3 g111\x3dvec3(gx1.w,gy1.w,gz1.w);vec4 norm0\x3dtaylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*\x3dnorm0.x;g010*\x3dnorm0.y;g100*\x3dnorm0.z;g110*\x3dnorm0.w;vec4 norm1\x3dtaylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*\x3dnorm1.x;g011*\x3dnorm1.y;g101*\x3dnorm1.z;g111*\x3dnorm1.w;float n000\x3ddot(g000,Pf0);float n100\x3ddot(g100,vec3(Pf1.x,Pf0.yz));float n010\x3ddot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110\x3ddot(g110,vec3(Pf1.xy,Pf0.z));float n001\x3ddot(g001,vec3(Pf0.xy,Pf1.z));float n101\x3ddot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011\x3ddot(g011,vec3(Pf0.x,Pf1.yz));float n111\x3ddot(g111,Pf1);vec3 fade_xyz\x3dfade(Pf0);vec4 n_z\x3dmix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz\x3dmix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz\x3dmix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}\n/* END FUNCTION */\nfloat turbulence( vec3 p ) {float w\x3d100.0;float t\x3d-.5;for (float f\x3d1.0 ; f\x3c\x3d10.0 ; f++ ){float power\x3dpow( 2.0,f );t+\x3dabs( pnoise( vec3( power*p ),vec3( 10.0,10.0,10.0 ) )/power );}\nreturn t;}\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\n#ifdef NORMAL\nnoise\x3d10.0* -.10*turbulence( .5*normal+time*1.15 );float b\x3dlowFrequencySpeed*5.0*pnoise( 0.05*position +vec3(time*1.025),vec3( 100.0 ) );float displacement\x3d- 1.5*noise+b;vec3 newPosition\x3dposition+normal*displacement;gl_Position\x3dviewProjection*finalWorld*vec4( newPosition,1.0 );vec4 worldPos\x3dfinalWorld*vec4(newPosition,1.0);vPositionW\x3dvec3(worldPos);vNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vDiffuseInfos.x\x3d\x3d0.)\n{vDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv,1.0,0.0));}\nelse\n{vDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv2,1.0,0.0));}\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}";
var lavaVertexShader={name:"lavaVertexShader",shader:"precision highp float;uniform float time;uniform float lowFrequencySpeed;varying float noise;attribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;uniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;uniform mat4 diffuseMatrix;uniform vec2 vDiffuseInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n/* NOISE FUNCTIONS */\nvec3 mod289(vec3 x)\n{return x-floor(x*(1.0/289.0))*289.0;}\nvec4 mod289(vec4 x)\n{return x-floor(x*(1.0/289.0))*289.0;}\nvec4 permute(vec4 x)\n{return mod289(((x*34.0)+1.0)*x);}\nvec4 taylorInvSqrt(vec4 r)\n{return 1.79284291400159-0.85373472095314*r;}\nvec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\nfloat pnoise(vec3 P,vec3 rep)\n{vec3 Pi0\x3dmod(floor(P),rep); \nvec3 Pi1\x3dmod(Pi0+vec3(1.0),rep); \nPi0\x3dmod289(Pi0);Pi1\x3dmod289(Pi1);vec3 Pf0\x3dfract(P); \nvec3 Pf1\x3dPf0-vec3(1.0); \nvec4 ix\x3dvec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy\x3dvec4(Pi0.yy,Pi1.yy);vec4 iz0\x3dPi0.zzzz;vec4 iz1\x3dPi1.zzzz;vec4 ixy\x3dpermute(permute(ix)+iy);vec4 ixy0\x3dpermute(ixy+iz0);vec4 ixy1\x3dpermute(ixy+iz1);vec4 gx0\x3dixy0*(1.0/7.0);vec4 gy0\x3dfract(floor(gx0)*(1.0/7.0))-0.5;gx0\x3dfract(gx0);vec4 gz0\x3dvec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0\x3dstep(gz0,vec4(0.0));gx0-\x3dsz0*(step(0.0,gx0)-0.5);gy0-\x3dsz0*(step(0.0,gy0)-0.5);vec4 gx1\x3dixy1*(1.0/7.0);vec4 gy1\x3dfract(floor(gx1)*(1.0/7.0))-0.5;gx1\x3dfract(gx1);vec4 gz1\x3dvec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1\x3dstep(gz1,vec4(0.0));gx1-\x3dsz1*(step(0.0,gx1)-0.5);gy1-\x3dsz1*(step(0.0,gy1)-0.5);vec3 g000\x3dvec3(gx0.x,gy0.x,gz0.x);vec3 g100\x3dvec3(gx0.y,gy0.y,gz0.y);vec3 g010\x3dvec3(gx0.z,gy0.z,gz0.z);vec3 g110\x3dvec3(gx0.w,gy0.w,gz0.w);vec3 g001\x3dvec3(gx1.x,gy1.x,gz1.x);vec3 g101\x3dvec3(gx1.y,gy1.y,gz1.y);vec3 g011\x3dvec3(gx1.z,gy1.z,gz1.z);vec3 g111\x3dvec3(gx1.w,gy1.w,gz1.w);vec4 norm0\x3dtaylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*\x3dnorm0.x;g010*\x3dnorm0.y;g100*\x3dnorm0.z;g110*\x3dnorm0.w;vec4 norm1\x3dtaylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*\x3dnorm1.x;g011*\x3dnorm1.y;g101*\x3dnorm1.z;g111*\x3dnorm1.w;float n000\x3ddot(g000,Pf0);float n100\x3ddot(g100,vec3(Pf1.x,Pf0.yz));float n010\x3ddot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110\x3ddot(g110,vec3(Pf1.xy,Pf0.z));float n001\x3ddot(g001,vec3(Pf0.xy,Pf1.z));float n101\x3ddot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011\x3ddot(g011,vec3(Pf0.x,Pf1.yz));float n111\x3ddot(g111,Pf1);vec3 fade_xyz\x3dfade(Pf0);vec4 n_z\x3dmix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz\x3dmix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz\x3dmix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}\n/* END FUNCTION */\nfloat turbulence( vec3 p ) {float w\x3d100.0;float t\x3d-.5;for (float f\x3d1.0 ; f\x3c\x3d10.0 ; f++ ){float power\x3dpow( 2.0,f );t+\x3dabs( pnoise( vec3( power*p ),vec3( 10.0,10.0,10.0 ) )/power );}\nreturn t;}\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\n#ifdef NORMAL\nnoise\x3d10.0* -.10*turbulence( .5*normal+time*1.15 );float b\x3dlowFrequencySpeed*5.0*pnoise( 0.05*position +vec3(time*1.025),vec3( 100.0 ) );float displacement\x3d- 1.5*noise+b;vec3 newPosition\x3dposition+normal*displacement;gl_Position\x3dviewProjection*finalWorld*vec4( newPosition,1.0 );vec4 worldPos\x3dfinalWorld*vec4(newPosition,1.0);vPositionW\x3dvec3(worldPos);vNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vDiffuseInfos.x\x3d\x3d0.)\n{vDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv,1.0,0.0));}\nelse\n{vDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv2,1.0,0.0));}\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}"}},
"../../../dev/materials/src/lava/lavaMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{LavaMaterial:()=>LavaMaterial});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__);
__webpack_require__("../../../dev/materials/src/lava/lava.fragment.ts");__webpack_require__("../../../dev/materials/src/lava/lava.vertex.ts");var LavaMaterialDefines=function(_super){function LavaMaterialDefines(){var _this=_super.call(this)||this;_this.DIFFUSE=!1;_this.CLIPPLANE=!1;_this.CLIPPLANE2=!1;_this.CLIPPLANE3=!1;_this.CLIPPLANE4=!1;_this.CLIPPLANE5=!1;_this.CLIPPLANE6=!1;_this.ALPHATEST=!1;_this.DEPTHPREPASS=!1;_this.POINTSIZE=!1;_this.FOG=!1;_this.LIGHT0=!1;_this.LIGHT1=!1;_this.LIGHT2=
!1;_this.LIGHT3=!1;_this.SPOTLIGHT0=!1;_this.SPOTLIGHT1=!1;_this.SPOTLIGHT2=!1;_this.SPOTLIGHT3=!1;_this.HEMILIGHT0=!1;_this.HEMILIGHT1=!1;_this.HEMILIGHT2=!1;_this.HEMILIGHT3=!1;_this.DIRLIGHT0=!1;_this.DIRLIGHT1=!1;_this.DIRLIGHT2=!1;_this.DIRLIGHT3=!1;_this.POINTLIGHT0=!1;_this.POINTLIGHT1=!1;_this.POINTLIGHT2=!1;_this.POINTLIGHT3=!1;_this.SHADOW0=!1;_this.SHADOW1=!1;_this.SHADOW2=!1;_this.SHADOW3=!1;_this.SHADOWS=!1;_this.SHADOWESM0=!1;_this.SHADOWESM1=!1;_this.SHADOWESM2=!1;_this.SHADOWESM3=
!1;_this.SHADOWPOISSON0=!1;_this.SHADOWPOISSON1=!1;_this.SHADOWPOISSON2=!1;_this.SHADOWPOISSON3=!1;_this.SHADOWPCF0=!1;_this.SHADOWPCF1=!1;_this.SHADOWPCF2=!1;_this.SHADOWPCF3=!1;_this.SHADOWPCSS0=!1;_this.SHADOWPCSS1=!1;_this.SHADOWPCSS2=!1;_this.SHADOWPCSS3=!1;_this.NORMAL=!1;_this.UV1=!1;_this.UV2=!1;_this.VERTEXCOLOR=!1;_this.VERTEXALPHA=!1;_this.NUM_BONE_INFLUENCERS=0;_this.BonesPerMesh=0;_this.INSTANCES=!1;_this.INSTANCESCOLOR=!1;_this.UNLIT=!1;_this.IMAGEPROCESSINGPOSTPROCESS=!1;_this.SKIPFINALCOLORCLAMP=
!1;_this.rebuild();return _this}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(LavaMaterialDefines,_super);return LavaMaterialDefines}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialDefines),LavaMaterial=function(_super){function LavaMaterial(name,scene){name=_super.call(this,name,scene)||this;name.speed=1;name.movingSpeed=1;name.lowFrequencySpeed=1;name.fogDensity=.15;name._lastTime=0;name.diffuseColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(1,1,1);name._disableLighting=
!1;name._unlit=!1;name._maxSimultaneousLights=4;name._scaledDiffuse=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3;return name}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(LavaMaterial,_super);LavaMaterial.prototype.needAlphaBlending=function(){return 1>this.alpha};LavaMaterial.prototype.needAlphaTesting=function(){return!1};LavaMaterial.prototype.getAlphaTestTexture=function(){return null};LavaMaterial.prototype.isReadyForSubMesh=function(mesh,subMesh,useInstances){if(this.isFrozen&&
subMesh.effect&&subMesh.effect._wasPreviouslyReady&&subMesh.effect._wasPreviouslyUsingInstances===useInstances)return!0;subMesh.materialDefines||(subMesh.materialDefines=new LavaMaterialDefines);var defines=subMesh.materialDefines,scene=this.getScene();if(this._isReadyForSubMesh(subMesh))return!0;var engine=scene.getEngine();if(defines._areTexturesDirty&&(defines._needUVs=!1,scene.texturesEnabled&&this._diffuseTexture&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled))if(this._diffuseTexture.isReady())defines._needUVs=
!0,defines.DIFFUSE=!0;else return!1;babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForMisc(mesh,scene,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(mesh),defines);defines._needNormals=!0;babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForLights(scene,mesh,defines,!1,this._maxSimultaneousLights,this._disableLighting);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForFrameBoundValues(scene,
engine,this,defines,useInstances?!0:!1);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForAttributes(mesh,defines,!0,!0);if(defines.isDirty){defines.markAsProcessed();scene.resetCachedMaterial();var fallbacks=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.EffectFallbacks;defines.FOG&&fallbacks.addFallback(1,"FOG");babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.HandleFallbacksForShadows(defines,fallbacks);0<defines.NUM_BONE_INFLUENCERS&&
fallbacks.addCPUSkinningFallback(0,mesh);defines.IMAGEPROCESSINGPOSTPROCESS=scene.imageProcessingConfiguration.applyByPostProcess;var attribs=[babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.PositionKind];defines.NORMAL&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.NormalKind);defines.UV1&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UVKind);defines.UV2&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UV2Kind);
defines.VERTEXCOLOR&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.ColorKind);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForBones(attribs,mesh,defines,fallbacks);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForInstances(attribs,defines);mesh=defines.toString();var uniforms="world view viewProjection vEyePosition vLightsType vDiffuseColor vFogInfos vFogColor pointSize vDiffuseInfos mBones diffuseMatrix time speed movingSpeed fogColor fogDensity lowFrequencySpeed".split(" ");
(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.addClipPlaneUniforms)(uniforms);var samplers=["diffuseSampler","noiseTexture"],uniformBuffers=[];babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:uniforms,uniformBuffersNames:uniformBuffers,samplers,defines,maxSimultaneousLights:this.maxSimultaneousLights});subMesh.setEffect(scene.getEngine().createEffect("lava",{attributes:attribs,uniformsNames:uniforms,uniformBuffersNames:uniformBuffers,
samplers,defines:mesh,fallbacks,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this.maxSimultaneousLights}},engine),defines,this._materialContext)}if(!subMesh.effect||!subMesh.effect.isReady())return!1;defines._renderId=scene.getRenderId();subMesh.effect._wasPreviouslyReady=!0;subMesh.effect._wasPreviouslyUsingInstances=!!useInstances;return!0};LavaMaterial.prototype.bindForSubMesh=function(world,mesh,subMesh){var scene=this.getScene(),defines=subMesh.materialDefines;
defines&&(subMesh=subMesh.effect)&&(this._activeEffect=subMesh,defines.UNLIT=this._unlit,this.bindOnlyWorldMatrix(world),this._activeEffect.setMatrix("viewProjection",scene.getTransformMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindBonesParameters(mesh,this._activeEffect),this._mustRebind(scene,subMesh)&&(this.diffuseTexture&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled&&(this._activeEffect.setTexture("diffuseSampler",
this.diffuseTexture),this._activeEffect.setFloat2("vDiffuseInfos",this.diffuseTexture.coordinatesIndex,this.diffuseTexture.level),this._activeEffect.setMatrix("diffuseMatrix",this.diffuseTexture.getTextureMatrix())),this.noiseTexture&&this._activeEffect.setTexture("noiseTexture",this.noiseTexture),(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.bindClipPlane)(subMesh,this,scene),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),scene.bindEyePosition(subMesh)),this._activeEffect.setColor4("vDiffuseColor",
this._scaledDiffuse,this.alpha*mesh.visibility),scene.lightsEnabled&&!this.disableLighting&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindLights(scene,mesh,this._activeEffect,defines),scene.fogEnabled&&mesh.applyFog&&scene.fogMode!==babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",scene.getViewMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindFogParameters(scene,mesh,this._activeEffect),
this._lastTime+=scene.getEngine().getDeltaTime(),this._activeEffect.setFloat("time",this._lastTime*this.speed/1E3),this.fogColor||(this.fogColor=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3.Black()),this._activeEffect.setColor3("fogColor",this.fogColor),this._activeEffect.setFloat("fogDensity",this.fogDensity),this._activeEffect.setFloat("lowFrequencySpeed",this.lowFrequencySpeed),this._activeEffect.setFloat("movingSpeed",this.movingSpeed),this._afterBind(mesh,this._activeEffect))};
LavaMaterial.prototype.getAnimatables=function(){var results=[];this.diffuseTexture&&this.diffuseTexture.animations&&0<this.diffuseTexture.animations.length&&results.push(this.diffuseTexture);this.noiseTexture&&this.noiseTexture.animations&&0<this.noiseTexture.animations.length&&results.push(this.noiseTexture);return results};LavaMaterial.prototype.getActiveTextures=function(){var activeTextures=_super.prototype.getActiveTextures.call(this);this._diffuseTexture&&activeTextures.push(this._diffuseTexture);
return activeTextures};LavaMaterial.prototype.hasTexture=function(texture){return _super.prototype.hasTexture.call(this,texture)||this.diffuseTexture===texture?!0:!1};LavaMaterial.prototype.dispose=function(forceDisposeEffect){this.diffuseTexture&&this.diffuseTexture.dispose();this.noiseTexture&&this.noiseTexture.dispose();_super.prototype.dispose.call(this,forceDisposeEffect)};LavaMaterial.prototype.clone=function(name){var _this=this;return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Clone(function(){return new LavaMaterial(name,
_this.getScene())},this)};LavaMaterial.prototype.serialize=function(){var serializationObject=_super.prototype.serialize.call(this);serializationObject.customType="BABYLON.LavaMaterial";return serializationObject};LavaMaterial.prototype.getClassName=function(){return"LavaMaterial"};LavaMaterial.Parse=function(source,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Parse(function(){return new LavaMaterial(source.name,scene)},source,scene,rootUrl)};(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture")],
LavaMaterial.prototype,"_diffuseTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],LavaMaterial.prototype,"diffuseTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)()],LavaMaterial.prototype,"noiseTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],
LavaMaterial.prototype,"fogColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],LavaMaterial.prototype,"speed",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],LavaMaterial.prototype,"movingSpeed",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],LavaMaterial.prototype,
"lowFrequencySpeed",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],LavaMaterial.prototype,"fogDensity",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],LavaMaterial.prototype,"diffuseColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("disableLighting")],
LavaMaterial.prototype,"_disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],LavaMaterial.prototype,"disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("unlit")],LavaMaterial.prototype,"_unlit",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],
LavaMaterial.prototype,"unlit",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("maxSimultaneousLights")],LavaMaterial.prototype,"_maxSimultaneousLights",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],LavaMaterial.prototype,"maxSimultaneousLights",void 0);return LavaMaterial}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.PushMaterial);
(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.LavaMaterial",LavaMaterial)},"../../../dev/materials/src/mix/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{MixMaterial:()=>_mixMaterial__WEBPACK_IMPORTED_MODULE_0__.MixMaterial});var _mixMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../dev/materials/src/mix/mixMaterial.ts")},"../../../dev/materials/src/mix/mix.fragment.ts":(__unused_webpack_module,
__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{mixPixelShader:()=>mixPixelShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.mixPixelShader="precision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#ifdef DIFFUSE\nvarying vec2 vTextureUV;\nuniform sampler2D mixMap1Sampler;\nuniform vec2 vTextureInfos;\n#ifdef MIXMAP2\nuniform sampler2D mixMap2Sampler;\n#endif\nuniform sampler2D diffuse1Sampler;\nuniform sampler2D diffuse2Sampler;\nuniform sampler2D diffuse3Sampler;\nuniform sampler2D diffuse4Sampler;\nuniform vec2 diffuse1Infos;\nuniform vec2 diffuse2Infos;\nuniform vec2 diffuse3Infos;\nuniform vec2 diffuse4Infos;\n#ifdef MIXMAP2\nuniform sampler2D diffuse5Sampler;\nuniform sampler2D diffuse6Sampler;\nuniform sampler2D diffuse7Sampler;\nuniform sampler2D diffuse8Sampler;\nuniform vec2 diffuse5Infos;\nuniform vec2 diffuse6Infos;\nuniform vec2 diffuse7Infos;\nuniform vec2 diffuse8Infos;\n#endif\n#endif\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nvec4 finalMixColor\x3dvec4(1.,1.,1.,1.);\nvec3 diffuseColor\x3dvDiffuseColor.rgb;\n#ifdef MIXMAP2\nvec4 mixColor2\x3dvec4(1.,1.,1.,1.);\n#endif\n#ifdef SPECULARTERM\nfloat glossiness\x3dvSpecularColor.a;\nvec3 specularColor\x3dvSpecularColor.rgb;\n#else\nfloat glossiness\x3d0.;\n#endif\nfloat alpha\x3dvDiffuseColor.a;\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\n#ifdef DIFFUSE\nvec4 mixColor\x3dtexture2D(mixMap1Sampler,vTextureUV);\n#include\x3cdepthPrePass\x3e\nmixColor.rgb*\x3dvTextureInfos.y;\nvec4 diffuse1Color\x3dtexture2D(diffuse1Sampler,vTextureUV*diffuse1Infos);\nvec4 diffuse2Color\x3dtexture2D(diffuse2Sampler,vTextureUV*diffuse2Infos);\nvec4 diffuse3Color\x3dtexture2D(diffuse3Sampler,vTextureUV*diffuse3Infos);\nvec4 diffuse4Color\x3dtexture2D(diffuse4Sampler,vTextureUV*diffuse4Infos);\ndiffuse1Color.rgb*\x3dmixColor.r;\ndiffuse2Color.rgb\x3dmix(diffuse1Color.rgb,diffuse2Color.rgb,mixColor.g);\ndiffuse3Color.rgb\x3dmix(diffuse2Color.rgb,diffuse3Color.rgb,mixColor.b);\nfinalMixColor.rgb\x3dmix(diffuse3Color.rgb,diffuse4Color.rgb,1.0-mixColor.a);\n#ifdef MIXMAP2\nmixColor\x3dtexture2D(mixMap2Sampler,vTextureUV);\nmixColor.rgb*\x3dvTextureInfos.y;\nvec4 diffuse5Color\x3dtexture2D(diffuse5Sampler,vTextureUV*diffuse5Infos);\nvec4 diffuse6Color\x3dtexture2D(diffuse6Sampler,vTextureUV*diffuse6Infos);\nvec4 diffuse7Color\x3dtexture2D(diffuse7Sampler,vTextureUV*diffuse7Infos);\nvec4 diffuse8Color\x3dtexture2D(diffuse8Sampler,vTextureUV*diffuse8Infos);\ndiffuse5Color.rgb\x3dmix(finalMixColor.rgb,diffuse5Color.rgb,mixColor.r);\ndiffuse6Color.rgb\x3dmix(diffuse5Color.rgb,diffuse6Color.rgb,mixColor.g);\ndiffuse7Color.rgb\x3dmix(diffuse6Color.rgb,diffuse7Color.rgb,mixColor.b);\nfinalMixColor.rgb\x3dmix(diffuse7Color.rgb,diffuse8Color.rgb,1.0-mixColor.a);\n#endif\n#endif\n#ifdef VERTEXCOLOR\nfinalMixColor.rgb*\x3dvColor.rgb;\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\n#ifdef SPECULARTERM\nvec3 specularBase\x3dvec3(0.,0.,0.);\n#endif\n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular\x3dspecularBase*specularColor;\n#else\nvec3 finalSpecular\x3dvec3(0.0);\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor*finalMixColor.rgb,0.0,1.0);\nvec4 color\x3dvec4(finalDiffuse+finalSpecular,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}\n";
var mixPixelShader={name:"mixPixelShader",shader:"precision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#ifdef DIFFUSE\nvarying vec2 vTextureUV;\nuniform sampler2D mixMap1Sampler;\nuniform vec2 vTextureInfos;\n#ifdef MIXMAP2\nuniform sampler2D mixMap2Sampler;\n#endif\nuniform sampler2D diffuse1Sampler;\nuniform sampler2D diffuse2Sampler;\nuniform sampler2D diffuse3Sampler;\nuniform sampler2D diffuse4Sampler;\nuniform vec2 diffuse1Infos;\nuniform vec2 diffuse2Infos;\nuniform vec2 diffuse3Infos;\nuniform vec2 diffuse4Infos;\n#ifdef MIXMAP2\nuniform sampler2D diffuse5Sampler;\nuniform sampler2D diffuse6Sampler;\nuniform sampler2D diffuse7Sampler;\nuniform sampler2D diffuse8Sampler;\nuniform vec2 diffuse5Infos;\nuniform vec2 diffuse6Infos;\nuniform vec2 diffuse7Infos;\nuniform vec2 diffuse8Infos;\n#endif\n#endif\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nvec4 finalMixColor\x3dvec4(1.,1.,1.,1.);\nvec3 diffuseColor\x3dvDiffuseColor.rgb;\n#ifdef MIXMAP2\nvec4 mixColor2\x3dvec4(1.,1.,1.,1.);\n#endif\n#ifdef SPECULARTERM\nfloat glossiness\x3dvSpecularColor.a;\nvec3 specularColor\x3dvSpecularColor.rgb;\n#else\nfloat glossiness\x3d0.;\n#endif\nfloat alpha\x3dvDiffuseColor.a;\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\n#ifdef DIFFUSE\nvec4 mixColor\x3dtexture2D(mixMap1Sampler,vTextureUV);\n#include\x3cdepthPrePass\x3e\nmixColor.rgb*\x3dvTextureInfos.y;\nvec4 diffuse1Color\x3dtexture2D(diffuse1Sampler,vTextureUV*diffuse1Infos);\nvec4 diffuse2Color\x3dtexture2D(diffuse2Sampler,vTextureUV*diffuse2Infos);\nvec4 diffuse3Color\x3dtexture2D(diffuse3Sampler,vTextureUV*diffuse3Infos);\nvec4 diffuse4Color\x3dtexture2D(diffuse4Sampler,vTextureUV*diffuse4Infos);\ndiffuse1Color.rgb*\x3dmixColor.r;\ndiffuse2Color.rgb\x3dmix(diffuse1Color.rgb,diffuse2Color.rgb,mixColor.g);\ndiffuse3Color.rgb\x3dmix(diffuse2Color.rgb,diffuse3Color.rgb,mixColor.b);\nfinalMixColor.rgb\x3dmix(diffuse3Color.rgb,diffuse4Color.rgb,1.0-mixColor.a);\n#ifdef MIXMAP2\nmixColor\x3dtexture2D(mixMap2Sampler,vTextureUV);\nmixColor.rgb*\x3dvTextureInfos.y;\nvec4 diffuse5Color\x3dtexture2D(diffuse5Sampler,vTextureUV*diffuse5Infos);\nvec4 diffuse6Color\x3dtexture2D(diffuse6Sampler,vTextureUV*diffuse6Infos);\nvec4 diffuse7Color\x3dtexture2D(diffuse7Sampler,vTextureUV*diffuse7Infos);\nvec4 diffuse8Color\x3dtexture2D(diffuse8Sampler,vTextureUV*diffuse8Infos);\ndiffuse5Color.rgb\x3dmix(finalMixColor.rgb,diffuse5Color.rgb,mixColor.r);\ndiffuse6Color.rgb\x3dmix(diffuse5Color.rgb,diffuse6Color.rgb,mixColor.g);\ndiffuse7Color.rgb\x3dmix(diffuse6Color.rgb,diffuse7Color.rgb,mixColor.b);\nfinalMixColor.rgb\x3dmix(diffuse7Color.rgb,diffuse8Color.rgb,1.0-mixColor.a);\n#endif\n#endif\n#ifdef VERTEXCOLOR\nfinalMixColor.rgb*\x3dvColor.rgb;\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\n#ifdef SPECULARTERM\nvec3 specularBase\x3dvec3(0.,0.,0.);\n#endif\n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular\x3dspecularBase*specularColor;\n#else\nvec3 finalSpecular\x3dvec3(0.0);\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor*finalMixColor.rgb,0.0,1.0);\nvec4 color\x3dvec4(finalDiffuse+finalSpecular,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}\n"}},
"../../../dev/materials/src/mix/mix.vertex.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{mixVertexShader:()=>mixVertexShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.mixVertexShader="precision highp float;attribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;uniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vTextureUV;uniform mat4 textureMatrix;uniform vec2 vTextureInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);gl_Position\x3dviewProjection*worldPos;vPositionW\x3dvec3(worldPos);\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vTextureInfos.x\x3d\x3d0.)\n{vTextureUV\x3dvec2(textureMatrix*vec4(uv,1.0,0.0));}\nelse\n{vTextureUV\x3dvec2(textureMatrix*vec4(uv2,1.0,0.0));}\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n";
var mixVertexShader={name:"mixVertexShader",shader:"precision highp float;attribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;uniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vTextureUV;uniform mat4 textureMatrix;uniform vec2 vTextureInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);gl_Position\x3dviewProjection*worldPos;vPositionW\x3dvec3(worldPos);\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vTextureInfos.x\x3d\x3d0.)\n{vTextureUV\x3dvec2(textureMatrix*vec4(uv,1.0,0.0));}\nelse\n{vTextureUV\x3dvec2(textureMatrix*vec4(uv2,1.0,0.0));}\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n"}},
"../../../dev/materials/src/mix/mixMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{MixMaterial:()=>MixMaterial});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__);
__webpack_require__("../../../dev/materials/src/mix/mix.fragment.ts");__webpack_require__("../../../dev/materials/src/mix/mix.vertex.ts");var MixMaterialDefines=function(_super){function MixMaterialDefines(){var _this=_super.call(this)||this;_this.DIFFUSE=!1;_this.CLIPPLANE=!1;_this.CLIPPLANE2=!1;_this.CLIPPLANE3=!1;_this.CLIPPLANE4=!1;_this.CLIPPLANE5=!1;_this.CLIPPLANE6=!1;_this.ALPHATEST=!1;_this.DEPTHPREPASS=!1;_this.POINTSIZE=!1;_this.FOG=!1;_this.SPECULARTERM=!1;_this.NORMAL=!1;_this.UV1=!1;
_this.UV2=!1;_this.VERTEXCOLOR=!1;_this.VERTEXALPHA=!1;_this.NUM_BONE_INFLUENCERS=0;_this.BonesPerMesh=0;_this.INSTANCES=!1;_this.INSTANCESCOLOR=!1;_this.MIXMAP2=!1;_this.IMAGEPROCESSINGPOSTPROCESS=!1;_this.SKIPFINALCOLORCLAMP=!1;_this.rebuild();return _this}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(MixMaterialDefines,_super);return MixMaterialDefines}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialDefines),MixMaterial=function(_super){function MixMaterial(name,scene){name=
_super.call(this,name,scene)||this;name.diffuseColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(1,1,1);name.specularColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(0,0,0);name.specularPower=64;name._disableLighting=!1;name._maxSimultaneousLights=4;return name}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(MixMaterial,_super);MixMaterial.prototype.needAlphaBlending=function(){return 1>this.alpha};MixMaterial.prototype.needAlphaTesting=function(){return!1};
MixMaterial.prototype.getAlphaTestTexture=function(){return null};MixMaterial.prototype.isReadyForSubMesh=function(mesh,subMesh,useInstances){if(this.isFrozen&&subMesh.effect&&subMesh.effect._wasPreviouslyReady&&subMesh.effect._wasPreviouslyUsingInstances===useInstances)return!0;subMesh.materialDefines||(subMesh.materialDefines=new MixMaterialDefines);var defines=subMesh.materialDefines,scene=this.getScene();if(this._isReadyForSubMesh(subMesh))return!0;var engine=scene.getEngine();if(scene.texturesEnabled){if(!this._mixTexture1||
!this._mixTexture1.isReady())return!1;defines._needUVs=!0;if(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled){if(!this._diffuseTexture1||!this._diffuseTexture1.isReady())return!1;defines.DIFFUSE=!0;if(!(this._diffuseTexture2&&this._diffuseTexture2.isReady()&&this._diffuseTexture3&&this._diffuseTexture3.isReady()&&this._diffuseTexture4&&this._diffuseTexture4.isReady()))return!1;if(this._mixTexture2){if(!this._mixTexture2.isReady())return!1;defines.MIXMAP2=
!0;if(!(this._diffuseTexture5&&this._diffuseTexture5.isReady()&&this._diffuseTexture6&&this._diffuseTexture6.isReady()&&this._diffuseTexture7&&this._diffuseTexture7.isReady()&&this._diffuseTexture8&&this._diffuseTexture8.isReady()))return!1}}}babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForMisc(mesh,scene,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(mesh),defines);defines._needNormals=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForLights(scene,
mesh,defines,!1,this._maxSimultaneousLights,this._disableLighting);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForFrameBoundValues(scene,engine,this,defines,useInstances?!0:!1);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForAttributes(mesh,defines,!0,!0);if(defines.isDirty){defines.markAsProcessed();scene.resetCachedMaterial();var fallbacks=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.EffectFallbacks;defines.FOG&&
fallbacks.addFallback(1,"FOG");babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.HandleFallbacksForShadows(defines,fallbacks,this.maxSimultaneousLights);0<defines.NUM_BONE_INFLUENCERS&&fallbacks.addCPUSkinningFallback(0,mesh);defines.IMAGEPROCESSINGPOSTPROCESS=scene.imageProcessingConfiguration.applyByPostProcess;var attribs=[babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.PositionKind];defines.NORMAL&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.NormalKind);
defines.UV1&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UVKind);defines.UV2&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UV2Kind);defines.VERTEXCOLOR&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.ColorKind);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForBones(attribs,mesh,defines,fallbacks);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForInstances(attribs,
defines);mesh=defines.toString();var uniforms="world view viewProjection vEyePosition vLightsType vDiffuseColor vSpecularColor vFogInfos vFogColor pointSize vTextureInfos mBones textureMatrix diffuse1Infos diffuse2Infos diffuse3Infos diffuse4Infos diffuse5Infos diffuse6Infos diffuse7Infos diffuse8Infos".split(" "),samplers="mixMap1Sampler mixMap2Sampler diffuse1Sampler diffuse2Sampler diffuse3Sampler diffuse4Sampler diffuse5Sampler diffuse6Sampler diffuse7Sampler diffuse8Sampler".split(" "),uniformBuffers=
[];(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.addClipPlaneUniforms)(uniforms);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:uniforms,uniformBuffersNames:uniformBuffers,samplers,defines,maxSimultaneousLights:this.maxSimultaneousLights});subMesh.setEffect(scene.getEngine().createEffect("mix",{attributes:attribs,uniformsNames:uniforms,uniformBuffersNames:uniformBuffers,samplers,defines:mesh,fallbacks,onCompiled:this.onCompiled,
onError:this.onError,indexParameters:{maxSimultaneousLights:this.maxSimultaneousLights}},engine),defines,this._materialContext)}if(!subMesh.effect||!subMesh.effect.isReady())return!1;defines._renderId=scene.getRenderId();subMesh.effect._wasPreviouslyReady=!0;subMesh.effect._wasPreviouslyUsingInstances=!!useInstances;return!0};MixMaterial.prototype.bindForSubMesh=function(world,mesh,subMesh){var scene=this.getScene(),defines=subMesh.materialDefines;defines&&(subMesh=subMesh.effect)&&(this._activeEffect=
subMesh,this.bindOnlyWorldMatrix(world),this._activeEffect.setMatrix("viewProjection",scene.getTransformMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindBonesParameters(mesh,this._activeEffect),this._mustRebind(scene,subMesh)&&(this._mixTexture1&&(this._activeEffect.setTexture("mixMap1Sampler",this._mixTexture1),this._activeEffect.setFloat2("vTextureInfos",this._mixTexture1.coordinatesIndex,this._mixTexture1.level),this._activeEffect.setMatrix("textureMatrix",this._mixTexture1.getTextureMatrix()),
babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled&&(this._diffuseTexture1&&(this._activeEffect.setTexture("diffuse1Sampler",this._diffuseTexture1),this._activeEffect.setFloat2("diffuse1Infos",this._diffuseTexture1.uScale,this._diffuseTexture1.vScale)),this._diffuseTexture2&&(this._activeEffect.setTexture("diffuse2Sampler",this._diffuseTexture2),this._activeEffect.setFloat2("diffuse2Infos",this._diffuseTexture2.uScale,this._diffuseTexture2.vScale)),this._diffuseTexture3&&
(this._activeEffect.setTexture("diffuse3Sampler",this._diffuseTexture3),this._activeEffect.setFloat2("diffuse3Infos",this._diffuseTexture3.uScale,this._diffuseTexture3.vScale)),this._diffuseTexture4&&(this._activeEffect.setTexture("diffuse4Sampler",this._diffuseTexture4),this._activeEffect.setFloat2("diffuse4Infos",this._diffuseTexture4.uScale,this._diffuseTexture4.vScale)))),this._mixTexture2&&(this._activeEffect.setTexture("mixMap2Sampler",this._mixTexture2),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled&&
(this._diffuseTexture5&&(this._activeEffect.setTexture("diffuse5Sampler",this._diffuseTexture5),this._activeEffect.setFloat2("diffuse5Infos",this._diffuseTexture5.uScale,this._diffuseTexture5.vScale)),this._diffuseTexture6&&(this._activeEffect.setTexture("diffuse6Sampler",this._diffuseTexture6),this._activeEffect.setFloat2("diffuse6Infos",this._diffuseTexture6.uScale,this._diffuseTexture6.vScale)),this._diffuseTexture7&&(this._activeEffect.setTexture("diffuse7Sampler",this._diffuseTexture7),this._activeEffect.setFloat2("diffuse7Infos",
this._diffuseTexture7.uScale,this._diffuseTexture7.vScale)),this._diffuseTexture8&&(this._activeEffect.setTexture("diffuse8Sampler",this._diffuseTexture8),this._activeEffect.setFloat2("diffuse8Infos",this._diffuseTexture8.uScale,this._diffuseTexture8.vScale)))),(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.bindClipPlane)(subMesh,this,scene),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),scene.bindEyePosition(subMesh)),this._activeEffect.setColor4("vDiffuseColor",
this.diffuseColor,this.alpha*mesh.visibility),defines.SPECULARTERM&&this._activeEffect.setColor4("vSpecularColor",this.specularColor,this.specularPower),scene.lightsEnabled&&!this.disableLighting&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindLights(scene,mesh,this._activeEffect,defines,this.maxSimultaneousLights),scene.fogEnabled&&mesh.applyFog&&scene.fogMode!==babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",
scene.getViewMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindFogParameters(scene,mesh,this._activeEffect),this._afterBind(mesh,this._activeEffect))};MixMaterial.prototype.getAnimatables=function(){var results=[];this._mixTexture1&&this._mixTexture1.animations&&0<this._mixTexture1.animations.length&&results.push(this._mixTexture1);this._mixTexture2&&this._mixTexture2.animations&&0<this._mixTexture2.animations.length&&results.push(this._mixTexture2);return results};
MixMaterial.prototype.getActiveTextures=function(){var activeTextures=_super.prototype.getActiveTextures.call(this);this._mixTexture1&&activeTextures.push(this._mixTexture1);this._diffuseTexture1&&activeTextures.push(this._diffuseTexture1);this._diffuseTexture2&&activeTextures.push(this._diffuseTexture2);this._diffuseTexture3&&activeTextures.push(this._diffuseTexture3);this._diffuseTexture4&&activeTextures.push(this._diffuseTexture4);this._mixTexture2&&activeTextures.push(this._mixTexture2);this._diffuseTexture5&&
activeTextures.push(this._diffuseTexture5);this._diffuseTexture6&&activeTextures.push(this._diffuseTexture6);this._diffuseTexture7&&activeTextures.push(this._diffuseTexture7);this._diffuseTexture8&&activeTextures.push(this._diffuseTexture8);return activeTextures};MixMaterial.prototype.hasTexture=function(texture){return _super.prototype.hasTexture.call(this,texture)||this._mixTexture1===texture||this._diffuseTexture1===texture||this._diffuseTexture2===texture||this._diffuseTexture3===texture||this._diffuseTexture4===
texture||this._mixTexture2===texture||this._diffuseTexture5===texture||this._diffuseTexture6===texture||this._diffuseTexture7===texture||this._diffuseTexture8===texture?!0:!1};MixMaterial.prototype.dispose=function(forceDisposeEffect){this._mixTexture1&&this._mixTexture1.dispose();_super.prototype.dispose.call(this,forceDisposeEffect)};MixMaterial.prototype.clone=function(name){var _this=this;return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Clone(function(){return new MixMaterial(name,
_this.getScene())},this)};MixMaterial.prototype.serialize=function(){var serializationObject=_super.prototype.serialize.call(this);serializationObject.customType="BABYLON.MixMaterial";return serializationObject};MixMaterial.prototype.getClassName=function(){return"MixMaterial"};MixMaterial.Parse=function(source,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Parse(function(){return new MixMaterial(source.name,scene)},source,scene,rootUrl)};(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("mixTexture1")],
MixMaterial.prototype,"_mixTexture1",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],MixMaterial.prototype,"mixTexture1",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("mixTexture2")],MixMaterial.prototype,"_mixTexture2",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],
MixMaterial.prototype,"mixTexture2",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture1")],MixMaterial.prototype,"_diffuseTexture1",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],MixMaterial.prototype,"diffuseTexture1",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture2")],
MixMaterial.prototype,"_diffuseTexture2",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],MixMaterial.prototype,"diffuseTexture2",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture3")],MixMaterial.prototype,"_diffuseTexture3",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],
MixMaterial.prototype,"diffuseTexture3",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture4")],MixMaterial.prototype,"_diffuseTexture4",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],MixMaterial.prototype,"diffuseTexture4",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture1")],
MixMaterial.prototype,"_diffuseTexture5",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],MixMaterial.prototype,"diffuseTexture5",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture2")],MixMaterial.prototype,"_diffuseTexture6",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],
MixMaterial.prototype,"diffuseTexture6",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture3")],MixMaterial.prototype,"_diffuseTexture7",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],MixMaterial.prototype,"diffuseTexture7",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture4")],
MixMaterial.prototype,"_diffuseTexture8",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],MixMaterial.prototype,"diffuseTexture8",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],MixMaterial.prototype,"diffuseColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],
MixMaterial.prototype,"specularColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],MixMaterial.prototype,"specularPower",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("disableLighting")],MixMaterial.prototype,"_disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],
MixMaterial.prototype,"disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("maxSimultaneousLights")],MixMaterial.prototype,"_maxSimultaneousLights",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],MixMaterial.prototype,"maxSimultaneousLights",void 0);return MixMaterial}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.PushMaterial);
(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.MixMaterial",MixMaterial)},"../../../dev/materials/src/normal/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{NormalMaterial:()=>_normalMaterial__WEBPACK_IMPORTED_MODULE_0__.NormalMaterial});var _normalMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../dev/materials/src/normal/normalMaterial.ts")},
"../../../dev/materials/src/normal/normal.fragment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{normalPixelShader:()=>normalPixelShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.normalPixelShader="precision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef LIGHTING\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0]\n#include\x3c__decl__lightFragment\x3e[1]\n#include\x3c__decl__lightFragment\x3e[2]\n#include\x3c__decl__lightFragment\x3e[3]\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#endif\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform sampler2D diffuseSampler;\nuniform vec2 vDiffuseInfos;\n#endif\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nvec4 baseColor\x3dvec4(1.,1.,1.,1.);\nvec3 diffuseColor\x3dvDiffuseColor.rgb;\nfloat alpha\x3dvDiffuseColor.a;\n#ifdef DIFFUSE\nbaseColor\x3dtexture2D(diffuseSampler,vDiffuseUV);\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\nbaseColor.rgb*\x3dvDiffuseInfos.y;\n#endif\n#ifdef NORMAL\nbaseColor\x3dmix(baseColor,vec4(vNormalW,1.0),0.5);\n#endif\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\n#ifdef LIGHTING\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\nfloat glossiness\x3d0.;\n#include\x3clightFragment\x3e[0]\n#include\x3clightFragment\x3e[1]\n#include\x3clightFragment\x3e[2]\n#include\x3clightFragment\x3e[3]\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\n#else\nvec3 finalDiffuse\x3d baseColor.rgb;\n#endif\nvec4 color\x3dvec4(finalDiffuse,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}";
var normalPixelShader={name:"normalPixelShader",shader:"precision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef LIGHTING\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0]\n#include\x3c__decl__lightFragment\x3e[1]\n#include\x3c__decl__lightFragment\x3e[2]\n#include\x3c__decl__lightFragment\x3e[3]\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#endif\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform sampler2D diffuseSampler;\nuniform vec2 vDiffuseInfos;\n#endif\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nvec4 baseColor\x3dvec4(1.,1.,1.,1.);\nvec3 diffuseColor\x3dvDiffuseColor.rgb;\nfloat alpha\x3dvDiffuseColor.a;\n#ifdef DIFFUSE\nbaseColor\x3dtexture2D(diffuseSampler,vDiffuseUV);\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\nbaseColor.rgb*\x3dvDiffuseInfos.y;\n#endif\n#ifdef NORMAL\nbaseColor\x3dmix(baseColor,vec4(vNormalW,1.0),0.5);\n#endif\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\n#ifdef LIGHTING\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\nfloat glossiness\x3d0.;\n#include\x3clightFragment\x3e[0]\n#include\x3clightFragment\x3e[1]\n#include\x3clightFragment\x3e[2]\n#include\x3clightFragment\x3e[3]\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\n#else\nvec3 finalDiffuse\x3d baseColor.rgb;\n#endif\nvec4 color\x3dvec4(finalDiffuse,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}"}},
"../../../dev/materials/src/normal/normal.vertex.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{normalVertexShader:()=>normalVertexShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.normalVertexShader="precision highp float;\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\ngl_Position\x3dviewProjection*worldPos;\nvPositionW\x3dvec3(worldPos);\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vDiffuseInfos.x\x3d\x3d0.)\n{\nvDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n";
var normalVertexShader={name:"normalVertexShader",shader:"precision highp float;\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\ngl_Position\x3dviewProjection*worldPos;\nvPositionW\x3dvec3(worldPos);\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vDiffuseInfos.x\x3d\x3d0.)\n{\nvDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n"}},
"../../../dev/materials/src/normal/normalMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{NormalMaterial:()=>NormalMaterial});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__);
__webpack_require__("../../../dev/materials/src/normal/normal.fragment.ts");__webpack_require__("../../../dev/materials/src/normal/normal.vertex.ts");var NormalMaterialDefines=function(_super){function NormalMaterialDefines(){var _this=_super.call(this)||this;_this.DIFFUSE=!1;_this.CLIPPLANE=!1;_this.CLIPPLANE2=!1;_this.CLIPPLANE3=!1;_this.CLIPPLANE4=!1;_this.CLIPPLANE5=!1;_this.CLIPPLANE6=!1;_this.ALPHATEST=!1;_this.DEPTHPREPASS=!1;_this.POINTSIZE=!1;_this.FOG=!1;_this.LIGHT0=!1;_this.LIGHT1=!1;
_this.LIGHT2=!1;_this.LIGHT3=!1;_this.SPOTLIGHT0=!1;_this.SPOTLIGHT1=!1;_this.SPOTLIGHT2=!1;_this.SPOTLIGHT3=!1;_this.HEMILIGHT0=!1;_this.HEMILIGHT1=!1;_this.HEMILIGHT2=!1;_this.HEMILIGHT3=!1;_this.DIRLIGHT0=!1;_this.DIRLIGHT1=!1;_this.DIRLIGHT2=!1;_this.DIRLIGHT3=!1;_this.POINTLIGHT0=!1;_this.POINTLIGHT1=!1;_this.POINTLIGHT2=!1;_this.POINTLIGHT3=!1;_this.SHADOW0=!1;_this.SHADOW1=!1;_this.SHADOW2=!1;_this.SHADOW3=!1;_this.SHADOWS=!1;_this.SHADOWESM0=!1;_this.SHADOWESM1=!1;_this.SHADOWESM2=!1;_this.SHADOWESM3=
!1;_this.SHADOWPOISSON0=!1;_this.SHADOWPOISSON1=!1;_this.SHADOWPOISSON2=!1;_this.SHADOWPOISSON3=!1;_this.SHADOWPCF0=!1;_this.SHADOWPCF1=!1;_this.SHADOWPCF2=!1;_this.SHADOWPCF3=!1;_this.SHADOWPCSS0=!1;_this.SHADOWPCSS1=!1;_this.SHADOWPCSS2=!1;_this.SHADOWPCSS3=!1;_this.NORMAL=!1;_this.UV1=!1;_this.UV2=!1;_this.NUM_BONE_INFLUENCERS=0;_this.BonesPerMesh=0;_this.INSTANCES=!1;_this.LIGHTING=!1;_this.IMAGEPROCESSINGPOSTPROCESS=!1;_this.SKIPFINALCOLORCLAMP=!1;_this.rebuild();return _this}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(NormalMaterialDefines,
_super);return NormalMaterialDefines}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialDefines),NormalMaterial=function(_super){function NormalMaterial(name,scene){name=_super.call(this,name,scene)||this;name.diffuseColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(1,1,1);name._disableLighting=!1;name._maxSimultaneousLights=4;return name}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(NormalMaterial,_super);NormalMaterial.prototype.needAlphaBlending=function(){return 1>
this.alpha};NormalMaterial.prototype.needAlphaBlendingForMesh=function(mesh){return this.needAlphaBlending()||1>mesh.visibility};NormalMaterial.prototype.needAlphaTesting=function(){return!1};NormalMaterial.prototype.getAlphaTestTexture=function(){return null};NormalMaterial.prototype.isReadyForSubMesh=function(mesh,subMesh,useInstances){if(this.isFrozen&&subMesh.effect&&subMesh.effect._wasPreviouslyReady&&subMesh.effect._wasPreviouslyUsingInstances===useInstances)return!0;subMesh.materialDefines||
(subMesh.materialDefines=new NormalMaterialDefines);var defines=subMesh.materialDefines,scene=this.getScene();if(this._isReadyForSubMesh(subMesh))return!0;var engine=scene.getEngine();if(defines._areTexturesDirty&&(defines._needUVs=!1,scene.texturesEnabled&&this._diffuseTexture&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled))if(this._diffuseTexture.isReady())defines._needUVs=!0,defines.DIFFUSE=!0;else return!1;babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForMisc(mesh,
scene,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(mesh),defines);defines._needNormals=!0;babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForLights(scene,mesh,defines,!1,this._maxSimultaneousLights,this._disableLighting);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForFrameBoundValues(scene,engine,this,defines,useInstances?!0:!1);defines.LIGHTING=!this._disableLighting;babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForAttributes(mesh,
defines,!0,!0);if(defines.isDirty){defines.markAsProcessed();scene.resetCachedMaterial();var fallbacks=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.EffectFallbacks;defines.FOG&&fallbacks.addFallback(1,"FOG");babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.HandleFallbacksForShadows(defines,fallbacks);0<defines.NUM_BONE_INFLUENCERS&&fallbacks.addCPUSkinningFallback(0,mesh);defines.IMAGEPROCESSINGPOSTPROCESS=scene.imageProcessingConfiguration.applyByPostProcess;var attribs=
[babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.PositionKind];defines.NORMAL&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.NormalKind);defines.UV1&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UVKind);defines.UV2&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UV2Kind);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForBones(attribs,
mesh,defines,fallbacks);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForInstances(attribs,defines);mesh=defines.toString();var uniforms="world view viewProjection vEyePosition vLightsType vDiffuseColor vFogInfos vFogColor pointSize vDiffuseInfos mBones diffuseMatrix".split(" "),samplers=["diffuseSampler"],uniformBuffers=[];(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.addClipPlaneUniforms)(uniforms);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:uniforms,
uniformBuffersNames:uniformBuffers,samplers,defines,maxSimultaneousLights:4});subMesh.setEffect(scene.getEngine().createEffect("normal",{attributes:attribs,uniformsNames:uniforms,uniformBuffersNames:uniformBuffers,samplers,defines:mesh,fallbacks,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},engine),defines,this._materialContext)}if(!subMesh.effect||!subMesh.effect.isReady())return!1;defines._renderId=scene.getRenderId();subMesh.effect._wasPreviouslyReady=
!0;subMesh.effect._wasPreviouslyUsingInstances=!!useInstances;return!0};NormalMaterial.prototype.bindForSubMesh=function(world,mesh,subMesh){var scene=this.getScene(),defines=subMesh.materialDefines;defines&&(subMesh=subMesh.effect)&&(this._activeEffect=subMesh,this.bindOnlyWorldMatrix(world),this._activeEffect.setMatrix("viewProjection",scene.getTransformMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindBonesParameters(mesh,this._activeEffect),this._mustRebind(scene,
subMesh)&&(this.diffuseTexture&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled&&(this._activeEffect.setTexture("diffuseSampler",this.diffuseTexture),this._activeEffect.setFloat2("vDiffuseInfos",this.diffuseTexture.coordinatesIndex,this.diffuseTexture.level),this._activeEffect.setMatrix("diffuseMatrix",this.diffuseTexture.getTextureMatrix())),(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.bindClipPlane)(subMesh,this,scene),this.pointsCloud&&this._activeEffect.setFloat("pointSize",
this.pointSize),scene.bindEyePosition(subMesh)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*mesh.visibility),scene.lightsEnabled&&!this.disableLighting&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindLights(scene,mesh,this._activeEffect,defines),scene.fogEnabled&&mesh.applyFog&&scene.fogMode!==babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",scene.getViewMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindFogParameters(scene,
mesh,this._activeEffect),this._afterBind(mesh,this._activeEffect))};NormalMaterial.prototype.getAnimatables=function(){var results=[];this.diffuseTexture&&this.diffuseTexture.animations&&0<this.diffuseTexture.animations.length&&results.push(this.diffuseTexture);return results};NormalMaterial.prototype.getActiveTextures=function(){var activeTextures=_super.prototype.getActiveTextures.call(this);this._diffuseTexture&&activeTextures.push(this._diffuseTexture);return activeTextures};NormalMaterial.prototype.hasTexture=
function(texture){return _super.prototype.hasTexture.call(this,texture)||this.diffuseTexture===texture?!0:!1};NormalMaterial.prototype.dispose=function(forceDisposeEffect){this.diffuseTexture&&this.diffuseTexture.dispose();_super.prototype.dispose.call(this,forceDisposeEffect)};NormalMaterial.prototype.clone=function(name){var _this=this;return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Clone(function(){return new NormalMaterial(name,_this.getScene())},this)};NormalMaterial.prototype.serialize=
function(){var serializationObject=_super.prototype.serialize.call(this);serializationObject.customType="BABYLON.NormalMaterial";return serializationObject};NormalMaterial.prototype.getClassName=function(){return"NormalMaterial"};NormalMaterial.Parse=function(source,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Parse(function(){return new NormalMaterial(source.name,scene)},source,scene,rootUrl)};(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture")],
NormalMaterial.prototype,"_diffuseTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],NormalMaterial.prototype,"diffuseTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],NormalMaterial.prototype,"diffuseColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("disableLighting")],
NormalMaterial.prototype,"_disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],NormalMaterial.prototype,"disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("maxSimultaneousLights")],NormalMaterial.prototype,"_maxSimultaneousLights",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],
NormalMaterial.prototype,"maxSimultaneousLights",void 0);return NormalMaterial}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.PushMaterial);(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.NormalMaterial",NormalMaterial)},"../../../dev/materials/src/shadowOnly/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{ShadowOnlyMaterial:()=>_shadowOnlyMaterial__WEBPACK_IMPORTED_MODULE_0__.ShadowOnlyMaterial});
var _shadowOnlyMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../dev/materials/src/shadowOnly/shadowOnlyMaterial.ts")},"../../../dev/materials/src/shadowOnly/shadowOnly.fragment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{shadowOnlyPixelShader:()=>shadowOnlyPixelShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);
__unused_webpack_module.ShaderStore.ShadersStore.shadowOnlyPixelShader="precision highp float;\nuniform vec4 vEyePosition;\nuniform float alpha;\nuniform vec3 shadowColor;\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\nfloat glossiness\x3d0.;\n#include\x3clightFragment\x3e[0..1]\nvec4 color\x3dvec4(shadowColor,(1.0-clamp(shadow,0.,1.))*alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}";
var shadowOnlyPixelShader={name:"shadowOnlyPixelShader",shader:"precision highp float;\nuniform vec4 vEyePosition;\nuniform float alpha;\nuniform vec3 shadowColor;\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\nfloat glossiness\x3d0.;\n#include\x3clightFragment\x3e[0..1]\nvec4 color\x3dvec4(shadowColor,(1.0-clamp(shadow,0.,1.))*alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}"}},
"../../../dev/materials/src/shadowOnly/shadowOnly.vertex.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{shadowOnlyVertexShader:()=>shadowOnlyVertexShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.shadowOnlyVertexShader="precision highp float;\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\ngl_Position\x3dviewProjection*worldPos;\nvPositionW\x3dvec3(worldPos);\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n";
var shadowOnlyVertexShader={name:"shadowOnlyVertexShader",shader:"precision highp float;\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\ngl_Position\x3dviewProjection*worldPos;\nvPositionW\x3dvec3(worldPos);\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n"}},
"../../../dev/materials/src/shadowOnly/shadowOnlyMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{ShadowOnlyMaterial:()=>ShadowOnlyMaterial});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__);
__webpack_require__("../../../dev/materials/src/shadowOnly/shadowOnly.fragment.ts");__webpack_require__("../../../dev/materials/src/shadowOnly/shadowOnly.vertex.ts");var ShadowOnlyMaterialDefines=function(_super){function ShadowOnlyMaterialDefines(){var _this=_super.call(this)||this;_this.CLIPPLANE=!1;_this.CLIPPLANE2=!1;_this.CLIPPLANE3=!1;_this.CLIPPLANE4=!1;_this.CLIPPLANE5=!1;_this.CLIPPLANE6=!1;_this.POINTSIZE=!1;_this.FOG=!1;_this.NORMAL=!1;_this.NUM_BONE_INFLUENCERS=0;_this.BonesPerMesh=0;
_this.INSTANCES=!1;_this.IMAGEPROCESSINGPOSTPROCESS=!1;_this.SKIPFINALCOLORCLAMP=!1;_this.rebuild();return _this}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(ShadowOnlyMaterialDefines,_super);return ShadowOnlyMaterialDefines}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialDefines),ShadowOnlyMaterial=function(_super){function ShadowOnlyMaterial(name,scene){name=_super.call(this,name,scene)||this;name._needAlphaBlending=!0;name.shadowColor=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3.Black();
return name}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(ShadowOnlyMaterial,_super);ShadowOnlyMaterial.prototype.needAlphaBlending=function(){return this._needAlphaBlending};ShadowOnlyMaterial.prototype.needAlphaTesting=function(){return!1};ShadowOnlyMaterial.prototype.getAlphaTestTexture=function(){return null};Object.defineProperty(ShadowOnlyMaterial.prototype,"activeLight",{get:function(){return this._activeLight},set:function(light){this._activeLight=light},enumerable:!1,configurable:!0});
ShadowOnlyMaterial.prototype._getFirstShadowLightForMesh=function(mesh){var _i=0;for(mesh=mesh.lightSources;_i<mesh.length;_i++){var light=mesh[_i];if(light.shadowEnabled)return light}return null};ShadowOnlyMaterial.prototype.isReadyForSubMesh=function(mesh,subMesh,useInstances){var _a;if(this.isFrozen&&subMesh.effect&&subMesh.effect._wasPreviouslyReady&&subMesh.effect._wasPreviouslyUsingInstances===useInstances)return!0;subMesh.materialDefines||(subMesh.materialDefines=new ShadowOnlyMaterialDefines);
var defines=subMesh.materialDefines,scene=this.getScene();if(this._isReadyForSubMesh(subMesh))return!0;var engine=scene.getEngine();if(this._activeLight)for(var _i=0,_b=mesh.lightSources;_i<_b.length;_i++){var light=_b[_i];if(light.shadowEnabled){if(this._activeLight===light)break;_i=mesh.lightSources.indexOf(this._activeLight);-1!==_i&&(mesh.lightSources.splice(_i,1),mesh.lightSources.splice(0,0,this._activeLight));break}}babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForFrameBoundValues(scene,
engine,this,defines,useInstances?!0:!1);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForMisc(mesh,scene,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(mesh),defines);defines._needNormals=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForLights(scene,mesh,defines,!1,1);_i=null===(_a=this._getFirstShadowLightForMesh(mesh))||void 0===_a?void 0:_a.getShadowGenerator();this._needAlphaBlending=!0;_i&&_i.getClassName&&
"CascadedShadowGenerator"===_i.getClassName()&&(this._needAlphaBlending=!_i.autoCalcDepthBounds);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForAttributes(mesh,defines,!1,!0);if(defines.isDirty){defines.markAsProcessed();scene.resetCachedMaterial();_a=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.EffectFallbacks;defines.FOG&&_a.addFallback(1,"FOG");babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.HandleFallbacksForShadows(defines,
_a,1);0<defines.NUM_BONE_INFLUENCERS&&_a.addCPUSkinningFallback(0,mesh);defines.IMAGEPROCESSINGPOSTPROCESS=scene.imageProcessingConfiguration.applyByPostProcess;_i=[babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.PositionKind];defines.NORMAL&&_i.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.NormalKind);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForBones(_i,mesh,defines,_a);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForInstances(_i,
defines);mesh=defines.toString();_b="world view viewProjection vEyePosition vLightsType vFogInfos vFogColor pointSize alpha shadowColor mBones".split(" ");light=[];var uniformBuffers=[];(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.addClipPlaneUniforms)(_b);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:_b,uniformBuffersNames:uniformBuffers,samplers:light,defines,maxSimultaneousLights:1});subMesh.setEffect(scene.getEngine().createEffect("shadowOnly",
{attributes:_i,uniformsNames:_b,uniformBuffersNames:uniformBuffers,samplers:light,defines:mesh,fallbacks:_a,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:1}},engine),defines,this._materialContext)}if(!subMesh.effect||!subMesh.effect.isReady())return!1;defines._renderId=scene.getRenderId();subMesh.effect._wasPreviouslyReady=!0;subMesh.effect._wasPreviouslyUsingInstances=!!useInstances;return!0};ShadowOnlyMaterial.prototype.bindForSubMesh=function(world,mesh,
subMesh){var scene=this.getScene(),defines=subMesh.materialDefines;defines&&(subMesh=subMesh.effect)&&(this._activeEffect=subMesh,this.bindOnlyWorldMatrix(world),this._activeEffect.setMatrix("viewProjection",scene.getTransformMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindBonesParameters(mesh,this._activeEffect),this._mustRebind(scene,subMesh)&&((0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.bindClipPlane)(subMesh,this,scene),this.pointsCloud&&this._activeEffect.setFloat("pointSize",
this.pointSize),this._activeEffect.setFloat("alpha",this.alpha),this._activeEffect.setColor3("shadowColor",this.shadowColor),scene.bindEyePosition(subMesh)),scene.lightsEnabled&&(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindLights(scene,mesh,this._activeEffect,defines,1),world=this._getFirstShadowLightForMesh(mesh))&&(world._renderId=-1),(scene.fogEnabled&&mesh.applyFog&&scene.fogMode!==babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Scene.FOGMODE_NONE||defines.SHADOWCSM0)&&
this._activeEffect.setMatrix("view",scene.getViewMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindFogParameters(scene,mesh,this._activeEffect),this._afterBind(mesh,this._activeEffect))};ShadowOnlyMaterial.prototype.clone=function(name){var _this=this;return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Clone(function(){return new ShadowOnlyMaterial(name,_this.getScene())},this)};ShadowOnlyMaterial.prototype.serialize=function(){var serializationObject=
_super.prototype.serialize.call(this);serializationObject.customType="BABYLON.ShadowOnlyMaterial";return serializationObject};ShadowOnlyMaterial.prototype.getClassName=function(){return"ShadowOnlyMaterial"};ShadowOnlyMaterial.Parse=function(source,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Parse(function(){return new ShadowOnlyMaterial(source.name,scene)},source,scene,rootUrl)};return ShadowOnlyMaterial}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.PushMaterial);
(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.ShadowOnlyMaterial",ShadowOnlyMaterial)},"../../../dev/materials/src/simple/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{SimpleMaterial:()=>_simpleMaterial__WEBPACK_IMPORTED_MODULE_0__.SimpleMaterial});var _simpleMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../dev/materials/src/simple/simpleMaterial.ts")},
"../../../dev/materials/src/simple/simple.fragment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{simplePixelShader:()=>simplePixelShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.simplePixelShader="precision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform sampler2D diffuseSampler;\nuniform vec2 vDiffuseInfos;\n#endif\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nvec4 baseColor\x3dvec4(1.,1.,1.,1.);\nvec3 diffuseColor\x3dvDiffuseColor.rgb;\nfloat alpha\x3dvDiffuseColor.a;\n#ifdef DIFFUSE\nbaseColor\x3dtexture2D(diffuseSampler,vDiffuseUV);\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\nbaseColor.rgb*\x3dvDiffuseInfos.y;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\nfloat glossiness\x3d0.;\n#ifdef SPECULARTERM\nvec3 specularBase\x3dvec3(0.,0.,0.);\n#endif \n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\nvec4 color\x3dvec4(finalDiffuse,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}";
var simplePixelShader={name:"simplePixelShader",shader:"precision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform sampler2D diffuseSampler;\nuniform vec2 vDiffuseInfos;\n#endif\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nvec4 baseColor\x3dvec4(1.,1.,1.,1.);\nvec3 diffuseColor\x3dvDiffuseColor.rgb;\nfloat alpha\x3dvDiffuseColor.a;\n#ifdef DIFFUSE\nbaseColor\x3dtexture2D(diffuseSampler,vDiffuseUV);\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\nbaseColor.rgb*\x3dvDiffuseInfos.y;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\nfloat glossiness\x3d0.;\n#ifdef SPECULARTERM\nvec3 specularBase\x3dvec3(0.,0.,0.);\n#endif \n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\nvec4 color\x3dvec4(finalDiffuse,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}"}},
"../../../dev/materials/src/simple/simple.vertex.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{simpleVertexShader:()=>simpleVertexShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.simpleVertexShader="precision highp float;\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\ngl_Position\x3dviewProjection*worldPos;\nvPositionW\x3dvec3(worldPos);\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vDiffuseInfos.x\x3d\x3d0.)\n{\nvDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n";
var simpleVertexShader={name:"simpleVertexShader",shader:"precision highp float;\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\ngl_Position\x3dviewProjection*worldPos;\nvPositionW\x3dvec3(worldPos);\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vDiffuseInfos.x\x3d\x3d0.)\n{\nvDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV\x3dvec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n"}},
"../../../dev/materials/src/simple/simpleMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{SimpleMaterial:()=>SimpleMaterial});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__);
__webpack_require__("../../../dev/materials/src/simple/simple.fragment.ts");__webpack_require__("../../../dev/materials/src/simple/simple.vertex.ts");var SimpleMaterialDefines=function(_super){function SimpleMaterialDefines(){var _this=_super.call(this)||this;_this.DIFFUSE=!1;_this.CLIPPLANE=!1;_this.CLIPPLANE2=!1;_this.CLIPPLANE3=!1;_this.CLIPPLANE4=!1;_this.CLIPPLANE5=!1;_this.CLIPPLANE6=!1;_this.ALPHATEST=!1;_this.DEPTHPREPASS=!1;_this.POINTSIZE=!1;_this.FOG=!1;_this.NORMAL=!1;_this.UV1=!1;_this.UV2=
!1;_this.VERTEXCOLOR=!1;_this.VERTEXALPHA=!1;_this.NUM_BONE_INFLUENCERS=0;_this.BonesPerMesh=0;_this.INSTANCES=!1;_this.INSTANCESCOLOR=!1;_this.IMAGEPROCESSINGPOSTPROCESS=!1;_this.SKIPFINALCOLORCLAMP=!1;_this.rebuild();return _this}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(SimpleMaterialDefines,_super);return SimpleMaterialDefines}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialDefines),SimpleMaterial=function(_super){function SimpleMaterial(name,scene){name=_super.call(this,
name,scene)||this;name.diffuseColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(1,1,1);name._disableLighting=!1;name._maxSimultaneousLights=4;return name}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(SimpleMaterial,_super);SimpleMaterial.prototype.needAlphaBlending=function(){return 1>this.alpha};SimpleMaterial.prototype.needAlphaTesting=function(){return!1};SimpleMaterial.prototype.getAlphaTestTexture=function(){return null};SimpleMaterial.prototype.isReadyForSubMesh=function(mesh,
subMesh,useInstances){if(this.isFrozen&&subMesh.effect&&subMesh.effect._wasPreviouslyReady&&subMesh.effect._wasPreviouslyUsingInstances===useInstances)return!0;subMesh.materialDefines||(subMesh.materialDefines=new SimpleMaterialDefines);var defines=subMesh.materialDefines,scene=this.getScene();if(this._isReadyForSubMesh(subMesh))return!0;var engine=scene.getEngine();if(defines._areTexturesDirty&&(defines._needUVs=!1,scene.texturesEnabled&&this._diffuseTexture&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled))if(this._diffuseTexture.isReady())defines._needUVs=
!0,defines.DIFFUSE=!0;else return!1;babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForMisc(mesh,scene,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(mesh),defines);defines._needNormals=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForLights(scene,mesh,defines,!1,this._maxSimultaneousLights,this._disableLighting);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForFrameBoundValues(scene,
engine,this,defines,useInstances?!0:!1);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForAttributes(mesh,defines,!0,!0);if(defines.isDirty){defines.markAsProcessed();scene.resetCachedMaterial();var fallbacks=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.EffectFallbacks;defines.FOG&&fallbacks.addFallback(1,"FOG");babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.HandleFallbacksForShadows(defines,fallbacks,this.maxSimultaneousLights);
0<defines.NUM_BONE_INFLUENCERS&&fallbacks.addCPUSkinningFallback(0,mesh);defines.IMAGEPROCESSINGPOSTPROCESS=scene.imageProcessingConfiguration.applyByPostProcess;var attribs=[babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.PositionKind];defines.NORMAL&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.NormalKind);defines.UV1&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UVKind);defines.UV2&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UV2Kind);
defines.VERTEXCOLOR&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.ColorKind);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForBones(attribs,mesh,defines,fallbacks);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForInstances(attribs,defines);mesh=defines.toString();var uniforms="world view viewProjection vEyePosition vLightsType vDiffuseColor vFogInfos vFogColor pointSize vDiffuseInfos mBones diffuseMatrix".split(" "),
samplers=["diffuseSampler"],uniformBuffers=[];(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.addClipPlaneUniforms)(uniforms);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:uniforms,uniformBuffersNames:uniformBuffers,samplers,defines,maxSimultaneousLights:this.maxSimultaneousLights});subMesh.setEffect(scene.getEngine().createEffect("simple",{attributes:attribs,uniformsNames:uniforms,uniformBuffersNames:uniformBuffers,samplers,
defines:mesh,fallbacks,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights-1}},engine),defines,this._materialContext)}if(!subMesh.effect||!subMesh.effect.isReady())return!1;defines._renderId=scene.getRenderId();subMesh.effect._wasPreviouslyReady=!0;subMesh.effect._wasPreviouslyUsingInstances=!!useInstances;return!0};SimpleMaterial.prototype.bindForSubMesh=function(world,mesh,subMesh){var scene=this.getScene(),defines=subMesh.materialDefines;
defines&&(subMesh=subMesh.effect)&&(this._activeEffect=subMesh,this.bindOnlyWorldMatrix(world),this._activeEffect.setMatrix("viewProjection",scene.getTransformMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindBonesParameters(mesh,this._activeEffect),this._mustRebind(scene,subMesh)&&(this._diffuseTexture&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled&&(this._activeEffect.setTexture("diffuseSampler",this._diffuseTexture),
this._activeEffect.setFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),this._activeEffect.setMatrix("diffuseMatrix",this._diffuseTexture.getTextureMatrix())),(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.bindClipPlane)(subMesh,this,scene),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),scene.bindEyePosition(subMesh)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*mesh.visibility),scene.lightsEnabled&&
!this.disableLighting&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindLights(scene,mesh,this._activeEffect,defines,this.maxSimultaneousLights),scene.fogEnabled&&mesh.applyFog&&scene.fogMode!==babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",scene.getViewMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindFogParameters(scene,mesh,this._activeEffect),this._afterBind(mesh,this._activeEffect))};
SimpleMaterial.prototype.getAnimatables=function(){var results=[];this._diffuseTexture&&this._diffuseTexture.animations&&0<this._diffuseTexture.animations.length&&results.push(this._diffuseTexture);return results};SimpleMaterial.prototype.getActiveTextures=function(){var activeTextures=_super.prototype.getActiveTextures.call(this);this._diffuseTexture&&activeTextures.push(this._diffuseTexture);return activeTextures};SimpleMaterial.prototype.hasTexture=function(texture){return _super.prototype.hasTexture.call(this,
texture)||this.diffuseTexture===texture?!0:!1};SimpleMaterial.prototype.dispose=function(forceDisposeEffect){this._diffuseTexture&&this._diffuseTexture.dispose();_super.prototype.dispose.call(this,forceDisposeEffect)};SimpleMaterial.prototype.clone=function(name){var _this=this;return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Clone(function(){return new SimpleMaterial(name,_this.getScene())},this)};SimpleMaterial.prototype.serialize=function(){var serializationObject=
_super.prototype.serialize.call(this);serializationObject.customType="BABYLON.SimpleMaterial";return serializationObject};SimpleMaterial.prototype.getClassName=function(){return"SimpleMaterial"};SimpleMaterial.Parse=function(source,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Parse(function(){return new SimpleMaterial(source.name,scene)},source,scene,rootUrl)};(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture")],
SimpleMaterial.prototype,"_diffuseTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],SimpleMaterial.prototype,"diffuseTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)("diffuse")],SimpleMaterial.prototype,"diffuseColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("disableLighting")],
SimpleMaterial.prototype,"_disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],SimpleMaterial.prototype,"disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("maxSimultaneousLights")],SimpleMaterial.prototype,"_maxSimultaneousLights",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],
SimpleMaterial.prototype,"maxSimultaneousLights",void 0);return SimpleMaterial}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.PushMaterial);(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.SimpleMaterial",SimpleMaterial)},"../../../dev/materials/src/sky/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{SkyMaterial:()=>_skyMaterial__WEBPACK_IMPORTED_MODULE_0__.SkyMaterial});
var _skyMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../dev/materials/src/sky/skyMaterial.ts")},"../../../dev/materials/src/sky/sky.fragment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{skyPixelShader:()=>skyPixelShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.skyPixelShader=
"precision highp float;\nvarying vec3 vPositionW;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneFragmentDeclaration\x3e\nuniform vec3 cameraPosition;\nuniform vec3 cameraOffset;\nuniform vec3 up;\nuniform float luminance;\nuniform float turbidity;\nuniform float rayleigh;\nuniform float mieCoefficient;\nuniform float mieDirectionalG;\nuniform vec3 sunPosition;\n#include\x3cfogFragmentDeclaration\x3e\nconst float e\x3d2.71828182845904523536028747135266249775724709369995957;\nconst float pi\x3d3.141592653589793238462643383279502884197169;\nconst float n\x3d1.0003;\nconst float N\x3d2.545E25;\nconst float pn\x3d0.035;\nconst vec3 lambda\x3dvec3(680E-9,550E-9,450E-9);\nconst vec3 K\x3dvec3(0.686,0.678,0.666);\nconst float v\x3d4.0;\nconst float rayleighZenithLength\x3d8.4E3;\nconst float mieZenithLength\x3d1.25E3;\nconst float EE\x3d1000.0;\nconst float sunAngularDiameterCos\x3d0.999956676946448443553574619906976478926848692873900859324;\nconst float cutoffAngle\x3dpi/1.95;\nconst float steepness\x3d1.5;\nvec3 totalRayleigh(vec3 lambda)\n{\nreturn (8.0*pow(pi,3.0)*pow(pow(n,2.0)-1.0,2.0)*(6.0+3.0*pn))/(3.0*N*pow(lambda,vec3(4.0))*(6.0-7.0*pn));\n}\nvec3 simplifiedRayleigh()\n{\nreturn 0.0005/vec3(94,40,18);\n}\nfloat rayleighPhase(float cosTheta)\n{ \nreturn (3.0/(16.0*pi))*(1.0+pow(cosTheta,2.0));\n}\nvec3 totalMie(vec3 lambda,vec3 K,float T)\n{\nfloat c\x3d(0.2*T )*10E-18;\nreturn 0.434*c*pi*pow((2.0*pi)/lambda,vec3(v-2.0))*K;\n}\nfloat hgPhase(float cosTheta,float g)\n{\nreturn (1.0/(4.0*pi))*((1.0-pow(g,2.0))/pow(1.0-2.0*g*cosTheta+pow(g,2.0),1.5));\n}\nfloat sunIntensity(float zenithAngleCos)\n{\nreturn EE*max(0.0,1.0-exp((-(cutoffAngle-acos(zenithAngleCos))/steepness)));\n}\nfloat A\x3d0.15;\nfloat B\x3d0.50;\nfloat C\x3d0.10;\nfloat D\x3d0.20;\nfloat EEE\x3d0.02;\nfloat F\x3d0.30;\nfloat W\x3d1000.0;\nvec3 Uncharted2Tonemap(vec3 x)\n{\nreturn ((x*(A*x+C*B)+D*EEE)/(x*(A*x+B)+D*F))-EEE/F;\n}\n#if DITHER\n#include\x3chelperFunctions\x3e\n#endif\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\n/**\n*--------------------------------------------------------------------------------------------------\n* Sky Color\n*--------------------------------------------------------------------------------------------------\n*/\nfloat sunfade\x3d1.0-clamp(1.0-exp((sunPosition.y/450000.0)),0.0,1.0);\nfloat rayleighCoefficient\x3drayleigh-(1.0*(1.0-sunfade));\nvec3 sunDirection\x3dnormalize(sunPosition);\nfloat sunE\x3dsunIntensity(dot(sunDirection,up));\nvec3 betaR\x3dsimplifiedRayleigh()*rayleighCoefficient;\nvec3 betaM\x3dtotalMie(lambda,K,turbidity)*mieCoefficient;\nfloat zenithAngle\x3dacos(max(0.0,dot(up,normalize(vPositionW-cameraPosition+cameraOffset))));\nfloat sR\x3drayleighZenithLength/(cos(zenithAngle)+0.15*pow(93.885-((zenithAngle*180.0)/pi),-1.253));\nfloat sM\x3dmieZenithLength/(cos(zenithAngle)+0.15*pow(93.885-((zenithAngle*180.0)/pi),-1.253));\nvec3 Fex\x3dexp(-(betaR*sR+betaM*sM));\nfloat cosTheta\x3ddot(normalize(vPositionW-cameraPosition),sunDirection);\nfloat rPhase\x3drayleighPhase(cosTheta*0.5+0.5);\nvec3 betaRTheta\x3dbetaR*rPhase;\nfloat mPhase\x3dhgPhase(cosTheta,mieDirectionalG);\nvec3 betaMTheta\x3dbetaM*mPhase;\nvec3 Lin\x3dpow(sunE*((betaRTheta+betaMTheta)/(betaR+betaM))*(1.0-Fex),vec3(1.5));\nLin*\x3dmix(vec3(1.0),pow(sunE*((betaRTheta+betaMTheta)/(betaR+betaM))*Fex,vec3(1.0/2.0)),clamp(pow(1.0-dot(up,sunDirection),5.0),0.0,1.0));\nvec3 direction\x3dnormalize(vPositionW-cameraPosition);\nfloat theta\x3dacos(direction.y);\nfloat phi\x3datan(direction.z,direction.x);\nvec2 uv\x3dvec2(phi,theta)/vec2(2.0*pi,pi)+vec2(0.5,0.0);\nvec3 L0\x3dvec3(0.1)*Fex;\nfloat sundisk\x3dsmoothstep(sunAngularDiameterCos,sunAngularDiameterCos+0.00002,cosTheta);\nL0+\x3d(sunE*19000.0*Fex)*sundisk;\nvec3 whiteScale\x3d1.0/Uncharted2Tonemap(vec3(W));\nvec3 texColor\x3d(Lin+L0);\ntexColor*\x3d0.04 ;\ntexColor+\x3dvec3(0.0,0.001,0.0025)*0.3;\nfloat g_fMaxLuminance\x3d1.0;\nfloat fLumScaled\x3d0.1/luminance; \nfloat fLumCompressed\x3d(fLumScaled*(1.0+(fLumScaled/(g_fMaxLuminance*g_fMaxLuminance))))/(1.0+fLumScaled); \nfloat ExposureBias\x3dfLumCompressed;\nvec3 curr\x3dUncharted2Tonemap((log2(2.0/pow(luminance,4.0)))*texColor);\nvec3 retColor\x3dcurr*whiteScale;\n/**\n*--------------------------------------------------------------------------------------------------\n* Sky Color\n*--------------------------------------------------------------------------------------------------\n*/\nfloat alpha\x3d1.0;\n#ifdef VERTEXCOLOR\nretColor.rgb*\x3dvColor.rgb;\n#endif\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\n#if DITHER\nretColor.rgb+\x3ddither(gl_FragCoord.xy,0.5);\n#endif\nvec4 color\x3dclamp(vec4(retColor.rgb,alpha),0.0,1.0);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}\n";
var skyPixelShader={name:"skyPixelShader",shader:"precision highp float;\nvarying vec3 vPositionW;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneFragmentDeclaration\x3e\nuniform vec3 cameraPosition;\nuniform vec3 cameraOffset;\nuniform vec3 up;\nuniform float luminance;\nuniform float turbidity;\nuniform float rayleigh;\nuniform float mieCoefficient;\nuniform float mieDirectionalG;\nuniform vec3 sunPosition;\n#include\x3cfogFragmentDeclaration\x3e\nconst float e\x3d2.71828182845904523536028747135266249775724709369995957;\nconst float pi\x3d3.141592653589793238462643383279502884197169;\nconst float n\x3d1.0003;\nconst float N\x3d2.545E25;\nconst float pn\x3d0.035;\nconst vec3 lambda\x3dvec3(680E-9,550E-9,450E-9);\nconst vec3 K\x3dvec3(0.686,0.678,0.666);\nconst float v\x3d4.0;\nconst float rayleighZenithLength\x3d8.4E3;\nconst float mieZenithLength\x3d1.25E3;\nconst float EE\x3d1000.0;\nconst float sunAngularDiameterCos\x3d0.999956676946448443553574619906976478926848692873900859324;\nconst float cutoffAngle\x3dpi/1.95;\nconst float steepness\x3d1.5;\nvec3 totalRayleigh(vec3 lambda)\n{\nreturn (8.0*pow(pi,3.0)*pow(pow(n,2.0)-1.0,2.0)*(6.0+3.0*pn))/(3.0*N*pow(lambda,vec3(4.0))*(6.0-7.0*pn));\n}\nvec3 simplifiedRayleigh()\n{\nreturn 0.0005/vec3(94,40,18);\n}\nfloat rayleighPhase(float cosTheta)\n{ \nreturn (3.0/(16.0*pi))*(1.0+pow(cosTheta,2.0));\n}\nvec3 totalMie(vec3 lambda,vec3 K,float T)\n{\nfloat c\x3d(0.2*T )*10E-18;\nreturn 0.434*c*pi*pow((2.0*pi)/lambda,vec3(v-2.0))*K;\n}\nfloat hgPhase(float cosTheta,float g)\n{\nreturn (1.0/(4.0*pi))*((1.0-pow(g,2.0))/pow(1.0-2.0*g*cosTheta+pow(g,2.0),1.5));\n}\nfloat sunIntensity(float zenithAngleCos)\n{\nreturn EE*max(0.0,1.0-exp((-(cutoffAngle-acos(zenithAngleCos))/steepness)));\n}\nfloat A\x3d0.15;\nfloat B\x3d0.50;\nfloat C\x3d0.10;\nfloat D\x3d0.20;\nfloat EEE\x3d0.02;\nfloat F\x3d0.30;\nfloat W\x3d1000.0;\nvec3 Uncharted2Tonemap(vec3 x)\n{\nreturn ((x*(A*x+C*B)+D*EEE)/(x*(A*x+B)+D*F))-EEE/F;\n}\n#if DITHER\n#include\x3chelperFunctions\x3e\n#endif\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\n/**\n*--------------------------------------------------------------------------------------------------\n* Sky Color\n*--------------------------------------------------------------------------------------------------\n*/\nfloat sunfade\x3d1.0-clamp(1.0-exp((sunPosition.y/450000.0)),0.0,1.0);\nfloat rayleighCoefficient\x3drayleigh-(1.0*(1.0-sunfade));\nvec3 sunDirection\x3dnormalize(sunPosition);\nfloat sunE\x3dsunIntensity(dot(sunDirection,up));\nvec3 betaR\x3dsimplifiedRayleigh()*rayleighCoefficient;\nvec3 betaM\x3dtotalMie(lambda,K,turbidity)*mieCoefficient;\nfloat zenithAngle\x3dacos(max(0.0,dot(up,normalize(vPositionW-cameraPosition+cameraOffset))));\nfloat sR\x3drayleighZenithLength/(cos(zenithAngle)+0.15*pow(93.885-((zenithAngle*180.0)/pi),-1.253));\nfloat sM\x3dmieZenithLength/(cos(zenithAngle)+0.15*pow(93.885-((zenithAngle*180.0)/pi),-1.253));\nvec3 Fex\x3dexp(-(betaR*sR+betaM*sM));\nfloat cosTheta\x3ddot(normalize(vPositionW-cameraPosition),sunDirection);\nfloat rPhase\x3drayleighPhase(cosTheta*0.5+0.5);\nvec3 betaRTheta\x3dbetaR*rPhase;\nfloat mPhase\x3dhgPhase(cosTheta,mieDirectionalG);\nvec3 betaMTheta\x3dbetaM*mPhase;\nvec3 Lin\x3dpow(sunE*((betaRTheta+betaMTheta)/(betaR+betaM))*(1.0-Fex),vec3(1.5));\nLin*\x3dmix(vec3(1.0),pow(sunE*((betaRTheta+betaMTheta)/(betaR+betaM))*Fex,vec3(1.0/2.0)),clamp(pow(1.0-dot(up,sunDirection),5.0),0.0,1.0));\nvec3 direction\x3dnormalize(vPositionW-cameraPosition);\nfloat theta\x3dacos(direction.y);\nfloat phi\x3datan(direction.z,direction.x);\nvec2 uv\x3dvec2(phi,theta)/vec2(2.0*pi,pi)+vec2(0.5,0.0);\nvec3 L0\x3dvec3(0.1)*Fex;\nfloat sundisk\x3dsmoothstep(sunAngularDiameterCos,sunAngularDiameterCos+0.00002,cosTheta);\nL0+\x3d(sunE*19000.0*Fex)*sundisk;\nvec3 whiteScale\x3d1.0/Uncharted2Tonemap(vec3(W));\nvec3 texColor\x3d(Lin+L0);\ntexColor*\x3d0.04 ;\ntexColor+\x3dvec3(0.0,0.001,0.0025)*0.3;\nfloat g_fMaxLuminance\x3d1.0;\nfloat fLumScaled\x3d0.1/luminance; \nfloat fLumCompressed\x3d(fLumScaled*(1.0+(fLumScaled/(g_fMaxLuminance*g_fMaxLuminance))))/(1.0+fLumScaled); \nfloat ExposureBias\x3dfLumCompressed;\nvec3 curr\x3dUncharted2Tonemap((log2(2.0/pow(luminance,4.0)))*texColor);\nvec3 retColor\x3dcurr*whiteScale;\n/**\n*--------------------------------------------------------------------------------------------------\n* Sky Color\n*--------------------------------------------------------------------------------------------------\n*/\nfloat alpha\x3d1.0;\n#ifdef VERTEXCOLOR\nretColor.rgb*\x3dvColor.rgb;\n#endif\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\n#if DITHER\nretColor.rgb+\x3ddither(gl_FragCoord.xy,0.5);\n#endif\nvec4 color\x3dclamp(vec4(retColor.rgb,alpha),0.0,1.0);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}\n"}},
"../../../dev/materials/src/sky/sky.vertex.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{skyVertexShader:()=>skyVertexShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.skyVertexShader="precision highp float;\nattribute vec3 position;\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\nuniform mat4 world;\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\ngl_Position\x3dviewProjection*world*vec4(position,1.0);\nvec4 worldPos\x3dworld*vec4(position,1.0);\nvPositionW\x3dvec3(worldPos);\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#ifdef VERTEXCOLOR\nvColor\x3dcolor;\n#endif\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n";
var skyVertexShader={name:"skyVertexShader",shader:"precision highp float;\nattribute vec3 position;\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\nuniform mat4 world;\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\ngl_Position\x3dviewProjection*world*vec4(position,1.0);\nvec4 worldPos\x3dworld*vec4(position,1.0);\nvPositionW\x3dvec3(worldPos);\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#ifdef VERTEXCOLOR\nvColor\x3dcolor;\n#endif\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n"}},
"../../../dev/materials/src/sky/skyMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{SkyMaterial:()=>SkyMaterial});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__);
__webpack_require__("../../../dev/materials/src/sky/sky.fragment.ts");__webpack_require__("../../../dev/materials/src/sky/sky.vertex.ts");var SkyMaterialDefines=function(_super){function SkyMaterialDefines(){var _this=_super.call(this)||this;_this.CLIPPLANE=!1;_this.CLIPPLANE2=!1;_this.CLIPPLANE3=!1;_this.CLIPPLANE4=!1;_this.CLIPPLANE5=!1;_this.CLIPPLANE6=!1;_this.POINTSIZE=!1;_this.FOG=!1;_this.VERTEXCOLOR=!1;_this.VERTEXALPHA=!1;_this.IMAGEPROCESSINGPOSTPROCESS=!1;_this.SKIPFINALCOLORCLAMP=!1;_this.DITHER=
!1;_this.rebuild();return _this}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(SkyMaterialDefines,_super);return SkyMaterialDefines}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialDefines),SkyMaterial=function(_super){function SkyMaterial(name,scene){name=_super.call(this,name,scene)||this;name.luminance=1;name.turbidity=10;name.rayleigh=2;name.mieCoefficient=.005;name.mieDirectionalG=.8;name.distance=500;name.inclination=.49;name.azimuth=.25;name.sunPosition=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,
100,0);name.useSunPosition=!1;name.cameraOffset=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector3.Zero();name.up=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector3.Up();name.dithering=!1;name._cameraPosition=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector3.Zero();name._skyOrientation=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Quaternion;return name}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(SkyMaterial,_super);SkyMaterial.prototype.needAlphaBlending=
function(){return 1>this.alpha};SkyMaterial.prototype.needAlphaTesting=function(){return!1};SkyMaterial.prototype.getAlphaTestTexture=function(){return null};SkyMaterial.prototype.isReadyForSubMesh=function(mesh,subMesh){if(this.isFrozen&&subMesh.effect&&subMesh.effect._wasPreviouslyReady)return!0;subMesh.materialDefines||(subMesh.materialDefines=new SkyMaterialDefines);var defines=subMesh.materialDefines,scene=this.getScene();if(this._isReadyForSubMesh(subMesh))return!0;babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForMisc(mesh,
scene,!1,this.pointsCloud,this.fogEnabled,!1,defines);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForAttributes(mesh,defines,!0,!1);defines.IMAGEPROCESSINGPOSTPROCESS!==scene.imageProcessingConfiguration.applyByPostProcess&&defines.markAsMiscDirty();defines.DITHER!==this.dithering&&defines.markAsMiscDirty();if(defines.isDirty){defines.markAsProcessed();scene.resetCachedMaterial();mesh=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.EffectFallbacks;
defines.FOG&&mesh.addFallback(1,"FOG");defines.IMAGEPROCESSINGPOSTPROCESS=scene.imageProcessingConfiguration.applyByPostProcess;defines.DITHER=this.dithering;var attribs=[babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.PositionKind];defines.VERTEXCOLOR&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.ColorKind);var uniforms="world viewProjection view vFogInfos vFogColor pointSize luminance turbidity rayleigh mieCoefficient mieDirectionalG sunPosition cameraPosition cameraOffset up".split(" ");
(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.addClipPlaneUniforms)(uniforms);var join=defines.toString();subMesh.setEffect(scene.getEngine().createEffect("sky",attribs,uniforms,[],join,mesh,this.onCompiled,this.onError),defines,this._materialContext)}if(!subMesh.effect||!subMesh.effect.isReady())return!1;defines._renderId=scene.getRenderId();return subMesh.effect._wasPreviouslyReady=!0};SkyMaterial.prototype.bindForSubMesh=function(world,mesh,subMesh){var scene=this.getScene();if(subMesh.materialDefines&&
(subMesh=subMesh.effect)){this._activeEffect=subMesh;this.bindOnlyWorldMatrix(world);this._activeEffect.setMatrix("viewProjection",scene.getTransformMatrix());this._mustRebind(scene,subMesh)&&((0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.bindClipPlane)(subMesh,this,scene),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize));scene.fogEnabled&&mesh.applyFog&&scene.fogMode!==babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",
scene.getViewMatrix());babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindFogParameters(scene,mesh,this._activeEffect);if(world=scene.activeCamera)world=world.getWorldMatrix(),this._cameraPosition.x=world.m[12],this._cameraPosition.y=world.m[13],this._cameraPosition.z=world.m[14],this._activeEffect.setVector3("cameraPosition",this._cameraPosition);this._activeEffect.setVector3("cameraOffset",this.cameraOffset);this._activeEffect.setVector3("up",this.up);0<this.luminance&&this._activeEffect.setFloat("luminance",
this.luminance);this._activeEffect.setFloat("turbidity",this.turbidity);this._activeEffect.setFloat("rayleigh",this.rayleigh);this._activeEffect.setFloat("mieCoefficient",this.mieCoefficient);this._activeEffect.setFloat("mieDirectionalG",this.mieDirectionalG);this.useSunPosition||(world=Math.PI*(this.inclination-.5),scene=2*Math.PI*(this.azimuth-.5),this.sunPosition.x=this.distance*Math.cos(scene)*Math.cos(world),this.sunPosition.y=this.distance*Math.sin(-world),this.sunPosition.z=this.distance*Math.sin(scene)*
Math.cos(world),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Quaternion.FromUnitVectorsToRef(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector3.UpReadOnly,this.up,this._skyOrientation),this.sunPosition.rotateByQuaternionToRef(this._skyOrientation,this.sunPosition));this._activeEffect.setVector3("sunPosition",this.sunPosition);this._afterBind(mesh,this._activeEffect)}};SkyMaterial.prototype.getAnimatables=function(){return[]};SkyMaterial.prototype.dispose=function(forceDisposeEffect){_super.prototype.dispose.call(this,
forceDisposeEffect)};SkyMaterial.prototype.clone=function(name){var _this=this;return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Clone(function(){return new SkyMaterial(name,_this.getScene())},this)};SkyMaterial.prototype.serialize=function(){var serializationObject=_super.prototype.serialize.call(this);serializationObject.customType="BABYLON.SkyMaterial";return serializationObject};SkyMaterial.prototype.getClassName=function(){return"SkyMaterial"};SkyMaterial.Parse=
function(source,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Parse(function(){return new SkyMaterial(source.name,scene)},source,scene,rootUrl)};(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],SkyMaterial.prototype,"luminance",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],SkyMaterial.prototype,
"turbidity",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],SkyMaterial.prototype,"rayleigh",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],SkyMaterial.prototype,"mieCoefficient",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],SkyMaterial.prototype,"mieDirectionalG",
void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],SkyMaterial.prototype,"distance",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],SkyMaterial.prototype,"inclination",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],SkyMaterial.prototype,"azimuth",void 0);
(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsVector3)()],SkyMaterial.prototype,"sunPosition",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],SkyMaterial.prototype,"useSunPosition",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsVector3)()],SkyMaterial.prototype,"cameraOffset",
void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsVector3)()],SkyMaterial.prototype,"up",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],SkyMaterial.prototype,"dithering",void 0);return SkyMaterial}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.PushMaterial);(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.SkyMaterial",
SkyMaterial)},"../../../dev/materials/src/terrain/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{TerrainMaterial:()=>_terrainMaterial__WEBPACK_IMPORTED_MODULE_0__.TerrainMaterial});var _terrainMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../dev/materials/src/terrain/terrainMaterial.ts")},"../../../dev/materials/src/terrain/terrain.fragment.ts":(__unused_webpack_module,
__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{terrainPixelShader:()=>terrainPixelShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.terrainPixelShader="precision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#ifdef DIFFUSE\nvarying vec2 vTextureUV;\nuniform sampler2D textureSampler;\nuniform vec2 vTextureInfos;\nuniform sampler2D diffuse1Sampler;\nuniform sampler2D diffuse2Sampler;\nuniform sampler2D diffuse3Sampler;\nuniform vec2 diffuse1Infos;\nuniform vec2 diffuse2Infos;\nuniform vec2 diffuse3Infos;\n#endif\n#ifdef BUMP\nuniform sampler2D bump1Sampler;\nuniform sampler2D bump2Sampler;\nuniform sampler2D bump3Sampler;\n#endif\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#ifdef BUMP\n#extension GL_OES_standard_derivatives : enable\nmat3 cotangent_frame(vec3 normal,vec3 p,vec2 uv)\n{\nvec3 dp1\x3ddFdx(p);\nvec3 dp2\x3ddFdy(p);\nvec2 duv1\x3ddFdx(uv);\nvec2 duv2\x3ddFdy(uv);\nvec3 dp2perp\x3dcross(dp2,normal);\nvec3 dp1perp\x3dcross(normal,dp1);\nvec3 tangent\x3ddp2perp*duv1.x+dp1perp*duv2.x;\nvec3 binormal\x3ddp2perp*duv1.y+dp1perp*duv2.y;\nfloat invmax\x3dinversesqrt(max(dot(tangent,tangent),dot(binormal,binormal)));\nreturn mat3(tangent*invmax,binormal*invmax,normal);\n}\nvec3 perturbNormal(vec3 viewDir,vec3 mixColor)\n{\nvec3 bump1Color\x3dtexture2D(bump1Sampler,vTextureUV*diffuse1Infos).xyz;\nvec3 bump2Color\x3dtexture2D(bump2Sampler,vTextureUV*diffuse2Infos).xyz;\nvec3 bump3Color\x3dtexture2D(bump3Sampler,vTextureUV*diffuse3Infos).xyz;\nbump1Color.rgb*\x3dmixColor.r;\nbump2Color.rgb\x3dmix(bump1Color.rgb,bump2Color.rgb,mixColor.g);\nvec3 map\x3dmix(bump2Color.rgb,bump3Color.rgb,mixColor.b);\nmap\x3dmap*255./127.-128./127.;\nmat3 TBN\x3dcotangent_frame(vNormalW*vTextureInfos.y,-viewDir,vTextureUV);\nreturn normalize(TBN*map);\n}\n#endif\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nvec4 baseColor\x3dvec4(1.,1.,1.,1.);\nvec3 diffuseColor\x3dvDiffuseColor.rgb;\n#ifdef SPECULARTERM\nfloat glossiness\x3dvSpecularColor.a;\nvec3 specularColor\x3dvSpecularColor.rgb;\n#else\nfloat glossiness\x3d0.;\n#endif\nfloat alpha\x3dvDiffuseColor.a;\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\n#ifdef DIFFUSE\nbaseColor\x3dtexture2D(textureSampler,vTextureUV);\n#if defined(BUMP) \x26\x26 defined(DIFFUSE)\nnormalW\x3dperturbNormal(viewDirectionW,baseColor.rgb);\n#endif\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\nbaseColor.rgb*\x3dvTextureInfos.y;\nvec4 diffuse1Color\x3dtexture2D(diffuse1Sampler,vTextureUV*diffuse1Infos);\nvec4 diffuse2Color\x3dtexture2D(diffuse2Sampler,vTextureUV*diffuse2Infos);\nvec4 diffuse3Color\x3dtexture2D(diffuse3Sampler,vTextureUV*diffuse3Infos);\ndiffuse1Color.rgb*\x3dbaseColor.r;\ndiffuse2Color.rgb\x3dmix(diffuse1Color.rgb,diffuse2Color.rgb,baseColor.g);\nbaseColor.rgb\x3dmix(diffuse2Color.rgb,diffuse3Color.rgb,baseColor.b);\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\n#ifdef SPECULARTERM\nvec3 specularBase\x3dvec3(0.,0.,0.);\n#endif\n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular\x3dspecularBase*specularColor;\n#else\nvec3 finalSpecular\x3dvec3(0.0);\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor*baseColor.rgb,0.0,1.0);\nvec4 color\x3dvec4(finalDiffuse+finalSpecular,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}\n";
var terrainPixelShader={name:"terrainPixelShader",shader:"precision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#ifdef DIFFUSE\nvarying vec2 vTextureUV;\nuniform sampler2D textureSampler;\nuniform vec2 vTextureInfos;\nuniform sampler2D diffuse1Sampler;\nuniform sampler2D diffuse2Sampler;\nuniform sampler2D diffuse3Sampler;\nuniform vec2 diffuse1Infos;\nuniform vec2 diffuse2Infos;\nuniform vec2 diffuse3Infos;\n#endif\n#ifdef BUMP\nuniform sampler2D bump1Sampler;\nuniform sampler2D bump2Sampler;\nuniform sampler2D bump3Sampler;\n#endif\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#ifdef BUMP\n#extension GL_OES_standard_derivatives : enable\nmat3 cotangent_frame(vec3 normal,vec3 p,vec2 uv)\n{\nvec3 dp1\x3ddFdx(p);\nvec3 dp2\x3ddFdy(p);\nvec2 duv1\x3ddFdx(uv);\nvec2 duv2\x3ddFdy(uv);\nvec3 dp2perp\x3dcross(dp2,normal);\nvec3 dp1perp\x3dcross(normal,dp1);\nvec3 tangent\x3ddp2perp*duv1.x+dp1perp*duv2.x;\nvec3 binormal\x3ddp2perp*duv1.y+dp1perp*duv2.y;\nfloat invmax\x3dinversesqrt(max(dot(tangent,tangent),dot(binormal,binormal)));\nreturn mat3(tangent*invmax,binormal*invmax,normal);\n}\nvec3 perturbNormal(vec3 viewDir,vec3 mixColor)\n{\nvec3 bump1Color\x3dtexture2D(bump1Sampler,vTextureUV*diffuse1Infos).xyz;\nvec3 bump2Color\x3dtexture2D(bump2Sampler,vTextureUV*diffuse2Infos).xyz;\nvec3 bump3Color\x3dtexture2D(bump3Sampler,vTextureUV*diffuse3Infos).xyz;\nbump1Color.rgb*\x3dmixColor.r;\nbump2Color.rgb\x3dmix(bump1Color.rgb,bump2Color.rgb,mixColor.g);\nvec3 map\x3dmix(bump2Color.rgb,bump3Color.rgb,mixColor.b);\nmap\x3dmap*255./127.-128./127.;\nmat3 TBN\x3dcotangent_frame(vNormalW*vTextureInfos.y,-viewDir,vTextureUV);\nreturn normalize(TBN*map);\n}\n#endif\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nvec4 baseColor\x3dvec4(1.,1.,1.,1.);\nvec3 diffuseColor\x3dvDiffuseColor.rgb;\n#ifdef SPECULARTERM\nfloat glossiness\x3dvSpecularColor.a;\nvec3 specularColor\x3dvSpecularColor.rgb;\n#else\nfloat glossiness\x3d0.;\n#endif\nfloat alpha\x3dvDiffuseColor.a;\n#ifdef NORMAL\nvec3 normalW\x3dnormalize(vNormalW);\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\n#ifdef DIFFUSE\nbaseColor\x3dtexture2D(textureSampler,vTextureUV);\n#if defined(BUMP) \x26\x26 defined(DIFFUSE)\nnormalW\x3dperturbNormal(viewDirectionW,baseColor.rgb);\n#endif\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\nbaseColor.rgb*\x3dvTextureInfos.y;\nvec4 diffuse1Color\x3dtexture2D(diffuse1Sampler,vTextureUV*diffuse1Infos);\nvec4 diffuse2Color\x3dtexture2D(diffuse2Sampler,vTextureUV*diffuse2Infos);\nvec4 diffuse3Color\x3dtexture2D(diffuse3Sampler,vTextureUV*diffuse3Infos);\ndiffuse1Color.rgb*\x3dbaseColor.r;\ndiffuse2Color.rgb\x3dmix(diffuse1Color.rgb,diffuse2Color.rgb,baseColor.g);\nbaseColor.rgb\x3dmix(diffuse2Color.rgb,diffuse3Color.rgb,baseColor.b);\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\n#ifdef SPECULARTERM\nvec3 specularBase\x3dvec3(0.,0.,0.);\n#endif\n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular\x3dspecularBase*specularColor;\n#else\nvec3 finalSpecular\x3dvec3(0.0);\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor*baseColor.rgb,0.0,1.0);\nvec4 color\x3dvec4(finalDiffuse+finalSpecular,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}\n"}},
"../../../dev/materials/src/terrain/terrain.vertex.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{terrainVertexShader:()=>terrainVertexShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.terrainVertexShader="precision highp float;attribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;uniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vTextureUV;uniform mat4 textureMatrix;uniform vec2 vTextureInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);gl_Position\x3dviewProjection*worldPos;vPositionW\x3dvec3(worldPos);\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vTextureInfos.x\x3d\x3d0.)\n{vTextureUV\x3dvec2(textureMatrix*vec4(uv,1.0,0.0));}\nelse\n{vTextureUV\x3dvec2(textureMatrix*vec4(uv2,1.0,0.0));}\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n";
var terrainVertexShader={name:"terrainVertexShader",shader:"precision highp float;attribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;uniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vTextureUV;uniform mat4 textureMatrix;uniform vec2 vTextureInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);gl_Position\x3dviewProjection*worldPos;vPositionW\x3dvec3(worldPos);\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vTextureInfos.x\x3d\x3d0.)\n{vTextureUV\x3dvec2(textureMatrix*vec4(uv,1.0,0.0));}\nelse\n{vTextureUV\x3dvec2(textureMatrix*vec4(uv2,1.0,0.0));}\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n"}},
"../../../dev/materials/src/terrain/terrainMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{TerrainMaterial:()=>TerrainMaterial});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__);
__webpack_require__("../../../dev/materials/src/terrain/terrain.fragment.ts");__webpack_require__("../../../dev/materials/src/terrain/terrain.vertex.ts");var TerrainMaterialDefines=function(_super){function TerrainMaterialDefines(){var _this=_super.call(this)||this;_this.DIFFUSE=!1;_this.BUMP=!1;_this.CLIPPLANE=!1;_this.CLIPPLANE2=!1;_this.CLIPPLANE3=!1;_this.CLIPPLANE4=!1;_this.CLIPPLANE5=!1;_this.CLIPPLANE6=!1;_this.ALPHATEST=!1;_this.DEPTHPREPASS=!1;_this.POINTSIZE=!1;_this.FOG=!1;_this.SPECULARTERM=
!1;_this.NORMAL=!1;_this.UV1=!1;_this.UV2=!1;_this.VERTEXCOLOR=!1;_this.VERTEXALPHA=!1;_this.NUM_BONE_INFLUENCERS=0;_this.BonesPerMesh=0;_this.INSTANCES=!1;_this.INSTANCESCOLOR=!1;_this.IMAGEPROCESSINGPOSTPROCESS=!1;_this.SKIPFINALCOLORCLAMP=!1;_this.rebuild();return _this}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(TerrainMaterialDefines,_super);return TerrainMaterialDefines}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialDefines),TerrainMaterial=function(_super){function TerrainMaterial(name,
scene){name=_super.call(this,name,scene)||this;name.diffuseColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(1,1,1);name.specularColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(0,0,0);name.specularPower=64;name._disableLighting=!1;name._maxSimultaneousLights=4;return name}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(TerrainMaterial,_super);TerrainMaterial.prototype.needAlphaBlending=function(){return 1>this.alpha};TerrainMaterial.prototype.needAlphaTesting=
function(){return!1};TerrainMaterial.prototype.getAlphaTestTexture=function(){return null};TerrainMaterial.prototype.isReadyForSubMesh=function(mesh,subMesh,useInstances){if(this.isFrozen&&subMesh.effect&&subMesh.effect._wasPreviouslyReady&&subMesh.effect._wasPreviouslyUsingInstances===useInstances)return!0;subMesh.materialDefines||(subMesh.materialDefines=new TerrainMaterialDefines);var defines=subMesh.materialDefines,scene=this.getScene();if(this._isReadyForSubMesh(subMesh))return!0;var engine=
scene.getEngine();if(scene.texturesEnabled){if(!this.mixTexture||!this.mixTexture.isReady())return!1;defines._needUVs=!0;if(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled){if(!(this.diffuseTexture1&&this.diffuseTexture1.isReady()&&this.diffuseTexture2&&this.diffuseTexture2.isReady()&&this.diffuseTexture3&&this.diffuseTexture3.isReady()))return!1;defines.DIFFUSE=!0}if(this.bumpTexture1&&this.bumpTexture2&&this.bumpTexture3&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.BumpTextureEnabled){if(!this.bumpTexture1.isReady()||
!this.bumpTexture2.isReady()||!this.bumpTexture3.isReady())return!1;defines._needNormals=!0;defines.BUMP=!0}}babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForMisc(mesh,scene,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(mesh),defines);defines._needNormals=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForLights(scene,mesh,defines,!1,this._maxSimultaneousLights,this._disableLighting);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForFrameBoundValues(scene,
engine,this,defines,useInstances?!0:!1);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForAttributes(mesh,defines,!0,!0);if(defines.isDirty){defines.markAsProcessed();scene.resetCachedMaterial();var fallbacks=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.EffectFallbacks;defines.FOG&&fallbacks.addFallback(1,"FOG");babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.HandleFallbacksForShadows(defines,fallbacks,this.maxSimultaneousLights);
0<defines.NUM_BONE_INFLUENCERS&&fallbacks.addCPUSkinningFallback(0,mesh);defines.IMAGEPROCESSINGPOSTPROCESS=scene.imageProcessingConfiguration.applyByPostProcess;var attribs=[babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.PositionKind];defines.NORMAL&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.NormalKind);defines.UV1&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UVKind);defines.UV2&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UV2Kind);
defines.VERTEXCOLOR&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.ColorKind);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForBones(attribs,mesh,defines,fallbacks);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForInstances(attribs,defines);mesh=defines.toString();var uniforms="world view viewProjection vEyePosition vLightsType vDiffuseColor vSpecularColor vFogInfos vFogColor pointSize vTextureInfos mBones textureMatrix diffuse1Infos diffuse2Infos diffuse3Infos".split(" "),
samplers="textureSampler diffuse1Sampler diffuse2Sampler diffuse3Sampler bump1Sampler bump2Sampler bump3Sampler".split(" "),uniformBuffers=[];(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.addClipPlaneUniforms)(uniforms);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:uniforms,uniformBuffersNames:uniformBuffers,samplers,defines,maxSimultaneousLights:this.maxSimultaneousLights});subMesh.setEffect(scene.getEngine().createEffect("terrain",
{attributes:attribs,uniformsNames:uniforms,uniformBuffersNames:uniformBuffers,samplers,defines:mesh,fallbacks,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this.maxSimultaneousLights}},engine),defines,this._materialContext)}if(!subMesh.effect||!subMesh.effect.isReady())return!1;defines._renderId=scene.getRenderId();subMesh.effect._wasPreviouslyReady=!0;subMesh.effect._wasPreviouslyUsingInstances=!!useInstances;return!0};TerrainMaterial.prototype.bindForSubMesh=
function(world,mesh,subMesh){var scene=this.getScene(),defines=subMesh.materialDefines;defines&&(subMesh=subMesh.effect)&&(this._activeEffect=subMesh,this.bindOnlyWorldMatrix(world),this._activeEffect.setMatrix("viewProjection",scene.getTransformMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindBonesParameters(mesh,this._activeEffect),this._mustRebind(scene,subMesh)&&(this.mixTexture&&(this._activeEffect.setTexture("textureSampler",this._mixTexture),this._activeEffect.setFloat2("vTextureInfos",
this._mixTexture.coordinatesIndex,this._mixTexture.level),this._activeEffect.setMatrix("textureMatrix",this._mixTexture.getTextureMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled&&(this._diffuseTexture1&&(this._activeEffect.setTexture("diffuse1Sampler",this._diffuseTexture1),this._activeEffect.setFloat2("diffuse1Infos",this._diffuseTexture1.uScale,this._diffuseTexture1.vScale)),this._diffuseTexture2&&(this._activeEffect.setTexture("diffuse2Sampler",
this._diffuseTexture2),this._activeEffect.setFloat2("diffuse2Infos",this._diffuseTexture2.uScale,this._diffuseTexture2.vScale)),this._diffuseTexture3&&(this._activeEffect.setTexture("diffuse3Sampler",this._diffuseTexture3),this._activeEffect.setFloat2("diffuse3Infos",this._diffuseTexture3.uScale,this._diffuseTexture3.vScale))),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.BumpTextureEnabled&&scene.getEngine().getCaps().standardDerivatives&&(this._bumpTexture1&&this._activeEffect.setTexture("bump1Sampler",
this._bumpTexture1),this._bumpTexture2&&this._activeEffect.setTexture("bump2Sampler",this._bumpTexture2),this._bumpTexture3&&this._activeEffect.setTexture("bump3Sampler",this._bumpTexture3))),(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.bindClipPlane)(subMesh,this,scene),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),scene.bindEyePosition(subMesh)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*mesh.visibility),defines.SPECULARTERM&&
this._activeEffect.setColor4("vSpecularColor",this.specularColor,this.specularPower),scene.lightsEnabled&&!this.disableLighting&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindLights(scene,mesh,this._activeEffect,defines,this.maxSimultaneousLights),scene.fogEnabled&&mesh.applyFog&&scene.fogMode!==babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",scene.getViewMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindFogParameters(scene,
mesh,this._activeEffect),this._afterBind(mesh,this._activeEffect))};TerrainMaterial.prototype.getAnimatables=function(){var results=[];this.mixTexture&&this.mixTexture.animations&&0<this.mixTexture.animations.length&&results.push(this.mixTexture);return results};TerrainMaterial.prototype.getActiveTextures=function(){var activeTextures=_super.prototype.getActiveTextures.call(this);this._mixTexture&&activeTextures.push(this._mixTexture);this._diffuseTexture1&&activeTextures.push(this._diffuseTexture1);
this._diffuseTexture2&&activeTextures.push(this._diffuseTexture2);this._diffuseTexture3&&activeTextures.push(this._diffuseTexture3);this._bumpTexture1&&activeTextures.push(this._bumpTexture1);this._bumpTexture2&&activeTextures.push(this._bumpTexture2);this._bumpTexture3&&activeTextures.push(this._bumpTexture3);return activeTextures};TerrainMaterial.prototype.hasTexture=function(texture){return _super.prototype.hasTexture.call(this,texture)||this._mixTexture===texture||this._diffuseTexture1===texture||
this._diffuseTexture2===texture||this._diffuseTexture3===texture||this._bumpTexture1===texture||this._bumpTexture2===texture||this._bumpTexture3===texture?!0:!1};TerrainMaterial.prototype.dispose=function(forceDisposeEffect){this.mixTexture&&this.mixTexture.dispose();_super.prototype.dispose.call(this,forceDisposeEffect)};TerrainMaterial.prototype.clone=function(name){var _this=this;return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Clone(function(){return new TerrainMaterial(name,
_this.getScene())},this)};TerrainMaterial.prototype.serialize=function(){var serializationObject=_super.prototype.serialize.call(this);serializationObject.customType="BABYLON.TerrainMaterial";return serializationObject};TerrainMaterial.prototype.getClassName=function(){return"TerrainMaterial"};TerrainMaterial.Parse=function(source,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Parse(function(){return new TerrainMaterial(source.name,scene)},source,
scene,rootUrl)};(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("mixTexture")],TerrainMaterial.prototype,"_mixTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],TerrainMaterial.prototype,"mixTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture1")],
TerrainMaterial.prototype,"_diffuseTexture1",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],TerrainMaterial.prototype,"diffuseTexture1",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture2")],TerrainMaterial.prototype,"_diffuseTexture2",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],
TerrainMaterial.prototype,"diffuseTexture2",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexture3")],TerrainMaterial.prototype,"_diffuseTexture3",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],TerrainMaterial.prototype,"diffuseTexture3",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("bumpTexture1")],
TerrainMaterial.prototype,"_bumpTexture1",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],TerrainMaterial.prototype,"bumpTexture1",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("bumpTexture2")],TerrainMaterial.prototype,"_bumpTexture2",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],
TerrainMaterial.prototype,"bumpTexture2",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("bumpTexture3")],TerrainMaterial.prototype,"_bumpTexture3",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],TerrainMaterial.prototype,"bumpTexture3",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],
TerrainMaterial.prototype,"diffuseColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],TerrainMaterial.prototype,"specularColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],TerrainMaterial.prototype,"specularPower",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("disableLighting")],
TerrainMaterial.prototype,"_disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],TerrainMaterial.prototype,"disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("maxSimultaneousLights")],TerrainMaterial.prototype,"_maxSimultaneousLights",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],
TerrainMaterial.prototype,"maxSimultaneousLights",void 0);return TerrainMaterial}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.PushMaterial);(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.TerrainMaterial",TerrainMaterial)},"../../../dev/materials/src/triPlanar/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{TriPlanarMaterial:()=>_triPlanarMaterial__WEBPACK_IMPORTED_MODULE_0__.TriPlanarMaterial});
var _triPlanarMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../dev/materials/src/triPlanar/triPlanarMaterial.ts")},"../../../dev/materials/src/triPlanar/triPlanarMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{TriPlanarMaterial:()=>TriPlanarMaterial});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__=
__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__);__webpack_require__("../../../dev/materials/src/triPlanar/triplanar.fragment.ts");__webpack_require__("../../../dev/materials/src/triPlanar/triplanar.vertex.ts");var TriPlanarMaterialDefines=function(_super){function TriPlanarMaterialDefines(){var _this=_super.call(this)||this;_this.DIFFUSEX=!1;_this.DIFFUSEY=!1;_this.DIFFUSEZ=!1;_this.BUMPX=!1;_this.BUMPY=!1;_this.BUMPZ=
!1;_this.CLIPPLANE=!1;_this.CLIPPLANE2=!1;_this.CLIPPLANE3=!1;_this.CLIPPLANE4=!1;_this.CLIPPLANE5=!1;_this.CLIPPLANE6=!1;_this.ALPHATEST=!1;_this.DEPTHPREPASS=!1;_this.POINTSIZE=!1;_this.FOG=!1;_this.SPECULARTERM=!1;_this.NORMAL=!1;_this.VERTEXCOLOR=!1;_this.VERTEXALPHA=!1;_this.NUM_BONE_INFLUENCERS=0;_this.BonesPerMesh=0;_this.INSTANCES=!1;_this.INSTANCESCOLOR=!1;_this.IMAGEPROCESSINGPOSTPROCESS=!1;_this.SKIPFINALCOLORCLAMP=!1;_this.NONUNIFORMSCALING=!1;_this.rebuild();return _this}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(TriPlanarMaterialDefines,
_super);return TriPlanarMaterialDefines}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialDefines),TriPlanarMaterial=function(_super){function TriPlanarMaterial(name,scene){name=_super.call(this,name,scene)||this;name.tileSize=1;name.diffuseColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(1,1,1);name.specularColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(.2,.2,.2);name.specularPower=64;name._disableLighting=!1;name._maxSimultaneousLights=
4;return name}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(TriPlanarMaterial,_super);TriPlanarMaterial.prototype.needAlphaBlending=function(){return 1>this.alpha};TriPlanarMaterial.prototype.needAlphaTesting=function(){return!1};TriPlanarMaterial.prototype.getAlphaTestTexture=function(){return null};TriPlanarMaterial.prototype.isReadyForSubMesh=function(mesh,subMesh,useInstances){if(this.isFrozen&&subMesh.effect&&subMesh.effect._wasPreviouslyReady&&subMesh.effect._wasPreviouslyUsingInstances===
useInstances)return!0;subMesh.materialDefines||(subMesh.materialDefines=new TriPlanarMaterialDefines);var defines=subMesh.materialDefines,scene=this.getScene();if(this._isReadyForSubMesh(subMesh))return!0;var engine=scene.getEngine();if(defines._areTexturesDirty&&scene.texturesEnabled){if(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.DiffuseTextureEnabled)for(var textures=[this.diffuseTextureX,this.diffuseTextureY,this.diffuseTextureZ],textureDefines=["DIFFUSEX","DIFFUSEY",
"DIFFUSEZ"],i=0;i<textures.length;i++)if(textures[i])if(textures[i].isReady())defines[textureDefines[i]]=!0;else return!1;if(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.BumpTextureEnabled)for(textures=[this.normalTextureX,this.normalTextureY,this.normalTextureZ],textureDefines=["BUMPX","BUMPY","BUMPZ"],i=0;i<textures.length;i++)if(textures[i])if(textures[i].isReady())defines[textureDefines[i]]=!0;else return!1}babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForMisc(mesh,
scene,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(mesh),defines);defines._needNormals=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForLights(scene,mesh,defines,!1,this._maxSimultaneousLights,this._disableLighting);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForFrameBoundValues(scene,engine,this,defines,useInstances?!0:!1);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForAttributes(mesh,
defines,!0,!0);if(defines.isDirty){defines.markAsProcessed();scene.resetCachedMaterial();textures=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.EffectFallbacks;defines.FOG&&textures.addFallback(1,"FOG");babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.HandleFallbacksForShadows(defines,textures,this.maxSimultaneousLights);0<defines.NUM_BONE_INFLUENCERS&&textures.addCPUSkinningFallback(0,mesh);defines.IMAGEPROCESSINGPOSTPROCESS=scene.imageProcessingConfiguration.applyByPostProcess;
textureDefines=[babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.PositionKind];defines.NORMAL&&textureDefines.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.NormalKind);defines.VERTEXCOLOR&&textureDefines.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.ColorKind);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForBones(textureDefines,mesh,defines,textures);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForInstances(textureDefines,
defines);mesh=defines.toString();i="world view viewProjection vEyePosition vLightsType vDiffuseColor vSpecularColor vFogInfos vFogColor pointSize mBones tileSize".split(" ");var samplers="diffuseSamplerX diffuseSamplerY diffuseSamplerZ normalSamplerX normalSamplerY normalSamplerZ".split(" "),uniformBuffers=[];(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.addClipPlaneUniforms)(i);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:i,
uniformBuffersNames:uniformBuffers,samplers,defines,maxSimultaneousLights:this.maxSimultaneousLights});subMesh.setEffect(scene.getEngine().createEffect("triplanar",{attributes:textureDefines,uniformsNames:i,uniformBuffersNames:uniformBuffers,samplers,defines:mesh,fallbacks:textures,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this.maxSimultaneousLights}},engine),defines,this._materialContext)}if(!subMesh.effect||!subMesh.effect.isReady())return!1;defines._renderId=
scene.getRenderId();subMesh.effect._wasPreviouslyReady=!0;subMesh.effect._wasPreviouslyUsingInstances=!!useInstances;return!0};TriPlanarMaterial.prototype.bindForSubMesh=function(world,mesh,subMesh){var scene=this.getScene(),defines=subMesh.materialDefines;defines&&(subMesh=subMesh.effect)&&(this._activeEffect=subMesh,this.bindOnlyWorldMatrix(world),this._activeEffect.setMatrix("viewProjection",scene.getTransformMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindBonesParameters(mesh,
this._activeEffect),this._activeEffect.setFloat("tileSize",this.tileSize),scene.getCachedMaterial()!==this&&(this.diffuseTextureX&&this._activeEffect.setTexture("diffuseSamplerX",this.diffuseTextureX),this.diffuseTextureY&&this._activeEffect.setTexture("diffuseSamplerY",this.diffuseTextureY),this.diffuseTextureZ&&this._activeEffect.setTexture("diffuseSamplerZ",this.diffuseTextureZ),this.normalTextureX&&this._activeEffect.setTexture("normalSamplerX",this.normalTextureX),this.normalTextureY&&this._activeEffect.setTexture("normalSamplerY",
this.normalTextureY),this.normalTextureZ&&this._activeEffect.setTexture("normalSamplerZ",this.normalTextureZ),(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.bindClipPlane)(subMesh,this,scene),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),scene.bindEyePosition(subMesh)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*mesh.visibility),defines.SPECULARTERM&&this._activeEffect.setColor4("vSpecularColor",this.specularColor,this.specularPower),
scene.lightsEnabled&&!this.disableLighting&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindLights(scene,mesh,this._activeEffect,defines,this.maxSimultaneousLights),scene.fogEnabled&&mesh.applyFog&&scene.fogMode!==babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",scene.getViewMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindFogParameters(scene,mesh,this._activeEffect),this._afterBind(mesh,
this._activeEffect))};TriPlanarMaterial.prototype.getAnimatables=function(){var results=[];this.mixTexture&&this.mixTexture.animations&&0<this.mixTexture.animations.length&&results.push(this.mixTexture);return results};TriPlanarMaterial.prototype.getActiveTextures=function(){var activeTextures=_super.prototype.getActiveTextures.call(this);this._diffuseTextureX&&activeTextures.push(this._diffuseTextureX);this._diffuseTextureY&&activeTextures.push(this._diffuseTextureY);this._diffuseTextureZ&&activeTextures.push(this._diffuseTextureZ);
this._normalTextureX&&activeTextures.push(this._normalTextureX);this._normalTextureY&&activeTextures.push(this._normalTextureY);this._normalTextureZ&&activeTextures.push(this._normalTextureZ);return activeTextures};TriPlanarMaterial.prototype.hasTexture=function(texture){return _super.prototype.hasTexture.call(this,texture)||this._diffuseTextureX===texture||this._diffuseTextureY===texture||this._diffuseTextureZ===texture||this._normalTextureX===texture||this._normalTextureY===texture||this._normalTextureZ===
texture?!0:!1};TriPlanarMaterial.prototype.dispose=function(forceDisposeEffect){this.mixTexture&&this.mixTexture.dispose();_super.prototype.dispose.call(this,forceDisposeEffect)};TriPlanarMaterial.prototype.clone=function(name){var _this=this;return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Clone(function(){return new TriPlanarMaterial(name,_this.getScene())},this)};TriPlanarMaterial.prototype.serialize=function(){var serializationObject=_super.prototype.serialize.call(this);
serializationObject.customType="BABYLON.TriPlanarMaterial";return serializationObject};TriPlanarMaterial.prototype.getClassName=function(){return"TriPlanarMaterial"};TriPlanarMaterial.Parse=function(source,scene,rootUrl){return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Parse(function(){return new TriPlanarMaterial(source.name,scene)},source,scene,rootUrl)};(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)()],
TriPlanarMaterial.prototype,"mixTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTextureX")],TriPlanarMaterial.prototype,"_diffuseTextureX",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],TriPlanarMaterial.prototype,"diffuseTextureX",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTexturY")],
TriPlanarMaterial.prototype,"_diffuseTextureY",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],TriPlanarMaterial.prototype,"diffuseTextureY",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("diffuseTextureZ")],TriPlanarMaterial.prototype,"_diffuseTextureZ",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],
TriPlanarMaterial.prototype,"diffuseTextureZ",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("normalTextureX")],TriPlanarMaterial.prototype,"_normalTextureX",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],TriPlanarMaterial.prototype,"normalTextureX",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("normalTextureY")],
TriPlanarMaterial.prototype,"_normalTextureY",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],TriPlanarMaterial.prototype,"normalTextureY",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("normalTextureZ")],TriPlanarMaterial.prototype,"_normalTextureZ",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],
TriPlanarMaterial.prototype,"normalTextureZ",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],TriPlanarMaterial.prototype,"tileSize",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],TriPlanarMaterial.prototype,"diffuseColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],
TriPlanarMaterial.prototype,"specularColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],TriPlanarMaterial.prototype,"specularPower",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("disableLighting")],TriPlanarMaterial.prototype,"_disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],
TriPlanarMaterial.prototype,"disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("maxSimultaneousLights")],TriPlanarMaterial.prototype,"_maxSimultaneousLights",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],TriPlanarMaterial.prototype,"maxSimultaneousLights",void 0);return TriPlanarMaterial}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.PushMaterial);
(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.TriPlanarMaterial",TriPlanarMaterial)},"../../../dev/materials/src/triPlanar/triplanar.fragment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{triplanarPixelShader:()=>triplanarPixelShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);
__unused_webpack_module.ShaderStore.ShadersStore.triplanarPixelShader="precision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\nvarying vec3 vPositionW;\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#ifdef DIFFUSEX\nvarying vec2 vTextureUVX;\nuniform sampler2D diffuseSamplerX;\n#ifdef BUMPX\nuniform sampler2D normalSamplerX;\n#endif\n#endif\n#ifdef DIFFUSEY\nvarying vec2 vTextureUVY;\nuniform sampler2D diffuseSamplerY;\n#ifdef BUMPY\nuniform sampler2D normalSamplerY;\n#endif\n#endif\n#ifdef DIFFUSEZ\nvarying vec2 vTextureUVZ;\nuniform sampler2D diffuseSamplerZ;\n#ifdef BUMPZ\nuniform sampler2D normalSamplerZ;\n#endif\n#endif\n#ifdef NORMAL\nvarying mat3 tangentSpace;\n#endif\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nvec4 baseColor\x3dvec4(0.,0.,0.,1.);\nvec3 diffuseColor\x3dvDiffuseColor.rgb;\nfloat alpha\x3dvDiffuseColor.a;\n#ifdef NORMAL\nvec3 normalW\x3dtangentSpace[2];\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\nvec4 baseNormal\x3dvec4(0.0,0.0,0.0,1.0);\nnormalW*\x3dnormalW;\n#ifdef DIFFUSEX\nbaseColor+\x3dtexture2D(diffuseSamplerX,vTextureUVX)*normalW.x;\n#ifdef BUMPX\nbaseNormal+\x3dtexture2D(normalSamplerX,vTextureUVX)*normalW.x;\n#endif\n#endif\n#ifdef DIFFUSEY\nbaseColor+\x3dtexture2D(diffuseSamplerY,vTextureUVY)*normalW.y;\n#ifdef BUMPY\nbaseNormal+\x3dtexture2D(normalSamplerY,vTextureUVY)*normalW.y;\n#endif\n#endif\n#ifdef DIFFUSEZ\nbaseColor+\x3dtexture2D(diffuseSamplerZ,vTextureUVZ)*normalW.z;\n#ifdef BUMPZ\nbaseNormal+\x3dtexture2D(normalSamplerZ,vTextureUVZ)*normalW.z;\n#endif\n#endif\n#ifdef NORMAL\nnormalW\x3dnormalize((2.0*baseNormal.xyz-1.0)*tangentSpace);\n#endif\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\n#ifdef SPECULARTERM\nfloat glossiness\x3dvSpecularColor.a;\nvec3 specularBase\x3dvec3(0.,0.,0.);\nvec3 specularColor\x3dvSpecularColor.rgb;\n#else\nfloat glossiness\x3d0.;\n#endif\n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular\x3dspecularBase*specularColor;\n#else\nvec3 finalSpecular\x3dvec3(0.0);\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\nvec4 color\x3dvec4(finalDiffuse+finalSpecular,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}\n";
var triplanarPixelShader={name:"triplanarPixelShader",shader:"precision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\nvarying vec3 vPositionW;\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#ifdef DIFFUSEX\nvarying vec2 vTextureUVX;\nuniform sampler2D diffuseSamplerX;\n#ifdef BUMPX\nuniform sampler2D normalSamplerX;\n#endif\n#endif\n#ifdef DIFFUSEY\nvarying vec2 vTextureUVY;\nuniform sampler2D diffuseSamplerY;\n#ifdef BUMPY\nuniform sampler2D normalSamplerY;\n#endif\n#endif\n#ifdef DIFFUSEZ\nvarying vec2 vTextureUVZ;\nuniform sampler2D diffuseSamplerZ;\n#ifdef BUMPZ\nuniform sampler2D normalSamplerZ;\n#endif\n#endif\n#ifdef NORMAL\nvarying mat3 tangentSpace;\n#endif\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nvec4 baseColor\x3dvec4(0.,0.,0.,1.);\nvec3 diffuseColor\x3dvDiffuseColor.rgb;\nfloat alpha\x3dvDiffuseColor.a;\n#ifdef NORMAL\nvec3 normalW\x3dtangentSpace[2];\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\n#endif\nvec4 baseNormal\x3dvec4(0.0,0.0,0.0,1.0);\nnormalW*\x3dnormalW;\n#ifdef DIFFUSEX\nbaseColor+\x3dtexture2D(diffuseSamplerX,vTextureUVX)*normalW.x;\n#ifdef BUMPX\nbaseNormal+\x3dtexture2D(normalSamplerX,vTextureUVX)*normalW.x;\n#endif\n#endif\n#ifdef DIFFUSEY\nbaseColor+\x3dtexture2D(diffuseSamplerY,vTextureUVY)*normalW.y;\n#ifdef BUMPY\nbaseNormal+\x3dtexture2D(normalSamplerY,vTextureUVY)*normalW.y;\n#endif\n#endif\n#ifdef DIFFUSEZ\nbaseColor+\x3dtexture2D(diffuseSamplerZ,vTextureUVZ)*normalW.z;\n#ifdef BUMPZ\nbaseNormal+\x3dtexture2D(normalSamplerZ,vTextureUVZ)*normalW.z;\n#endif\n#endif\n#ifdef NORMAL\nnormalW\x3dnormalize((2.0*baseNormal.xyz-1.0)*tangentSpace);\n#endif\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\n#include\x3cdepthPrePass\x3e\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\n#ifdef SPECULARTERM\nfloat glossiness\x3dvSpecularColor.a;\nvec3 specularBase\x3dvec3(0.,0.,0.);\nvec3 specularColor\x3dvSpecularColor.rgb;\n#else\nfloat glossiness\x3d0.;\n#endif\n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular\x3dspecularBase*specularColor;\n#else\nvec3 finalSpecular\x3dvec3(0.0);\n#endif\nvec3 finalDiffuse\x3dclamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\nvec4 color\x3dvec4(finalDiffuse+finalSpecular,alpha);\n#include\x3cfogFragment\x3e\ngl_FragColor\x3dcolor;\n#include\x3cimageProcessingCompatibility\x3e\n#define CUSTOM_FRAGMENT_MAIN_END\n}\n"}},
"../../../dev/materials/src/triPlanar/triplanar.vertex.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{triplanarVertexShader:()=>triplanarVertexShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.triplanarVertexShader="precision highp float;\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSEX\nvarying vec2 vTextureUVX;\n#endif\n#ifdef DIFFUSEY\nvarying vec2 vTextureUVY;\n#endif\n#ifdef DIFFUSEZ\nvarying vec2 vTextureUVZ;\n#endif\nuniform float tileSize;\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying mat3 tangentSpace;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void)\n{\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\ngl_Position\x3dviewProjection*worldPos;\nvPositionW\x3dvec3(worldPos);\n#ifdef DIFFUSEX\nvTextureUVX\x3dworldPos.zy/tileSize;\n#endif\n#ifdef DIFFUSEY\nvTextureUVY\x3dworldPos.xz/tileSize;\n#endif\n#ifdef DIFFUSEZ\nvTextureUVZ\x3dworldPos.xy/tileSize;\n#endif\n#ifdef NORMAL\nvec3 xtan\x3dvec3(0,0,1);\nvec3 xbin\x3dvec3(0,1,0);\nvec3 ytan\x3dvec3(1,0,0);\nvec3 ybin\x3dvec3(0,0,1);\nvec3 ztan\x3dvec3(1,0,0);\nvec3 zbin\x3dvec3(0,1,0);\nvec3 normalizedNormal\x3dnormalize(normal);\nnormalizedNormal*\x3dnormalizedNormal;\nvec3 worldBinormal\x3dnormalize(xbin*normalizedNormal.x+ybin*normalizedNormal.y+zbin*normalizedNormal.z);\nvec3 worldTangent\x3dnormalize(xtan*normalizedNormal.x+ytan*normalizedNormal.y+ztan*normalizedNormal.z);\nmat3 normalWorld\x3dmat3(world);\n#ifdef NONUNIFORMSCALING\nnormalWorld\x3dtransposeMat3(inverseMat3(normalWorld));\n#endif\nworldTangent\x3dnormalize((normalWorld*worldTangent).xyz);\nworldBinormal\x3dnormalize((normalWorld*worldBinormal).xyz);\nvec3 worldNormal\x3dnormalize((normalWorld*normalize(normal)).xyz);\ntangentSpace[0]\x3dworldTangent;\ntangentSpace[1]\x3dworldBinormal;\ntangentSpace[2]\x3dworldNormal;\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n";
var triplanarVertexShader={name:"triplanarVertexShader",shader:"precision highp float;\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSEX\nvarying vec2 vTextureUVX;\n#endif\n#ifdef DIFFUSEY\nvarying vec2 vTextureUVY;\n#endif\n#ifdef DIFFUSEZ\nvarying vec2 vTextureUVZ;\n#endif\nuniform float tileSize;\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying mat3 tangentSpace;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void)\n{\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\ngl_Position\x3dviewProjection*worldPos;\nvPositionW\x3dvec3(worldPos);\n#ifdef DIFFUSEX\nvTextureUVX\x3dworldPos.zy/tileSize;\n#endif\n#ifdef DIFFUSEY\nvTextureUVY\x3dworldPos.xz/tileSize;\n#endif\n#ifdef DIFFUSEZ\nvTextureUVZ\x3dworldPos.xy/tileSize;\n#endif\n#ifdef NORMAL\nvec3 xtan\x3dvec3(0,0,1);\nvec3 xbin\x3dvec3(0,1,0);\nvec3 ytan\x3dvec3(1,0,0);\nvec3 ybin\x3dvec3(0,0,1);\nvec3 ztan\x3dvec3(1,0,0);\nvec3 zbin\x3dvec3(0,1,0);\nvec3 normalizedNormal\x3dnormalize(normal);\nnormalizedNormal*\x3dnormalizedNormal;\nvec3 worldBinormal\x3dnormalize(xbin*normalizedNormal.x+ybin*normalizedNormal.y+zbin*normalizedNormal.z);\nvec3 worldTangent\x3dnormalize(xtan*normalizedNormal.x+ytan*normalizedNormal.y+ztan*normalizedNormal.z);\nmat3 normalWorld\x3dmat3(world);\n#ifdef NONUNIFORMSCALING\nnormalWorld\x3dtransposeMat3(inverseMat3(normalWorld));\n#endif\nworldTangent\x3dnormalize((normalWorld*worldTangent).xyz);\nworldBinormal\x3dnormalize((normalWorld*worldBinormal).xyz);\nvec3 worldNormal\x3dnormalize((normalWorld*normalize(normal)).xyz);\ntangentSpace[0]\x3dworldTangent;\ntangentSpace[1]\x3dworldBinormal;\ntangentSpace[2]\x3dworldNormal;\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\n#define CUSTOM_VERTEX_MAIN_END\n}\n"}},
"../../../dev/materials/src/water/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{WaterMaterial:()=>_waterMaterial__WEBPACK_IMPORTED_MODULE_0__.WaterMaterial});var _waterMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../dev/materials/src/water/waterMaterial.ts")},"../../../dev/materials/src/water/water.fragment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>
{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{waterPixelShader:()=>waterPixelShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.waterPixelShader="#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\nprecision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3cimageProcessingDeclaration\x3e\n#include\x3cimageProcessingFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#ifdef BUMP\nvarying vec2 vNormalUV;\n#ifdef BUMPSUPERIMPOSE\nvarying vec2 vNormalUV2;\n#endif\nuniform sampler2D normalSampler;\nuniform vec2 vNormalInfos;\n#endif\nuniform sampler2D refractionSampler;\nuniform sampler2D reflectionSampler;\nconst float LOG2\x3d1.442695;\nuniform vec3 cameraPosition;\nuniform vec4 waterColor;\nuniform float colorBlendFactor;\nuniform vec4 waterColor2;\nuniform float colorBlendFactor2;\nuniform float bumpHeight;\nuniform float time;\nvarying vec3 vRefractionMapTexCoord;\nvarying vec3 vReflectionMapTexCoord;\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3clogDepthDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nvec4 baseColor\x3dvec4(1.,1.,1.,1.);\nvec3 diffuseColor\x3dvDiffuseColor.rgb;\nfloat alpha\x3dvDiffuseColor.a;\n#ifdef BUMP\n#ifdef BUMPSUPERIMPOSE\nbaseColor\x3d0.6*texture2D(normalSampler,vNormalUV)+0.4*texture2D(normalSampler,vec2(vNormalUV2.x,vNormalUV2.y));\n#else\nbaseColor\x3dtexture2D(normalSampler,vNormalUV);\n#endif\nvec3 bumpColor\x3dbaseColor.rgb;\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\nbaseColor.rgb*\x3dvNormalInfos.y;\n#else\nvec3 bumpColor\x3dvec3(1.0);\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\n#ifdef NORMAL\nvec2 perturbation\x3dbumpHeight*(baseColor.rg-0.5);\n#ifdef BUMPAFFECTSREFLECTION\nvec3 normalW\x3dnormalize(vNormalW+vec3(perturbation.x*8.0,0.0,perturbation.y*8.0));\nif (normalW.y\x3c0.0) {\nnormalW.y\x3d-normalW.y;\n}\n#else\nvec3 normalW\x3dnormalize(vNormalW);\n#endif\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\nvec2 perturbation\x3dbumpHeight*(vec2(1.0,1.0)-0.5);\n#endif\n#ifdef FRESNELSEPARATE\n#ifdef REFLECTION\nvec2 projectedRefractionTexCoords\x3dclamp(vRefractionMapTexCoord.xy/vRefractionMapTexCoord.z+perturbation*0.5,0.0,1.0);\nvec4 refractiveColor\x3dtexture2D(refractionSampler,projectedRefractionTexCoords);\n#ifdef IS_REFRACTION_LINEAR\nrefractiveColor.rgb\x3dtoGammaSpace(refractiveColor.rgb);\n#endif\nvec2 projectedReflectionTexCoords\x3dclamp(vec2(\nvReflectionMapTexCoord.x/vReflectionMapTexCoord.z+perturbation.x*0.3,\nvReflectionMapTexCoord.y/vReflectionMapTexCoord.z+perturbation.y\n),0.0,1.0);\nvec4 reflectiveColor\x3dtexture2D(reflectionSampler,projectedReflectionTexCoords);\n#ifdef IS_REFLECTION_LINEAR\nreflectiveColor.rgb\x3dtoGammaSpace(reflectiveColor.rgb);\n#endif\nvec3 upVector\x3dvec3(0.0,1.0,0.0);\nfloat fresnelTerm\x3dclamp(abs(pow(dot(viewDirectionW,upVector),3.0)),0.05,0.65);\nfloat IfresnelTerm\x3d1.0-fresnelTerm;\nrefractiveColor\x3dcolorBlendFactor*waterColor+(1.0-colorBlendFactor)*refractiveColor;\nreflectiveColor\x3dIfresnelTerm*colorBlendFactor2*waterColor+(1.0-colorBlendFactor2*IfresnelTerm)*reflectiveColor;\nvec4 combinedColor\x3drefractiveColor*fresnelTerm+reflectiveColor*IfresnelTerm;\nbaseColor\x3dcombinedColor;\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\n#ifdef SPECULARTERM\nfloat glossiness\x3dvSpecularColor.a;\nvec3 specularBase\x3dvec3(0.,0.,0.);\nvec3 specularColor\x3dvSpecularColor.rgb;\n#else\nfloat glossiness\x3d0.;\n#endif\n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\nvec3 finalDiffuse\x3dclamp(baseColor.rgb,0.0,1.0);\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular\x3dspecularBase*specularColor;\n#else\nvec3 finalSpecular\x3dvec3(0.0);\n#endif\n#else \n#ifdef REFLECTION\nvec2 projectedRefractionTexCoords\x3dclamp(vRefractionMapTexCoord.xy/vRefractionMapTexCoord.z+perturbation,0.0,1.0);\nvec4 refractiveColor\x3dtexture2D(refractionSampler,projectedRefractionTexCoords);\n#ifdef IS_REFRACTION_LINEAR\nrefractiveColor.rgb\x3dtoGammaSpace(refractiveColor.rgb);\n#endif\nvec2 projectedReflectionTexCoords\x3dclamp(vReflectionMapTexCoord.xy/vReflectionMapTexCoord.z+perturbation,0.0,1.0);\nvec4 reflectiveColor\x3dtexture2D(reflectionSampler,projectedReflectionTexCoords);\n#ifdef IS_REFLECTION_LINEAR\nreflectiveColor.rgb\x3dtoGammaSpace(reflectiveColor.rgb);\n#endif\nvec3 upVector\x3dvec3(0.0,1.0,0.0);\nfloat fresnelTerm\x3dmax(dot(viewDirectionW,upVector),0.0);\nvec4 combinedColor\x3drefractiveColor*fresnelTerm+reflectiveColor*(1.0-fresnelTerm);\nbaseColor\x3dcolorBlendFactor*waterColor+(1.0-colorBlendFactor)*combinedColor;\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\n#ifdef SPECULARTERM\nfloat glossiness\x3dvSpecularColor.a;\nvec3 specularBase\x3dvec3(0.,0.,0.);\nvec3 specularColor\x3dvSpecularColor.rgb;\n#else\nfloat glossiness\x3d0.;\n#endif\n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\nvec3 finalDiffuse\x3dclamp(baseColor.rgb,0.0,1.0);\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular\x3dspecularBase*specularColor;\n#else\nvec3 finalSpecular\x3dvec3(0.0);\n#endif\n#endif\nvec4 color\x3dvec4(finalDiffuse+finalSpecular,alpha);\n#include\x3clogDepthFragment\x3e\n#include\x3cfogFragment\x3e\n#ifdef IMAGEPROCESSINGPOSTPROCESS\ncolor.rgb\x3dtoLinearSpace(color.rgb);\n#elif defined(IMAGEPROCESSING)\ncolor.rgb\x3dtoLinearSpace(color.rgb);\ncolor\x3dapplyImageProcessing(color);\n#endif\ngl_FragColor\x3dcolor;\n#define CUSTOM_FRAGMENT_MAIN_END\n}\n";
var waterPixelShader={name:"waterPixelShader",shader:"#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\nprecision highp float;\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3chelperFunctions\x3e\n#include\x3cimageProcessingDeclaration\x3e\n#include\x3cimageProcessingFunctions\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#include\x3clightsFragmentFunctions\x3e\n#include\x3cshadowsFragmentFunctions\x3e\n#ifdef BUMP\nvarying vec2 vNormalUV;\n#ifdef BUMPSUPERIMPOSE\nvarying vec2 vNormalUV2;\n#endif\nuniform sampler2D normalSampler;\nuniform vec2 vNormalInfos;\n#endif\nuniform sampler2D refractionSampler;\nuniform sampler2D reflectionSampler;\nconst float LOG2\x3d1.442695;\nuniform vec3 cameraPosition;\nuniform vec4 waterColor;\nuniform float colorBlendFactor;\nuniform vec4 waterColor2;\nuniform float colorBlendFactor2;\nuniform float bumpHeight;\nuniform float time;\nvarying vec3 vRefractionMapTexCoord;\nvarying vec3 vReflectionMapTexCoord;\n#include\x3cclipPlaneFragmentDeclaration\x3e\n#include\x3clogDepthDeclaration\x3e\n#include\x3cfogFragmentDeclaration\x3e\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include\x3cclipPlaneFragment\x3e\nvec3 viewDirectionW\x3dnormalize(vEyePosition.xyz-vPositionW);\nvec4 baseColor\x3dvec4(1.,1.,1.,1.);\nvec3 diffuseColor\x3dvDiffuseColor.rgb;\nfloat alpha\x3dvDiffuseColor.a;\n#ifdef BUMP\n#ifdef BUMPSUPERIMPOSE\nbaseColor\x3d0.6*texture2D(normalSampler,vNormalUV)+0.4*texture2D(normalSampler,vec2(vNormalUV2.x,vNormalUV2.y));\n#else\nbaseColor\x3dtexture2D(normalSampler,vNormalUV);\n#endif\nvec3 bumpColor\x3dbaseColor.rgb;\n#ifdef ALPHATEST\nif (baseColor.a\x3c0.4)\ndiscard;\n#endif\nbaseColor.rgb*\x3dvNormalInfos.y;\n#else\nvec3 bumpColor\x3dvec3(1.0);\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nbaseColor.rgb*\x3dvColor.rgb;\n#endif\n#ifdef NORMAL\nvec2 perturbation\x3dbumpHeight*(baseColor.rg-0.5);\n#ifdef BUMPAFFECTSREFLECTION\nvec3 normalW\x3dnormalize(vNormalW+vec3(perturbation.x*8.0,0.0,perturbation.y*8.0));\nif (normalW.y\x3c0.0) {\nnormalW.y\x3d-normalW.y;\n}\n#else\nvec3 normalW\x3dnormalize(vNormalW);\n#endif\n#else\nvec3 normalW\x3dvec3(1.0,1.0,1.0);\nvec2 perturbation\x3dbumpHeight*(vec2(1.0,1.0)-0.5);\n#endif\n#ifdef FRESNELSEPARATE\n#ifdef REFLECTION\nvec2 projectedRefractionTexCoords\x3dclamp(vRefractionMapTexCoord.xy/vRefractionMapTexCoord.z+perturbation*0.5,0.0,1.0);\nvec4 refractiveColor\x3dtexture2D(refractionSampler,projectedRefractionTexCoords);\n#ifdef IS_REFRACTION_LINEAR\nrefractiveColor.rgb\x3dtoGammaSpace(refractiveColor.rgb);\n#endif\nvec2 projectedReflectionTexCoords\x3dclamp(vec2(\nvReflectionMapTexCoord.x/vReflectionMapTexCoord.z+perturbation.x*0.3,\nvReflectionMapTexCoord.y/vReflectionMapTexCoord.z+perturbation.y\n),0.0,1.0);\nvec4 reflectiveColor\x3dtexture2D(reflectionSampler,projectedReflectionTexCoords);\n#ifdef IS_REFLECTION_LINEAR\nreflectiveColor.rgb\x3dtoGammaSpace(reflectiveColor.rgb);\n#endif\nvec3 upVector\x3dvec3(0.0,1.0,0.0);\nfloat fresnelTerm\x3dclamp(abs(pow(dot(viewDirectionW,upVector),3.0)),0.05,0.65);\nfloat IfresnelTerm\x3d1.0-fresnelTerm;\nrefractiveColor\x3dcolorBlendFactor*waterColor+(1.0-colorBlendFactor)*refractiveColor;\nreflectiveColor\x3dIfresnelTerm*colorBlendFactor2*waterColor+(1.0-colorBlendFactor2*IfresnelTerm)*reflectiveColor;\nvec4 combinedColor\x3drefractiveColor*fresnelTerm+reflectiveColor*IfresnelTerm;\nbaseColor\x3dcombinedColor;\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\n#ifdef SPECULARTERM\nfloat glossiness\x3dvSpecularColor.a;\nvec3 specularBase\x3dvec3(0.,0.,0.);\nvec3 specularColor\x3dvSpecularColor.rgb;\n#else\nfloat glossiness\x3d0.;\n#endif\n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\nvec3 finalDiffuse\x3dclamp(baseColor.rgb,0.0,1.0);\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular\x3dspecularBase*specularColor;\n#else\nvec3 finalSpecular\x3dvec3(0.0);\n#endif\n#else \n#ifdef REFLECTION\nvec2 projectedRefractionTexCoords\x3dclamp(vRefractionMapTexCoord.xy/vRefractionMapTexCoord.z+perturbation,0.0,1.0);\nvec4 refractiveColor\x3dtexture2D(refractionSampler,projectedRefractionTexCoords);\n#ifdef IS_REFRACTION_LINEAR\nrefractiveColor.rgb\x3dtoGammaSpace(refractiveColor.rgb);\n#endif\nvec2 projectedReflectionTexCoords\x3dclamp(vReflectionMapTexCoord.xy/vReflectionMapTexCoord.z+perturbation,0.0,1.0);\nvec4 reflectiveColor\x3dtexture2D(reflectionSampler,projectedReflectionTexCoords);\n#ifdef IS_REFLECTION_LINEAR\nreflectiveColor.rgb\x3dtoGammaSpace(reflectiveColor.rgb);\n#endif\nvec3 upVector\x3dvec3(0.0,1.0,0.0);\nfloat fresnelTerm\x3dmax(dot(viewDirectionW,upVector),0.0);\nvec4 combinedColor\x3drefractiveColor*fresnelTerm+reflectiveColor*(1.0-fresnelTerm);\nbaseColor\x3dcolorBlendFactor*waterColor+(1.0-colorBlendFactor)*combinedColor;\n#endif\nvec3 diffuseBase\x3dvec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow\x3d1.;\n#ifdef SPECULARTERM\nfloat glossiness\x3dvSpecularColor.a;\nvec3 specularBase\x3dvec3(0.,0.,0.);\nvec3 specularColor\x3dvSpecularColor.rgb;\n#else\nfloat glossiness\x3d0.;\n#endif\n#include\x3clightFragment\x3e[0..maxSimultaneousLights]\nvec3 finalDiffuse\x3dclamp(baseColor.rgb,0.0,1.0);\n#if defined(VERTEXALPHA) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nalpha*\x3dvColor.a;\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular\x3dspecularBase*specularColor;\n#else\nvec3 finalSpecular\x3dvec3(0.0);\n#endif\n#endif\nvec4 color\x3dvec4(finalDiffuse+finalSpecular,alpha);\n#include\x3clogDepthFragment\x3e\n#include\x3cfogFragment\x3e\n#ifdef IMAGEPROCESSINGPOSTPROCESS\ncolor.rgb\x3dtoLinearSpace(color.rgb);\n#elif defined(IMAGEPROCESSING)\ncolor.rgb\x3dtoLinearSpace(color.rgb);\ncolor\x3dapplyImageProcessing(color);\n#endif\ngl_FragColor\x3dcolor;\n#define CUSTOM_FRAGMENT_MAIN_END\n}\n"}},
"../../../dev/materials/src/water/water.vertex.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{waterVertexShader:()=>waterVertexShader});__unused_webpack_module=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(__unused_webpack_module);__unused_webpack_module.ShaderStore.ShadersStore.waterVertexShader="precision highp float;\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef BUMP\nvarying vec2 vNormalUV;\n#ifdef BUMPSUPERIMPOSE\nvarying vec2 vNormalUV2;\n#endif\nuniform mat4 normalMatrix;\nuniform vec2 vNormalInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#include\x3clogDepthDeclaration\x3e\nuniform mat4 reflectionViewProjection;\nuniform vec2 windDirection;\nuniform float waveLength;\nuniform float time;\nuniform float windForce;\nuniform float waveHeight;\nuniform float waveSpeed;\nuniform float waveCount;\nvarying vec3 vRefractionMapTexCoord;\nvarying vec3 vReflectionMapTexCoord;\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\nvPositionW\x3dvec3(worldPos);\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef BUMP\nif (vNormalInfos.x\x3d\x3d0.)\n{\nvNormalUV\x3dvec2(normalMatrix*vec4((uv*1.0)/waveLength+time*windForce*windDirection,1.0,0.0));\n#ifdef BUMPSUPERIMPOSE\nvNormalUV2\x3dvec2(normalMatrix*vec4((uv*0.721)/waveLength+time*1.2*windForce*windDirection,1.0,0.0));\n#endif\n}\nelse\n{\nvNormalUV\x3dvec2(normalMatrix*vec4((uv2*1.0)/waveLength+time*windForce*windDirection ,1.0,0.0));\n#ifdef BUMPSUPERIMPOSE\nvNormalUV2\x3dvec2(normalMatrix*vec4((uv2*0.721)/waveLength+time*1.2*windForce*windDirection ,1.0,0.0));\n#endif\n}\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\nfloat finalWaveCount\x3d1.0/(waveCount*0.5);\n#ifdef USE_WORLD_COORDINATES\nvec3 p\x3dworldPos.xyz;\n#else\nvec3 p\x3dposition;\n#endif\nfloat newY\x3d(sin(((p.x/finalWaveCount)+time*waveSpeed))*waveHeight*windDirection.x*5.0)\n+ (cos(((p.z/finalWaveCount)+ time*waveSpeed))*waveHeight*windDirection.y*5.0);\np.y+\x3dabs(newY);\n#ifdef USE_WORLD_COORDINATES\ngl_Position\x3dviewProjection*vec4(p,1.0);\n#else\ngl_Position\x3dviewProjection*finalWorld*vec4(p,1.0);\n#endif\n#ifdef REFLECTION\nvRefractionMapTexCoord.x\x3d0.5*(gl_Position.w+gl_Position.x);\nvRefractionMapTexCoord.y\x3d0.5*(gl_Position.w+gl_Position.y);\nvRefractionMapTexCoord.z\x3dgl_Position.w;\nworldPos\x3dreflectionViewProjection*finalWorld*vec4(position,1.0);\nvReflectionMapTexCoord.x\x3d0.5*(worldPos.w+worldPos.x);\nvReflectionMapTexCoord.y\x3d0.5*(worldPos.w+worldPos.y);\nvReflectionMapTexCoord.z\x3dworldPos.w;\n#endif\n#include\x3clogDepthVertex\x3e\n#define CUSTOM_VERTEX_MAIN_END\n}\n";
var waterVertexShader={name:"waterVertexShader",shader:"precision highp float;\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include\x3cbonesDeclaration\x3e\n#include\x3cbakedVertexAnimationDeclaration\x3e\n#include\x3cinstancesDeclaration\x3e\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef BUMP\nvarying vec2 vNormalUV;\n#ifdef BUMPSUPERIMPOSE\nvarying vec2 vNormalUV2;\n#endif\nuniform mat4 normalMatrix;\nuniform vec2 vNormalInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#if defined(VERTEXCOLOR) || defined(INSTANCESCOLOR) \x26\x26 defined(INSTANCES)\nvarying vec4 vColor;\n#endif\n#include\x3cclipPlaneVertexDeclaration\x3e\n#include\x3cfogVertexDeclaration\x3e\n#include\x3c__decl__lightFragment\x3e[0..maxSimultaneousLights]\n#include\x3clogDepthDeclaration\x3e\nuniform mat4 reflectionViewProjection;\nuniform vec2 windDirection;\nuniform float waveLength;\nuniform float time;\nuniform float windForce;\nuniform float waveHeight;\nuniform float waveSpeed;\nuniform float waveCount;\nvarying vec3 vRefractionMapTexCoord;\nvarying vec3 vReflectionMapTexCoord;\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\n#include\x3cinstancesVertex\x3e\n#include\x3cbonesVertex\x3e\n#include\x3cbakedVertexAnimation\x3e\nvec4 worldPos\x3dfinalWorld*vec4(position,1.0);\nvPositionW\x3dvec3(worldPos);\n#ifdef NORMAL\nvNormalW\x3dnormalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n#ifndef UV1\nvec2 uv\x3dvec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2\x3dvec2(0.,0.);\n#endif\n#ifdef BUMP\nif (vNormalInfos.x\x3d\x3d0.)\n{\nvNormalUV\x3dvec2(normalMatrix*vec4((uv*1.0)/waveLength+time*windForce*windDirection,1.0,0.0));\n#ifdef BUMPSUPERIMPOSE\nvNormalUV2\x3dvec2(normalMatrix*vec4((uv*0.721)/waveLength+time*1.2*windForce*windDirection,1.0,0.0));\n#endif\n}\nelse\n{\nvNormalUV\x3dvec2(normalMatrix*vec4((uv2*1.0)/waveLength+time*windForce*windDirection ,1.0,0.0));\n#ifdef BUMPSUPERIMPOSE\nvNormalUV2\x3dvec2(normalMatrix*vec4((uv2*0.721)/waveLength+time*1.2*windForce*windDirection ,1.0,0.0));\n#endif\n}\n#endif\n#include\x3cclipPlaneVertex\x3e\n#include\x3cfogVertex\x3e\n#include\x3cshadowsVertex\x3e[0..maxSimultaneousLights]\n#include\x3cvertexColorMixing\x3e\n#if defined(POINTSIZE) \x26\x26 !defined(WEBGPU)\ngl_PointSize\x3dpointSize;\n#endif\nfloat finalWaveCount\x3d1.0/(waveCount*0.5);\n#ifdef USE_WORLD_COORDINATES\nvec3 p\x3dworldPos.xyz;\n#else\nvec3 p\x3dposition;\n#endif\nfloat newY\x3d(sin(((p.x/finalWaveCount)+time*waveSpeed))*waveHeight*windDirection.x*5.0)\n+ (cos(((p.z/finalWaveCount)+ time*waveSpeed))*waveHeight*windDirection.y*5.0);\np.y+\x3dabs(newY);\n#ifdef USE_WORLD_COORDINATES\ngl_Position\x3dviewProjection*vec4(p,1.0);\n#else\ngl_Position\x3dviewProjection*finalWorld*vec4(p,1.0);\n#endif\n#ifdef REFLECTION\nvRefractionMapTexCoord.x\x3d0.5*(gl_Position.w+gl_Position.x);\nvRefractionMapTexCoord.y\x3d0.5*(gl_Position.w+gl_Position.y);\nvRefractionMapTexCoord.z\x3dgl_Position.w;\nworldPos\x3dreflectionViewProjection*finalWorld*vec4(position,1.0);\nvReflectionMapTexCoord.x\x3d0.5*(worldPos.w+worldPos.x);\nvReflectionMapTexCoord.y\x3d0.5*(worldPos.w+worldPos.y);\nvReflectionMapTexCoord.z\x3dworldPos.w;\n#endif\n#include\x3clogDepthVertex\x3e\n#define CUSTOM_VERTEX_MAIN_END\n}\n"}},
"../../../dev/materials/src/water/waterMaterial.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{WaterMaterial:()=>WaterMaterial});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../../node_modules/tslib/tslib.es6.mjs"),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("babylonjs/Misc/decorators");__webpack_require__.n(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__);
__webpack_require__("../../../dev/materials/src/water/water.fragment.ts");__webpack_require__("../../../dev/materials/src/water/water.vertex.ts");var WaterMaterialDefines=function(_super){function WaterMaterialDefines(){var _this=_super.call(this)||this;_this.BUMP=!1;_this.REFLECTION=!1;_this.CLIPPLANE=!1;_this.CLIPPLANE2=!1;_this.CLIPPLANE3=!1;_this.CLIPPLANE4=!1;_this.CLIPPLANE5=!1;_this.CLIPPLANE6=!1;_this.ALPHATEST=!1;_this.DEPTHPREPASS=!1;_this.POINTSIZE=!1;_this.FOG=!1;_this.NORMAL=!1;_this.UV1=
!1;_this.UV2=!1;_this.VERTEXCOLOR=!1;_this.VERTEXALPHA=!1;_this.NUM_BONE_INFLUENCERS=0;_this.BonesPerMesh=0;_this.INSTANCES=!1;_this.INSTANCESCOLOR=!1;_this.SPECULARTERM=!1;_this.LOGARITHMICDEPTH=!1;_this.USE_REVERSE_DEPTHBUFFER=!1;_this.FRESNELSEPARATE=!1;_this.BUMPSUPERIMPOSE=!1;_this.BUMPAFFECTSREFLECTION=!1;_this.USE_WORLD_COORDINATES=!1;_this.IMAGEPROCESSING=!1;_this.VIGNETTE=!1;_this.VIGNETTEBLENDMODEMULTIPLY=!1;_this.VIGNETTEBLENDMODEOPAQUE=!1;_this.TONEMAPPING=!1;_this.TONEMAPPING_ACES=!1;
_this.CONTRAST=!1;_this.EXPOSURE=!1;_this.COLORCURVES=!1;_this.COLORGRADING=!1;_this.COLORGRADING3D=!1;_this.SAMPLER3DGREENDEPTH=!1;_this.SAMPLER3DBGRMAP=!1;_this.DITHER=!1;_this.IMAGEPROCESSINGPOSTPROCESS=!1;_this.SKIPFINALCOLORCLAMP=!1;_this.rebuild();return _this}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(WaterMaterialDefines,_super);return WaterMaterialDefines}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialDefines),WaterMaterial=function(_super){function WaterMaterial(name,
scene,renderTargetSize){void 0===renderTargetSize&&(renderTargetSize=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector2(512,512));var _this=_super.call(this,name,scene)||this;_this.renderTargetSize=renderTargetSize;_this.diffuseColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(1,1,1);_this.specularColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(0,0,0);_this.specularPower=64;_this._disableLighting=!1;_this._maxSimultaneousLights=4;_this.windForce=
6;_this.windDirection=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector2(0,1);_this.waveHeight=.4;_this.bumpHeight=.4;_this._bumpSuperimpose=!1;_this._fresnelSeparate=!1;_this._bumpAffectsReflection=!1;_this.waterColor=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(.1,.1,.6);_this.colorBlendFactor=.2;_this.waterColor2=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Color3(.1,.1,.6);_this.colorBlendFactor2=.2;_this.waveLength=.1;_this.waveSpeed=1;_this.waveCount=
20;_this.disableClipPlane=!1;_this._useWorldCoordinatesForWaveDeformation=!1;_this._renderTargets=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SmartArray(16);_this._mesh=null;_this._reflectionTransform=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Matrix.Zero();_this._lastTime=0;_this._lastDeltaTime=0;_this._createRenderTargets(_this.getScene(),renderTargetSize);_this.getRenderTargetTextures=function(){_this._renderTargets.reset();_this._renderTargets.push(_this._reflectionRTT);
_this._renderTargets.push(_this._refractionRTT);return _this._renderTargets};_this._imageProcessingConfiguration=_this.getScene().imageProcessingConfiguration;_this._imageProcessingConfiguration&&(_this._imageProcessingObserver=_this._imageProcessingConfiguration.onUpdateParameters.add(function(){_this._markAllSubMeshesAsImageProcessingDirty()}));return _this}(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__extends)(WaterMaterial,_super);Object.defineProperty(WaterMaterial.prototype,"hasRenderTargetTextures",
{get:function(){return!0},enumerable:!1,configurable:!0});Object.defineProperty(WaterMaterial.prototype,"useLogarithmicDepth",{get:function(){return this._useLogarithmicDepth},set:function(value){this._useLogarithmicDepth=value&&this.getScene().getEngine().getCaps().fragmentDepthSupported;this._markAllSubMeshesAsMiscDirty()},enumerable:!1,configurable:!0});Object.defineProperty(WaterMaterial.prototype,"refractionTexture",{get:function(){return this._refractionRTT},enumerable:!1,configurable:!0});
Object.defineProperty(WaterMaterial.prototype,"reflectionTexture",{get:function(){return this._reflectionRTT},enumerable:!1,configurable:!0});WaterMaterial.prototype.addToRenderList=function(node){this._refractionRTT&&this._refractionRTT.renderList&&this._refractionRTT.renderList.push(node);this._reflectionRTT&&this._reflectionRTT.renderList&&this._reflectionRTT.renderList.push(node)};WaterMaterial.prototype.removeFromRenderList=function(node){if(this._refractionRTT&&this._refractionRTT.renderList){var idx=
this._refractionRTT.renderList.indexOf(node);-1!==idx&&this._refractionRTT.renderList.splice(idx,1)}this._reflectionRTT&&this._reflectionRTT.renderList&&(idx=this._reflectionRTT.renderList.indexOf(node),-1!==idx&&this._reflectionRTT.renderList.splice(idx,1))};WaterMaterial.prototype.enableRenderTargets=function(enable){enable=enable?1:0;this._refractionRTT&&(this._refractionRTT.refreshRate=enable);this._reflectionRTT&&(this._reflectionRTT.refreshRate=enable)};WaterMaterial.prototype.getRenderList=
function(){return this._refractionRTT?this._refractionRTT.renderList:[]};Object.defineProperty(WaterMaterial.prototype,"renderTargetsEnabled",{get:function(){return!(this._refractionRTT&&0===this._refractionRTT.refreshRate)},enumerable:!1,configurable:!0});WaterMaterial.prototype.needAlphaBlending=function(){return 1>this.alpha};WaterMaterial.prototype.needAlphaTesting=function(){return!1};WaterMaterial.prototype.getAlphaTestTexture=function(){return null};WaterMaterial.prototype.isReadyForSubMesh=
function(mesh,subMesh,useInstances){if(this.isFrozen&&subMesh.effect&&subMesh.effect._wasPreviouslyReady&&subMesh.effect._wasPreviouslyUsingInstances===useInstances)return!0;subMesh.materialDefines||(subMesh.materialDefines=new WaterMaterialDefines);var defines=subMesh.materialDefines,scene=this.getScene();if(this._isReadyForSubMesh(subMesh))return!0;var engine=scene.getEngine();if(defines._areTexturesDirty&&(defines._needUVs=!1,scene.texturesEnabled)){if(this.bumpTexture&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.BumpTextureEnabled)if(this.bumpTexture.isReady())defines._needUVs=
!0,defines.BUMP=!0;else return!1;babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.ReflectionTextureEnabled&&(defines.REFLECTION=!0)}babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForFrameBoundValues(scene,engine,this,defines,useInstances?!0:!1);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForMisc(mesh,scene,this._useLogarithmicDepth,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(mesh),defines);
defines._areMiscDirty&&(defines.FRESNELSEPARATE=this._fresnelSeparate,defines.BUMPSUPERIMPOSE=this._bumpSuperimpose,defines.BUMPAFFECTSREFLECTION=this._bumpAffectsReflection,defines.USE_WORLD_COORDINATES=this._useWorldCoordinatesForWaveDeformation);defines._needNormals=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForLights(scene,mesh,defines,!0,this._maxSimultaneousLights,this._disableLighting);if(defines._areImageProcessingDirty&&this._imageProcessingConfiguration){if(!this._imageProcessingConfiguration.isReady())return!1;
this._imageProcessingConfiguration.prepareDefines(defines);defines.IS_REFLECTION_LINEAR=null!=this.reflectionTexture&&!this.reflectionTexture.gammaSpace;defines.IS_REFRACTION_LINEAR=null!=this.refractionTexture&&!this.refractionTexture.gammaSpace}babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareDefinesForAttributes(mesh,defines,!0,!0);this._mesh=mesh;if(this._waitingRenderList){for(var i=0;i<this._waitingRenderList.length;i++)this.addToRenderList(scene.getNodeById(this._waitingRenderList[i]));
this._waitingRenderList=null}if(defines.isDirty){defines.markAsProcessed();scene.resetCachedMaterial();i=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.EffectFallbacks;defines.FOG&&i.addFallback(1,"FOG");defines.LOGARITHMICDEPTH&&i.addFallback(0,"LOGARITHMICDEPTH");babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.HandleFallbacksForShadows(defines,i,this.maxSimultaneousLights);0<defines.NUM_BONE_INFLUENCERS&&i.addCPUSkinningFallback(0,mesh);var attribs=[babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.PositionKind];
defines.NORMAL&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.NormalKind);defines.UV1&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UVKind);defines.UV2&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.UV2Kind);defines.VERTEXCOLOR&&attribs.push(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.VertexBuffer.ColorKind);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForBones(attribs,
mesh,defines,i);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareAttributesForInstances(attribs,defines);mesh=defines.toString();var uniforms="world view viewProjection vEyePosition vLightsType vDiffuseColor vSpecularColor vFogInfos vFogColor pointSize vNormalInfos mBones normalMatrix logarithmicDepthConstant reflectionViewProjection windDirection waveLength time windForce cameraPosition bumpHeight waveHeight waterColor waterColor2 colorBlendFactor colorBlendFactor2 waveSpeed waveCount".split(" "),
samplers=["normalSampler","refractionSampler","reflectionSampler"],uniformBuffers=[];babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.ImageProcessingConfiguration&&(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.ImageProcessingConfiguration.PrepareUniforms(uniforms,defines),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.ImageProcessingConfiguration.PrepareSamplers(samplers,defines));(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.addClipPlaneUniforms)(uniforms);babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:uniforms,
uniformBuffersNames:uniformBuffers,samplers,defines,maxSimultaneousLights:this.maxSimultaneousLights});subMesh.setEffect(scene.getEngine().createEffect("water",{attributes:attribs,uniformsNames:uniforms,uniformBuffersNames:uniformBuffers,samplers,defines:mesh,fallbacks:i,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights}},engine),defines,this._materialContext)}if(!subMesh.effect||!subMesh.effect.isReady())return!1;defines._renderId=
scene.getRenderId();subMesh.effect._wasPreviouslyReady=!0;subMesh.effect._wasPreviouslyUsingInstances=!!useInstances;return!0};WaterMaterial.prototype.bindForSubMesh=function(world,mesh,subMesh){var scene=this.getScene(),defines=subMesh.materialDefines;defines&&(subMesh=subMesh.effect)&&this._mesh&&(this._activeEffect=subMesh,this.bindOnlyWorldMatrix(world),this._activeEffect.setMatrix("viewProjection",scene.getTransformMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindBonesParameters(mesh,
this._activeEffect),this._mustRebind(scene,subMesh)&&(this.bumpTexture&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.BumpTextureEnabled&&(this._activeEffect.setTexture("normalSampler",this.bumpTexture),this._activeEffect.setFloat2("vNormalInfos",this.bumpTexture.coordinatesIndex,this.bumpTexture.level),this._activeEffect.setMatrix("normalMatrix",this.bumpTexture.getTextureMatrix())),(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.bindClipPlane)(subMesh,this,scene),
this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),scene.bindEyePosition(subMesh)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*mesh.visibility),defines.SPECULARTERM&&this._activeEffect.setColor4("vSpecularColor",this.specularColor,this.specularPower),scene.lightsEnabled&&!this.disableLighting&&babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindLights(scene,mesh,this._activeEffect,defines,this.maxSimultaneousLights),scene.fogEnabled&&
mesh.applyFog&&scene.fogMode!==babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",scene.getViewMatrix()),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindFogParameters(scene,mesh,this._activeEffect),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper.BindLogDepth(defines,this._activeEffect,scene),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.MaterialFlags.ReflectionTextureEnabled&&(this._activeEffect.setTexture("refractionSampler",
this._refractionRTT),this._activeEffect.setTexture("reflectionSampler",this._reflectionRTT)),world=this._reflectionTransform.multiply(scene.getProjectionMatrix()),scene=scene.getEngine().getDeltaTime(),scene!==this._lastDeltaTime&&(this._lastDeltaTime=scene,this._lastTime+=this._lastDeltaTime),this._activeEffect.setMatrix("reflectionViewProjection",world),this._activeEffect.setVector2("windDirection",this.windDirection),this._activeEffect.setFloat("waveLength",this.waveLength),this._activeEffect.setFloat("time",
this._lastTime/1E5),this._activeEffect.setFloat("windForce",this.windForce),this._activeEffect.setFloat("waveHeight",this.waveHeight),this._activeEffect.setFloat("bumpHeight",this.bumpHeight),this._activeEffect.setColor4("waterColor",this.waterColor,1),this._activeEffect.setFloat("colorBlendFactor",this.colorBlendFactor),this._activeEffect.setColor4("waterColor2",this.waterColor2,1),this._activeEffect.setFloat("colorBlendFactor2",this.colorBlendFactor2),this._activeEffect.setFloat("waveSpeed",this.waveSpeed),
this._activeEffect.setFloat("waveCount",this.waveCount),this._imageProcessingConfiguration&&!this._imageProcessingConfiguration.applyByPostProcess&&this._imageProcessingConfiguration.bind(this._activeEffect),this._afterBind(mesh,this._activeEffect))};WaterMaterial.prototype._createRenderTargets=function(scene,renderTargetSize){var _this=this;this._refractionRTT=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RenderTargetTexture(name+"_refraction",{width:renderTargetSize.x,height:renderTargetSize.y},
scene,!1,!0);this._refractionRTT.wrapU=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Constants.TEXTURE_MIRROR_ADDRESSMODE;this._refractionRTT.wrapV=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Constants.TEXTURE_MIRROR_ADDRESSMODE;this._refractionRTT.ignoreCameraViewport=!0;this._reflectionRTT=new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RenderTargetTexture(name+"_reflection",{width:renderTargetSize.x,height:renderTargetSize.y},scene,!1,!0);this._reflectionRTT.wrapU=
babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Constants.TEXTURE_MIRROR_ADDRESSMODE;this._reflectionRTT.wrapV=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Constants.TEXTURE_MIRROR_ADDRESSMODE;this._reflectionRTT.ignoreCameraViewport=!0;var isVisible,clipPlane=null,savedViewMatrix,mirrorMatrix=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Matrix.Zero();this._refractionRTT.onBeforeRender=function(){_this._mesh&&(isVisible=_this._mesh.isVisible,_this._mesh.isVisible=!1);_this.disableClipPlane||
(clipPlane=scene.clipPlane,scene.clipPlane=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Plane.FromPositionAndNormal(new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,(_this._mesh?_this._mesh.absolutePosition.y:0)+.05,0),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,1,0)))};this._refractionRTT.onAfterRender=function(){_this._mesh&&(_this._mesh.isVisible=isVisible);_this.disableClipPlane||(scene.clipPlane=clipPlane)};this._reflectionRTT.onBeforeRender=
function(){_this._mesh&&(isVisible=_this._mesh.isVisible,_this._mesh.isVisible=!1);_this.disableClipPlane||(clipPlane=scene.clipPlane,scene.clipPlane=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Plane.FromPositionAndNormal(new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,(_this._mesh?_this._mesh.absolutePosition.y:0)-.05,0),new babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,-1,0)),babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Matrix.ReflectionToRef(scene.clipPlane,
mirrorMatrix));savedViewMatrix=scene.getViewMatrix();mirrorMatrix.multiplyToRef(savedViewMatrix,_this._reflectionTransform);scene.setTransformMatrix(_this._reflectionTransform,scene.getProjectionMatrix());scene._mirroredCameraPosition=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.Vector3.TransformCoordinates(scene.activeCamera.position,mirrorMatrix)};this._reflectionRTT.onAfterRender=function(){_this._mesh&&(_this._mesh.isVisible=isVisible);scene.clipPlane=clipPlane;scene.setTransformMatrix(savedViewMatrix,
scene.getProjectionMatrix());scene._mirroredCameraPosition=null}};WaterMaterial.prototype.getAnimatables=function(){var results=[];this.bumpTexture&&this.bumpTexture.animations&&0<this.bumpTexture.animations.length&&results.push(this.bumpTexture);this._reflectionRTT&&this._reflectionRTT.animations&&0<this._reflectionRTT.animations.length&&results.push(this._reflectionRTT);this._refractionRTT&&this._refractionRTT.animations&&0<this._refractionRTT.animations.length&&results.push(this._refractionRTT);
return results};WaterMaterial.prototype.getActiveTextures=function(){var activeTextures=_super.prototype.getActiveTextures.call(this);this._bumpTexture&&activeTextures.push(this._bumpTexture);return activeTextures};WaterMaterial.prototype.hasTexture=function(texture){return _super.prototype.hasTexture.call(this,texture)||this._bumpTexture===texture?!0:!1};WaterMaterial.prototype.dispose=function(forceDisposeEffect){this.bumpTexture&&this.bumpTexture.dispose();var index=this.getScene().customRenderTargets.indexOf(this._refractionRTT);
-1!=index&&this.getScene().customRenderTargets.splice(index,1);index=this.getScene().customRenderTargets.indexOf(this._reflectionRTT);-1!=index&&this.getScene().customRenderTargets.splice(index,1);this._reflectionRTT&&this._reflectionRTT.dispose();this._refractionRTT&&this._refractionRTT.dispose();this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver);_super.prototype.dispose.call(this,forceDisposeEffect)};
WaterMaterial.prototype.clone=function(name){var _this=this;return babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Clone(function(){return new WaterMaterial(name,_this.getScene())},this)};WaterMaterial.prototype.serialize=function(){var serializationObject=_super.prototype.serialize.call(this);serializationObject.customType="BABYLON.WaterMaterial";serializationObject.renderList=[];if(this._refractionRTT&&this._refractionRTT.renderList)for(var i=0;i<this._refractionRTT.renderList.length;i++)serializationObject.renderList.push(this._refractionRTT.renderList[i].id);
return serializationObject};WaterMaterial.prototype.getClassName=function(){return"WaterMaterial"};WaterMaterial.Parse=function(source,scene,rootUrl){rootUrl=babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.SerializationHelper.Parse(function(){return new WaterMaterial(source.name,scene)},source,scene,rootUrl);rootUrl._waitingRenderList=source.renderList;return rootUrl};WaterMaterial.CreateDefaultMesh=function(name,scene){return(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.CreateGround)(name,
{width:512,height:512,subdivisions:32,updatable:!1},scene)};(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsTexture)("bumpTexture")],WaterMaterial.prototype,"_bumpTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],WaterMaterial.prototype,"bumpTexture",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],
WaterMaterial.prototype,"diffuseColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],WaterMaterial.prototype,"specularColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],WaterMaterial.prototype,"specularPower",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("disableLighting")],
WaterMaterial.prototype,"_disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],WaterMaterial.prototype,"disableLighting",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("maxSimultaneousLights")],WaterMaterial.prototype,"_maxSimultaneousLights",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsLightsDirty")],
WaterMaterial.prototype,"maxSimultaneousLights",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],WaterMaterial.prototype,"windForce",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsVector2)()],WaterMaterial.prototype,"windDirection",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],
WaterMaterial.prototype,"waveHeight",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],WaterMaterial.prototype,"bumpHeight",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("bumpSuperimpose")],WaterMaterial.prototype,"_bumpSuperimpose",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsMiscDirty")],
WaterMaterial.prototype,"bumpSuperimpose",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("fresnelSeparate")],WaterMaterial.prototype,"_fresnelSeparate",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsMiscDirty")],WaterMaterial.prototype,"fresnelSeparate",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("bumpAffectsReflection")],
WaterMaterial.prototype,"_bumpAffectsReflection",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsMiscDirty")],WaterMaterial.prototype,"bumpAffectsReflection",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],WaterMaterial.prototype,"waterColor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],
WaterMaterial.prototype,"colorBlendFactor",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serializeAsColor3)()],WaterMaterial.prototype,"waterColor2",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],WaterMaterial.prototype,"colorBlendFactor2",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],
WaterMaterial.prototype,"waveLength",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],WaterMaterial.prototype,"waveSpeed",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],WaterMaterial.prototype,"waveCount",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],
WaterMaterial.prototype,"disableClipPlane",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)("useWorldCoordinatesForWaveDeformation")],WaterMaterial.prototype,"_useWorldCoordinatesForWaveDeformation",void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.expandToProperty)("_markAllSubMeshesAsMiscDirty")],WaterMaterial.prototype,"useWorldCoordinatesForWaveDeformation",
void 0);(0,tslib__WEBPACK_IMPORTED_MODULE_3__.__decorate)([(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.serialize)()],WaterMaterial.prototype,"useLogarithmicDepth",null);return WaterMaterial}(babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.PushMaterial);(0,babylonjs_Misc_decorators__WEBPACK_IMPORTED_MODULE_0__.RegisterClass)("BABYLON.WaterMaterial",WaterMaterial)},"../../../lts/materials/src/legacy/legacy.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__,{CellMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.CellMaterial,CustomMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.CustomMaterial,CustomShaderStructure:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.CustomShaderStructure,FireMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.FireMaterial,FurMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.FurMaterial,GradientMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.GradientMaterial,
GridMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.GridMaterial,LavaMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.LavaMaterial,MixMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.MixMaterial,NormalMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.NormalMaterial,PBRCustomMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.PBRCustomMaterial,ShaderAlebdoParts:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.ShaderAlebdoParts,ShaderSpecialParts:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.ShaderSpecialParts,
ShadowOnlyMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.ShadowOnlyMaterial,SimpleMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.SimpleMaterial,SkyMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.SkyMaterial,TerrainMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.TerrainMaterial,TriPlanarMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.TriPlanarMaterial,WaterMaterial:()=>materials_index__WEBPACK_IMPORTED_MODULE_0__.WaterMaterial});var materials_index__WEBPACK_IMPORTED_MODULE_0__=
__webpack_require__("../../../dev/materials/src/index.ts");__unused_webpack_module="undefined"!==typeof __webpack_require__.g?__webpack_require__.g:"undefined"!==typeof window?window:void 0;if("undefined"!==typeof __unused_webpack_module){__unused_webpack_module.BABYLON=__unused_webpack_module.BABYLON||{};for(var mat in materials_index__WEBPACK_IMPORTED_MODULE_0__)__unused_webpack_module.BABYLON[mat]=materials_index__WEBPACK_IMPORTED_MODULE_0__[mat]}},"babylonjs/Misc/decorators":module=>{module.exports=
__WEBPACK_EXTERNAL_MODULE_babylonjs_Misc_decorators__},"../../../../node_modules/tslib/tslib.es6.mjs":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{function __extends(d,b){function __(){this.constructor=d}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}function __rest(s,e){var t={},p;for(p in s)Object.prototype.hasOwnProperty.call(s,
p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __decorate(decorators,target,key,desc){var c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,
target,key,desc);else for(var i=decorators.length-1;0<=i;i--)if(d=decorators[i])r=(3>c?d(r):3<c?d(target,key,r):d(target,key))||r;return 3<c&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __esDecorate(ctor,descriptorIn,decorators,contextIn,initializers,extraInitializers){function accept(f){if(void 0!==f&&"function"!==typeof f)throw new TypeError("Function expected");return f}var kind=contextIn.kind,
key="getter"===kind?"get":"setter"===kind?"set":"value";ctor=!descriptorIn&&ctor?contextIn["static"]?ctor:ctor.prototype:null;descriptorIn=descriptorIn||(ctor?Object.getOwnPropertyDescriptor(ctor,contextIn.name):{});for(var _,done=!1,i=decorators.length-1;0<=i;i--){_={};for(var p in contextIn)_[p]="access"===p?{}:contextIn[p];for(p in contextIn.access)_.access[p]=contextIn.access[p];_.addInitializer=function(f){if(done)throw new TypeError("Cannot add initializers after decoration has completed");
extraInitializers.push(accept(f||null))};var result=(0,decorators[i])("accessor"===kind?{get:descriptorIn.get,set:descriptorIn.set}:descriptorIn[key],_);if("accessor"===kind){if(void 0!==result){if(null===result||"object"!==typeof result)throw new TypeError("Object expected");if(_=accept(result.get))descriptorIn.get=_;if(_=accept(result.set))descriptorIn.set=_;(_=accept(result.init))&&initializers.unshift(_)}}else if(_=accept(result))"field"===kind?initializers.unshift(_):descriptorIn[key]=_}ctor&&
Object.defineProperty(ctor,contextIn.name,descriptorIn);done=!0}function __runInitializers(thisArg,initializers,value){for(var useValue=2<arguments.length,i=0;i<initializers.length;i++)value=useValue?initializers[i].call(thisArg,value):initializers[i].call(thisArg);return useValue?value:void 0}function __propKey(x){return"symbol"===typeof x?x:"".concat(x)}function __setFunctionName(f,name,prefix){"symbol"===typeof name&&(name=name.description?"[".concat(name.description,"]"):"");return Object.defineProperty(f,
"name",{configurable:!0,value:prefix?"".concat(prefix," ",name):name})}function __metadata(metadataKey,metadataValue){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new (P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}
function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||
((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=0<t.length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3]))_.label=op[1];else if(6===op[0]&&_.label<t[1])_.label=t[1],t=op;else if(t&&_.label<t[2])_.label=
t[2],_.ops.push(op);else{t[2]&&_.ops.pop();_.trys.pop();continue}}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},"function"===typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g}function __exportStar(m,o){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(o,
p)||__createBinding(o,m,p)}function __values(o){var s="function"===typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"===typeof o.length)return{next:function(){o&&i>=o.length&&(o=void 0);return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.");}function __read(o,n){var m="function"===typeof Symbol&&o[Symbol.iterator];if(!m)return o;o=m.call(o);var r,ar=[];try{for(;(void 0===n||0<n--)&&!(r=o.next()).done;)ar.push(r.value)}catch(error){var e=
{error}}finally{try{r&&!r.done&&(m=o["return"])&&m.call(o)}finally{if(e)throw e.error;}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;s=Array(s);var k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)s[k]=a[j];return s}function __spreadArray(to,from,pack){if(pack||2===arguments.length)for(var i=0,l=from.length,ar;i<
l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){function verb(n){g[n]&&(i[n]=function(v){return new Promise(function(a,b){1<q.push([n,v,a,b])||resume(n,v)})})}function resume(n,v){try{var r=g[n](v);r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):
settle(q[0][2],r)}catch(e){settle(q[0][3],e)}}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){(f(v),q.shift(),q.length)&&resume(q[0][0],q[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=generator.apply(thisArg,_arguments||[]),i,q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i}function __asyncDelegator(o){function verb(n,f){i[n]=
o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:!1}:f?f(v):v}:f}var i,p;return i={},verb("next"),verb("throw",function(e){throw e;}),verb("return"),i[Symbol.iterator]=function(){return this},i}function __asyncValues(o){function verb(n){i[n]=o[n]&&function(v){return new Promise(function(resolve,reject){v=o[n](v);settle(resolve,reject,v.done,v.value)})}}function settle(resolve,reject,d,v$jscomp$0){Promise.resolve(v$jscomp$0).then(function(v){resolve({value:v,done:d})},reject)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");
var m=o[Symbol.asyncIterator],i;return m?m.call(o):(o="function"===typeof __values?__values(o):o[Symbol.iterator](),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i)}function __makeTemplateObject(cooked,raw){Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw;return cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,
k)&&__createBinding(result,mod,k);__setModuleDefault(result,mod);return result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):
f?f.value:state.get(receiver)}function __classPrivateFieldSet(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value}function __classPrivateFieldIn(state,
receiver){if(null===receiver||"object"!==typeof receiver&&"function"!==typeof receiver)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof state?receiver===state:state.has(receiver)}__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>
__classPrivateFieldGet,__classPrivateFieldIn:()=>__classPrivateFieldIn,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__esDecorate:()=>__esDecorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__propKey:()=>__propKey,__read:()=>__read,__rest:()=>
__rest,__runInitializers:()=>__runInitializers,__setFunctionName:()=>__setFunctionName,__spread:()=>__spread,__spreadArray:()=>__spreadArray,__spreadArrays:()=>__spreadArrays,__values:()=>__values,"default":()=>__WEBPACK_DEFAULT_EXPORT__});var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,
b$jscomp$0)},__assign=function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t};return __assign.apply(this,arguments)},__createBinding=Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable))desc={enumerable:!0,get:function(){return m[k]}};Object.defineProperty(o,
k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k);o[k2]=m[k]},__setModuleDefault=Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o["default"]=v};const __WEBPACK_DEFAULT_EXPORT__={__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,
__classPrivateFieldSet,__classPrivateFieldIn}}},__webpack_module_cache__={};(()=>{__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module["default"]:()=>module;__webpack_require__.d(getter,{a:getter});return getter}})();(()=>{__webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})}})();(()=>{__webpack_require__.g=function(){if("object"===
typeof globalThis)return globalThis;try{return this||(new Function("return this"))()}catch(e){if("object"===typeof window)return window}}()})();(()=>{__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop)})();(()=>{__webpack_require__.r=exports=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});Object.defineProperty(exports,"__esModule",{value:!0})}})();var __webpack_exports__={};(()=>{__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__,{"default":()=>__WEBPACK_DEFAULT_EXPORT__,materials:()=>_lts_materials_legacy_legacy__WEBPACK_IMPORTED_MODULE_0__});var _lts_materials_legacy_legacy__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../lts/materials/src/legacy/legacy.ts");const __WEBPACK_DEFAULT_EXPORT__=_lts_materials_legacy_legacy__WEBPACK_IMPORTED_MODULE_0__})();return __webpack_exports__=__webpack_exports__["default"]})())}
//# sourceMappingURL=module$node_modules$babylonjs_materials$babylonjs_materials.js.map
