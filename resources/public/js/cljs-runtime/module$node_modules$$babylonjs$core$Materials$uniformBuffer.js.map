{
"version":3,
"file":"module$node_modules$$babylonjs$core$Materials$uniformBuffer.js",
"lineCount":34,
"mappings":"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",
"sources":["node_modules/@babylonjs/core/Materials/uniformBuffer.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$babylonjs$core$Materials$uniformBuffer\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UniformBuffer = void 0;\n\nvar _logger = require(\"../Misc/logger.js\");\n\nvar _tools = require(\"../Misc/tools.js\");\n\nrequire(\"../Engines/Extensions/engine.uniformBuffer.js\");\n\n/**\n * Uniform buffer objects.\n *\n * Handles blocks of uniform on the GPU.\n *\n * If WebGL 2 is not available, this class falls back on traditional setUniformXXX calls.\n *\n * For more information, please refer to :\n * https://www.khronos.org/opengl/wiki/Uniform_Buffer_Object\n */\nclass UniformBuffer {\n  /**\n   * Instantiates a new Uniform buffer objects.\n   *\n   * Handles blocks of uniform on the GPU.\n   *\n   * If WebGL 2 is not available, this class falls back on traditional setUniformXXX calls.\n   *\n   * For more information, please refer to :\n   * @see https://www.khronos.org/opengl/wiki/Uniform_Buffer_Object\n   * @param engine Define the engine the buffer is associated with\n   * @param data Define the data contained in the buffer\n   * @param dynamic Define if the buffer is updatable\n   * @param name to assign to the buffer (debugging purpose)\n   * @param forceNoUniformBuffer define that this object must not rely on UBO objects\n   */\n  constructor(engine, data, dynamic, name, forceNoUniformBuffer = false) {\n    // Matrix cache\n    this._valueCache = {};\n    this._engine = engine;\n    this._noUBO = !engine.supportsUniformBuffers || forceNoUniformBuffer;\n    this._dynamic = dynamic;\n    this._name = name !== null && name !== void 0 ? name : \"no-name\";\n    this._data = data || [];\n    this._uniformLocations = {};\n    this._uniformSizes = {};\n    this._uniformArraySizes = {};\n    this._uniformLocationPointer = 0;\n    this._needSync = false;\n\n    if (this._engine._features.trackUbosInFrame) {\n      this._buffers = [];\n      this._bufferIndex = -1;\n      this._createBufferOnWrite = false;\n      this._currentFrameId = 0;\n    }\n\n    if (this._noUBO) {\n      this.updateMatrix3x3 = this._updateMatrix3x3ForEffect;\n      this.updateMatrix2x2 = this._updateMatrix2x2ForEffect;\n      this.updateFloat = this._updateFloatForEffect;\n      this.updateFloat2 = this._updateFloat2ForEffect;\n      this.updateFloat3 = this._updateFloat3ForEffect;\n      this.updateFloat4 = this._updateFloat4ForEffect;\n      this.updateFloatArray = this._updateFloatArrayForEffect;\n      this.updateArray = this._updateArrayForEffect;\n      this.updateIntArray = this._updateIntArrayForEffect;\n      this.updateUIntArray = this._updateUIntArrayForEffect;\n      this.updateMatrix = this._updateMatrixForEffect;\n      this.updateMatrices = this._updateMatricesForEffect;\n      this.updateVector3 = this._updateVector3ForEffect;\n      this.updateVector4 = this._updateVector4ForEffect;\n      this.updateColor3 = this._updateColor3ForEffect;\n      this.updateColor4 = this._updateColor4ForEffect;\n      this.updateDirectColor4 = this._updateDirectColor4ForEffect;\n      this.updateInt = this._updateIntForEffect;\n      this.updateInt2 = this._updateInt2ForEffect;\n      this.updateInt3 = this._updateInt3ForEffect;\n      this.updateInt4 = this._updateInt4ForEffect;\n      this.updateUInt = this._updateUIntForEffect;\n      this.updateUInt2 = this._updateUInt2ForEffect;\n      this.updateUInt3 = this._updateUInt3ForEffect;\n      this.updateUInt4 = this._updateUInt4ForEffect;\n    } else {\n      this._engine._uniformBuffers.push(this);\n\n      this.updateMatrix3x3 = this._updateMatrix3x3ForUniform;\n      this.updateMatrix2x2 = this._updateMatrix2x2ForUniform;\n      this.updateFloat = this._updateFloatForUniform;\n      this.updateFloat2 = this._updateFloat2ForUniform;\n      this.updateFloat3 = this._updateFloat3ForUniform;\n      this.updateFloat4 = this._updateFloat4ForUniform;\n      this.updateFloatArray = this._updateFloatArrayForUniform;\n      this.updateArray = this._updateArrayForUniform;\n      this.updateIntArray = this._updateIntArrayForUniform;\n      this.updateUIntArray = this._updateUIntArrayForUniform;\n      this.updateMatrix = this._updateMatrixForUniform;\n      this.updateMatrices = this._updateMatricesForUniform;\n      this.updateVector3 = this._updateVector3ForUniform;\n      this.updateVector4 = this._updateVector4ForUniform;\n      this.updateColor3 = this._updateColor3ForUniform;\n      this.updateColor4 = this._updateColor4ForUniform;\n      this.updateDirectColor4 = this._updateDirectColor4ForUniform;\n      this.updateInt = this._updateIntForUniform;\n      this.updateInt2 = this._updateInt2ForUniform;\n      this.updateInt3 = this._updateInt3ForUniform;\n      this.updateInt4 = this._updateInt4ForUniform;\n      this.updateUInt = this._updateUIntForUniform;\n      this.updateUInt2 = this._updateUInt2ForUniform;\n      this.updateUInt3 = this._updateUInt3ForUniform;\n      this.updateUInt4 = this._updateUInt4ForUniform;\n    }\n  }\n  /**\n   * Indicates if the buffer is using the WebGL2 UBO implementation,\n   * or just falling back on setUniformXXX calls.\n   */\n\n\n  get useUbo() {\n    return !this._noUBO;\n  }\n  /**\n   * Indicates if the WebGL underlying uniform buffer is in sync\n   * with the javascript cache data.\n   */\n\n\n  get isSync() {\n    return !this._needSync;\n  }\n  /**\n   * Indicates if the WebGL underlying uniform buffer is dynamic.\n   * Also, a dynamic UniformBuffer will disable cache verification and always\n   * update the underlying WebGL uniform buffer to the GPU.\n   * @returns if Dynamic, otherwise false\n   */\n\n\n  isDynamic() {\n    return this._dynamic !== undefined;\n  }\n  /**\n   * The data cache on JS side.\n   * @returns the underlying data as a float array\n   */\n\n\n  getData() {\n    return this._bufferData;\n  }\n  /**\n   * The underlying WebGL Uniform buffer.\n   * @returns the webgl buffer\n   */\n\n\n  getBuffer() {\n    return this._buffer;\n  }\n  /**\n   * std140 layout specifies how to align data within an UBO structure.\n   * See https://khronos.org/registry/OpenGL/specs/gl/glspec45.core.pdf#page=159\n   * for specs.\n   * @param size\n   */\n\n\n  _fillAlignment(size) {\n    // This code has been simplified because we only use floats, vectors of 1, 2, 3, 4 components\n    // and 4x4 matrices\n    // TODO : change if other types are used\n    let alignment;\n\n    if (size <= 2) {\n      alignment = size;\n    } else {\n      alignment = 4;\n    }\n\n    if (this._uniformLocationPointer % alignment !== 0) {\n      const oldPointer = this._uniformLocationPointer;\n      this._uniformLocationPointer += alignment - this._uniformLocationPointer % alignment;\n      const diff = this._uniformLocationPointer - oldPointer;\n\n      for (let i = 0; i < diff; i++) {\n        this._data.push(0);\n      }\n    }\n  }\n  /**\n   * Adds an uniform in the buffer.\n   * Warning : the subsequents calls of this function must be in the same order as declared in the shader\n   * for the layout to be correct ! The addUniform function only handles types like float, vec2, vec3, vec4, mat4,\n   * meaning size=1,2,3,4 or 16. It does not handle struct types.\n   * @param name Name of the uniform, as used in the uniform block in the shader.\n   * @param size Data size, or data directly.\n   * @param arraySize The number of elements in the array, 0 if not an array.\n   */\n\n\n  addUniform(name, size, arraySize = 0) {\n    if (this._noUBO) {\n      return;\n    }\n\n    if (this._uniformLocations[name] !== undefined) {\n      // Already existing uniform\n      return;\n    } // This function must be called in the order of the shader layout !\n    // size can be the size of the uniform, or data directly\n\n\n    let data; // std140 FTW...\n\n    if (arraySize > 0) {\n      if (size instanceof Array) {\n        throw \"addUniform should not be use with Array in UBO: \" + name;\n      }\n\n      this._fillAlignment(4);\n\n      this._uniformArraySizes[name] = {\n        strideSize: size,\n        arraySize\n      };\n\n      if (size == 16) {\n        size = size * arraySize;\n      } else {\n        const perElementPadding = 4 - size;\n        const totalPadding = perElementPadding * arraySize;\n        size = size * arraySize + totalPadding;\n      }\n\n      data = []; // Fill with zeros\n\n      for (let i = 0; i < size; i++) {\n        data.push(0);\n      }\n    } else {\n      if (size instanceof Array) {\n        data = size;\n        size = data.length;\n      } else {\n        size = size;\n        data = []; // Fill with zeros\n\n        for (let i = 0; i < size; i++) {\n          data.push(0);\n        }\n      }\n\n      this._fillAlignment(size);\n    }\n\n    this._uniformSizes[name] = size;\n    this._uniformLocations[name] = this._uniformLocationPointer;\n    this._uniformLocationPointer += size;\n\n    for (let i = 0; i < size; i++) {\n      this._data.push(data[i]);\n    }\n\n    this._needSync = true;\n  }\n  /**\n   * Adds a Matrix 4x4 to the uniform buffer.\n   * @param name Name of the uniform, as used in the uniform block in the shader.\n   * @param mat A 4x4 matrix.\n   */\n\n\n  addMatrix(name, mat) {\n    this.addUniform(name, Array.prototype.slice.call(mat.toArray()));\n  }\n  /**\n   * Adds a vec2 to the uniform buffer.\n   * @param name Name of the uniform, as used in the uniform block in the shader.\n   * @param x Define the x component value of the vec2\n   * @param y Define the y component value of the vec2\n   */\n\n\n  addFloat2(name, x, y) {\n    const temp = [x, y];\n    this.addUniform(name, temp);\n  }\n  /**\n   * Adds a vec3 to the uniform buffer.\n   * @param name Name of the uniform, as used in the uniform block in the shader.\n   * @param x Define the x component value of the vec3\n   * @param y Define the y component value of the vec3\n   * @param z Define the z component value of the vec3\n   */\n\n\n  addFloat3(name, x, y, z) {\n    const temp = [x, y, z];\n    this.addUniform(name, temp);\n  }\n  /**\n   * Adds a vec3 to the uniform buffer.\n   * @param name Name of the uniform, as used in the uniform block in the shader.\n   * @param color Define the vec3 from a Color\n   */\n\n\n  addColor3(name, color) {\n    const temp = [color.r, color.g, color.b];\n    this.addUniform(name, temp);\n  }\n  /**\n   * Adds a vec4 to the uniform buffer.\n   * @param name Name of the uniform, as used in the uniform block in the shader.\n   * @param color Define the rgb components from a Color\n   * @param alpha Define the a component of the vec4\n   */\n\n\n  addColor4(name, color, alpha) {\n    const temp = [color.r, color.g, color.b, alpha];\n    this.addUniform(name, temp);\n  }\n  /**\n   * Adds a vec3 to the uniform buffer.\n   * @param name Name of the uniform, as used in the uniform block in the shader.\n   * @param vector Define the vec3 components from a Vector\n   */\n\n\n  addVector3(name, vector) {\n    const temp = [vector.x, vector.y, vector.z];\n    this.addUniform(name, temp);\n  }\n  /**\n   * Adds a Matrix 3x3 to the uniform buffer.\n   * @param name Name of the uniform, as used in the uniform block in the shader.\n   */\n\n\n  addMatrix3x3(name) {\n    this.addUniform(name, 12);\n  }\n  /**\n   * Adds a Matrix 2x2 to the uniform buffer.\n   * @param name Name of the uniform, as used in the uniform block in the shader.\n   */\n\n\n  addMatrix2x2(name) {\n    this.addUniform(name, 8);\n  }\n  /**\n   * Effectively creates the WebGL Uniform Buffer, once layout is completed with `addUniform`.\n   */\n\n\n  create() {\n    if (this._noUBO) {\n      return;\n    }\n\n    if (this._buffer) {\n      return; // nothing to do\n    } // See spec, alignment must be filled as a vec4\n\n\n    this._fillAlignment(4);\n\n    this._bufferData = new Float32Array(this._data);\n\n    this._rebuild();\n\n    this._needSync = true;\n  }\n  /** @internal */\n\n\n  _rebuild() {\n    if (this._noUBO || !this._bufferData) {\n      return;\n    }\n\n    if (this._dynamic) {\n      this._buffer = this._engine.createDynamicUniformBuffer(this._bufferData);\n    } else {\n      this._buffer = this._engine.createUniformBuffer(this._bufferData);\n    }\n\n    if (this._engine._features.trackUbosInFrame) {\n      this._buffers.push([this._buffer, this._engine._features.checkUbosContentBeforeUpload ? this._bufferData.slice() : undefined]);\n\n      this._bufferIndex = this._buffers.length - 1;\n      this._createBufferOnWrite = false;\n    }\n  }\n  /** @internal */\n\n\n  get _numBuffers() {\n    return this._buffers.length;\n  }\n  /** @internal */\n\n\n  get _indexBuffer() {\n    return this._bufferIndex;\n  }\n  /** Gets the name of this buffer */\n\n\n  get name() {\n    return this._name;\n  }\n  /** Gets the current effect */\n\n\n  get currentEffect() {\n    return this._currentEffect;\n  }\n\n  _buffersEqual(buf1, buf2) {\n    for (let i = 0; i < buf1.length; ++i) {\n      if (buf1[i] !== buf2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  _copyBuffer(src, dst) {\n    for (let i = 0; i < src.length; ++i) {\n      dst[i] = src[i];\n    }\n  }\n  /**\n   * Updates the WebGL Uniform Buffer on the GPU.\n   * If the `dynamic` flag is set to true, no cache comparison is done.\n   * Otherwise, the buffer will be updated only if the cache differs.\n   */\n\n\n  update() {\n    if (this._noUBO) {\n      return;\n    }\n\n    this.bindUniformBuffer();\n\n    if (!this._buffer) {\n      this.create();\n      return;\n    }\n\n    if (!this._dynamic && !this._needSync) {\n      this._createBufferOnWrite = this._engine._features.trackUbosInFrame;\n      return;\n    }\n\n    if (this._buffers && this._buffers.length > 1 && this._buffers[this._bufferIndex][1]) {\n      if (this._buffersEqual(this._bufferData, this._buffers[this._bufferIndex][1])) {\n        this._needSync = false;\n        this._createBufferOnWrite = this._engine._features.trackUbosInFrame;\n        return;\n      } else {\n        this._copyBuffer(this._bufferData, this._buffers[this._bufferIndex][1]);\n      }\n    }\n\n    this._engine.updateUniformBuffer(this._buffer, this._bufferData);\n\n    if (this._engine._features._collectUbosUpdatedInFrame) {\n      if (!UniformBuffer._UpdatedUbosInFrame[this._name]) {\n        UniformBuffer._UpdatedUbosInFrame[this._name] = 0;\n      }\n\n      UniformBuffer._UpdatedUbosInFrame[this._name]++;\n    }\n\n    this._needSync = false;\n    this._createBufferOnWrite = this._engine._features.trackUbosInFrame;\n  }\n\n  _createNewBuffer() {\n    if (this._bufferIndex + 1 < this._buffers.length) {\n      this._bufferIndex++;\n      this._buffer = this._buffers[this._bufferIndex][0];\n      this._createBufferOnWrite = false;\n      this._needSync = true;\n    } else {\n      this._rebuild();\n    }\n  }\n\n  _checkNewFrame() {\n    if (this._engine._features.trackUbosInFrame && this._currentFrameId !== this._engine.frameId) {\n      this._currentFrameId = this._engine.frameId;\n      this._createBufferOnWrite = false;\n\n      if (this._buffers && this._buffers.length > 0) {\n        this._needSync = this._bufferIndex !== 0;\n        this._bufferIndex = 0;\n        this._buffer = this._buffers[this._bufferIndex][0];\n      } else {\n        this._bufferIndex = -1;\n      }\n    }\n  }\n  /**\n   * Updates the value of an uniform. The `update` method must be called afterwards to make it effective in the GPU.\n   * @param uniformName Define the name of the uniform, as used in the uniform block in the shader.\n   * @param data Define the flattened data\n   * @param size Define the size of the data.\n   */\n\n\n  updateUniform(uniformName, data, size) {\n    this._checkNewFrame();\n\n    let location = this._uniformLocations[uniformName];\n\n    if (location === undefined) {\n      if (this._buffer) {\n        // Cannot add an uniform if the buffer is already created\n        _logger.Logger.Error(\"Cannot add an uniform after UBO has been created.\");\n\n        return;\n      }\n\n      this.addUniform(uniformName, size);\n      location = this._uniformLocations[uniformName];\n    }\n\n    if (!this._buffer) {\n      this.create();\n    }\n\n    if (!this._dynamic) {\n      // Cache for static uniform buffers\n      let changed = false;\n\n      for (let i = 0; i < size; i++) {\n        // We are checking the matrix cache before calling updateUniform so we do not need to check it here\n        // Hence the test for size === 16 to simply commit the matrix values\n        if (size === 16 && !this._engine._features.uniformBufferHardCheckMatrix || this._bufferData[location + i] !== _tools.Tools.FloatRound(data[i])) {\n          changed = true;\n\n          if (this._createBufferOnWrite) {\n            this._createNewBuffer();\n          }\n\n          this._bufferData[location + i] = data[i];\n        }\n      }\n\n      this._needSync = this._needSync || changed;\n    } else {\n      // No cache for dynamic\n      for (let i = 0; i < size; i++) {\n        this._bufferData[location + i] = data[i];\n      }\n    }\n  }\n  /**\n   * Updates the value of an uniform. The `update` method must be called afterwards to make it effective in the GPU.\n   * @param uniformName Define the name of the uniform, as used in the uniform block in the shader.\n   * @param data Define the flattened data\n   * @param size Define the size of the data.\n   */\n\n\n  updateUniformArray(uniformName, data, size) {\n    this._checkNewFrame();\n\n    const location = this._uniformLocations[uniformName];\n\n    if (location === undefined) {\n      _logger.Logger.Error(\"Cannot add an uniform Array dynamically. Please, add it using addUniform and make sure that uniform buffers are supported by the current engine.\");\n\n      return;\n    }\n\n    if (!this._buffer) {\n      this.create();\n    }\n\n    const arraySizes = this._uniformArraySizes[uniformName];\n\n    if (!this._dynamic) {\n      // Cache for static uniform buffers\n      let changed = false;\n      let countToFour = 0;\n      let baseStride = 0;\n\n      for (let i = 0; i < size; i++) {\n        if (this._bufferData[location + baseStride * 4 + countToFour] !== _tools.Tools.FloatRound(data[i])) {\n          changed = true;\n\n          if (this._createBufferOnWrite) {\n            this._createNewBuffer();\n          }\n\n          this._bufferData[location + baseStride * 4 + countToFour] = data[i];\n        }\n\n        countToFour++;\n\n        if (countToFour === arraySizes.strideSize) {\n          for (; countToFour < 4; countToFour++) {\n            this._bufferData[location + baseStride * 4 + countToFour] = 0;\n          }\n\n          countToFour = 0;\n          baseStride++;\n        }\n      }\n\n      this._needSync = this._needSync || changed;\n    } else {\n      // No cache for dynamic\n      for (let i = 0; i < size; i++) {\n        this._bufferData[location + i] = data[i];\n      }\n    }\n  }\n\n  _cacheMatrix(name, matrix) {\n    this._checkNewFrame();\n\n    const cache = this._valueCache[name];\n    const flag = matrix.updateFlag;\n\n    if (cache !== undefined && cache === flag) {\n      return false;\n    }\n\n    this._valueCache[name] = flag;\n    return true;\n  } // Update methods\n\n\n  _updateMatrix3x3ForUniform(name, matrix) {\n    // To match std140, matrix must be realigned\n    for (let i = 0; i < 3; i++) {\n      UniformBuffer._TempBuffer[i * 4] = matrix[i * 3];\n      UniformBuffer._TempBuffer[i * 4 + 1] = matrix[i * 3 + 1];\n      UniformBuffer._TempBuffer[i * 4 + 2] = matrix[i * 3 + 2];\n      UniformBuffer._TempBuffer[i * 4 + 3] = 0.0;\n    }\n\n    this.updateUniform(name, UniformBuffer._TempBuffer, 12);\n  }\n\n  _updateMatrix3x3ForEffect(name, matrix) {\n    this._currentEffect.setMatrix3x3(name, matrix);\n  }\n\n  _updateMatrix2x2ForEffect(name, matrix) {\n    this._currentEffect.setMatrix2x2(name, matrix);\n  }\n\n  _updateMatrix2x2ForUniform(name, matrix) {\n    // To match std140, matrix must be realigned\n    for (let i = 0; i < 2; i++) {\n      UniformBuffer._TempBuffer[i * 4] = matrix[i * 2];\n      UniformBuffer._TempBuffer[i * 4 + 1] = matrix[i * 2 + 1];\n      UniformBuffer._TempBuffer[i * 4 + 2] = 0.0;\n      UniformBuffer._TempBuffer[i * 4 + 3] = 0.0;\n    }\n\n    this.updateUniform(name, UniformBuffer._TempBuffer, 8);\n  }\n\n  _updateFloatForEffect(name, x) {\n    this._currentEffect.setFloat(name, x);\n  }\n\n  _updateFloatForUniform(name, x) {\n    UniformBuffer._TempBuffer[0] = x;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 1);\n  }\n\n  _updateFloat2ForEffect(name, x, y, suffix = \"\") {\n    this._currentEffect.setFloat2(name + suffix, x, y);\n  }\n\n  _updateFloat2ForUniform(name, x, y) {\n    UniformBuffer._TempBuffer[0] = x;\n    UniformBuffer._TempBuffer[1] = y;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 2);\n  }\n\n  _updateFloat3ForEffect(name, x, y, z, suffix = \"\") {\n    this._currentEffect.setFloat3(name + suffix, x, y, z);\n  }\n\n  _updateFloat3ForUniform(name, x, y, z) {\n    UniformBuffer._TempBuffer[0] = x;\n    UniformBuffer._TempBuffer[1] = y;\n    UniformBuffer._TempBuffer[2] = z;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 3);\n  }\n\n  _updateFloat4ForEffect(name, x, y, z, w, suffix = \"\") {\n    this._currentEffect.setFloat4(name + suffix, x, y, z, w);\n  }\n\n  _updateFloat4ForUniform(name, x, y, z, w) {\n    UniformBuffer._TempBuffer[0] = x;\n    UniformBuffer._TempBuffer[1] = y;\n    UniformBuffer._TempBuffer[2] = z;\n    UniformBuffer._TempBuffer[3] = w;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 4);\n  }\n\n  _updateFloatArrayForEffect(name, array) {\n    this._currentEffect.setFloatArray(name, array);\n  }\n\n  _updateFloatArrayForUniform(name, array) {\n    this.updateUniformArray(name, array, array.length);\n  }\n\n  _updateArrayForEffect(name, array) {\n    this._currentEffect.setArray(name, array);\n  }\n\n  _updateArrayForUniform(name, array) {\n    this.updateUniformArray(name, array, array.length);\n  }\n\n  _updateIntArrayForEffect(name, array) {\n    this._currentEffect.setIntArray(name, array);\n  }\n\n  _updateIntArrayForUniform(name, array) {\n    UniformBuffer._TempBufferInt32View.set(array);\n\n    this.updateUniformArray(name, UniformBuffer._TempBuffer, array.length);\n  }\n\n  _updateUIntArrayForEffect(name, array) {\n    this._currentEffect.setUIntArray(name, array);\n  }\n\n  _updateUIntArrayForUniform(name, array) {\n    UniformBuffer._TempBufferUInt32View.set(array);\n\n    this.updateUniformArray(name, UniformBuffer._TempBuffer, array.length);\n  }\n\n  _updateMatrixForEffect(name, mat) {\n    this._currentEffect.setMatrix(name, mat);\n  }\n\n  _updateMatrixForUniform(name, mat) {\n    if (this._cacheMatrix(name, mat)) {\n      this.updateUniform(name, mat.toArray(), 16);\n    }\n  }\n\n  _updateMatricesForEffect(name, mat) {\n    this._currentEffect.setMatrices(name, mat);\n  }\n\n  _updateMatricesForUniform(name, mat) {\n    this.updateUniform(name, mat, mat.length);\n  }\n\n  _updateVector3ForEffect(name, vector) {\n    this._currentEffect.setVector3(name, vector);\n  }\n\n  _updateVector3ForUniform(name, vector) {\n    UniformBuffer._TempBuffer[0] = vector.x;\n    UniformBuffer._TempBuffer[1] = vector.y;\n    UniformBuffer._TempBuffer[2] = vector.z;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 3);\n  }\n\n  _updateVector4ForEffect(name, vector) {\n    this._currentEffect.setVector4(name, vector);\n  }\n\n  _updateVector4ForUniform(name, vector) {\n    UniformBuffer._TempBuffer[0] = vector.x;\n    UniformBuffer._TempBuffer[1] = vector.y;\n    UniformBuffer._TempBuffer[2] = vector.z;\n    UniformBuffer._TempBuffer[3] = vector.w;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 4);\n  }\n\n  _updateColor3ForEffect(name, color, suffix = \"\") {\n    this._currentEffect.setColor3(name + suffix, color);\n  }\n\n  _updateColor3ForUniform(name, color) {\n    UniformBuffer._TempBuffer[0] = color.r;\n    UniformBuffer._TempBuffer[1] = color.g;\n    UniformBuffer._TempBuffer[2] = color.b;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 3);\n  }\n\n  _updateColor4ForEffect(name, color, alpha, suffix = \"\") {\n    this._currentEffect.setColor4(name + suffix, color, alpha);\n  }\n\n  _updateDirectColor4ForEffect(name, color, suffix = \"\") {\n    this._currentEffect.setDirectColor4(name + suffix, color);\n  }\n\n  _updateColor4ForUniform(name, color, alpha) {\n    UniformBuffer._TempBuffer[0] = color.r;\n    UniformBuffer._TempBuffer[1] = color.g;\n    UniformBuffer._TempBuffer[2] = color.b;\n    UniformBuffer._TempBuffer[3] = alpha;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 4);\n  }\n\n  _updateDirectColor4ForUniform(name, color) {\n    UniformBuffer._TempBuffer[0] = color.r;\n    UniformBuffer._TempBuffer[1] = color.g;\n    UniformBuffer._TempBuffer[2] = color.b;\n    UniformBuffer._TempBuffer[3] = color.a;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 4);\n  }\n\n  _updateIntForEffect(name, x, suffix = \"\") {\n    this._currentEffect.setInt(name + suffix, x);\n  }\n\n  _updateIntForUniform(name, x) {\n    UniformBuffer._TempBufferInt32View[0] = x;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 1);\n  }\n\n  _updateInt2ForEffect(name, x, y, suffix = \"\") {\n    this._currentEffect.setInt2(name + suffix, x, y);\n  }\n\n  _updateInt2ForUniform(name, x, y) {\n    UniformBuffer._TempBufferInt32View[0] = x;\n    UniformBuffer._TempBufferInt32View[1] = y;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 2);\n  }\n\n  _updateInt3ForEffect(name, x, y, z, suffix = \"\") {\n    this._currentEffect.setInt3(name + suffix, x, y, z);\n  }\n\n  _updateInt3ForUniform(name, x, y, z) {\n    UniformBuffer._TempBufferInt32View[0] = x;\n    UniformBuffer._TempBufferInt32View[1] = y;\n    UniformBuffer._TempBufferInt32View[2] = z;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 3);\n  }\n\n  _updateInt4ForEffect(name, x, y, z, w, suffix = \"\") {\n    this._currentEffect.setInt4(name + suffix, x, y, z, w);\n  }\n\n  _updateInt4ForUniform(name, x, y, z, w) {\n    UniformBuffer._TempBufferInt32View[0] = x;\n    UniformBuffer._TempBufferInt32View[1] = y;\n    UniformBuffer._TempBufferInt32View[2] = z;\n    UniformBuffer._TempBufferInt32View[3] = w;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 4);\n  }\n\n  _updateUIntForEffect(name, x, suffix = \"\") {\n    this._currentEffect.setUInt(name + suffix, x);\n  }\n\n  _updateUIntForUniform(name, x) {\n    UniformBuffer._TempBufferUInt32View[0] = x;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 1);\n  }\n\n  _updateUInt2ForEffect(name, x, y, suffix = \"\") {\n    this._currentEffect.setUInt2(name + suffix, x, y);\n  }\n\n  _updateUInt2ForUniform(name, x, y) {\n    UniformBuffer._TempBufferUInt32View[0] = x;\n    UniformBuffer._TempBufferUInt32View[1] = y;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 2);\n  }\n\n  _updateUInt3ForEffect(name, x, y, z, suffix = \"\") {\n    this._currentEffect.setUInt3(name + suffix, x, y, z);\n  }\n\n  _updateUInt3ForUniform(name, x, y, z) {\n    UniformBuffer._TempBufferUInt32View[0] = x;\n    UniformBuffer._TempBufferUInt32View[1] = y;\n    UniformBuffer._TempBufferUInt32View[2] = z;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 3);\n  }\n\n  _updateUInt4ForEffect(name, x, y, z, w, suffix = \"\") {\n    this._currentEffect.setUInt4(name + suffix, x, y, z, w);\n  }\n\n  _updateUInt4ForUniform(name, x, y, z, w) {\n    UniformBuffer._TempBufferUInt32View[0] = x;\n    UniformBuffer._TempBufferUInt32View[1] = y;\n    UniformBuffer._TempBufferUInt32View[2] = z;\n    UniformBuffer._TempBufferUInt32View[3] = w;\n    this.updateUniform(name, UniformBuffer._TempBuffer, 4);\n  }\n  /**\n   * Sets a sampler uniform on the effect.\n   * @param name Define the name of the sampler.\n   * @param texture Define the texture to set in the sampler\n   */\n\n\n  setTexture(name, texture) {\n    this._currentEffect.setTexture(name, texture);\n  }\n  /**\n   * Directly updates the value of the uniform in the cache AND on the GPU.\n   * @param uniformName Define the name of the uniform, as used in the uniform block in the shader.\n   * @param data Define the flattened data\n   */\n\n\n  updateUniformDirectly(uniformName, data) {\n    this.updateUniform(uniformName, data, data.length);\n    this.update();\n  }\n  /**\n   * Associates an effect to this uniform buffer\n   * @param effect Define the effect to associate the buffer to\n   * @param name Name of the uniform block in the shader.\n   */\n\n\n  bindToEffect(effect, name) {\n    this._currentEffect = effect;\n    this._currentEffectName = name;\n  }\n  /**\n   * Binds the current (GPU) buffer to the effect\n   */\n\n\n  bindUniformBuffer() {\n    if (!this._noUBO && this._buffer && this._currentEffect) {\n      this._currentEffect.bindUniformBuffer(this._buffer, this._currentEffectName);\n    }\n  }\n  /**\n   * Dissociates the current effect from this uniform buffer\n   */\n\n\n  unbindEffect() {\n    this._currentEffect = undefined;\n    this._currentEffectName = undefined;\n  }\n  /**\n   * Sets the current state of the class (_bufferIndex, _buffer) to point to the data buffer passed in parameter if this buffer is one of the buffers handled by the class (meaning if it can be found in the _buffers array)\n   * This method is meant to be able to update a buffer at any time: just call setDataBuffer to set the class in the right state, call some updateXXX methods and then call udpate() => that will update the GPU buffer on the graphic card\n   * @param dataBuffer buffer to look for\n   * @returns true if the buffer has been found and the class internal state points to it, else false\n   */\n\n\n  setDataBuffer(dataBuffer) {\n    if (!this._buffers) {\n      return this._buffer === dataBuffer;\n    }\n\n    for (let b = 0; b < this._buffers.length; ++b) {\n      const buffer = this._buffers[b];\n\n      if (buffer[0] === dataBuffer) {\n        this._bufferIndex = b;\n        this._buffer = dataBuffer;\n        this._createBufferOnWrite = false;\n        this._currentEffect = undefined;\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n   * Disposes the uniform buffer.\n   */\n\n\n  dispose() {\n    if (this._noUBO) {\n      return;\n    }\n\n    const uniformBuffers = this._engine._uniformBuffers;\n    const index = uniformBuffers.indexOf(this);\n\n    if (index !== -1) {\n      uniformBuffers[index] = uniformBuffers[uniformBuffers.length - 1];\n      uniformBuffers.pop();\n    }\n\n    if (this._engine._features.trackUbosInFrame && this._buffers) {\n      for (let i = 0; i < this._buffers.length; ++i) {\n        const buffer = this._buffers[i][0];\n\n        this._engine._releaseBuffer(buffer);\n      }\n    } else if (this._buffer && this._engine._releaseBuffer(this._buffer)) {\n      this._buffer = null;\n    }\n  }\n\n}\n/** @internal */\n\n\nexports.UniformBuffer = UniformBuffer;\nUniformBuffer._UpdatedUbosInFrame = {}; // Pool for avoiding memory leaks\n\nUniformBuffer._MAX_UNIFORM_SIZE = 256;\nUniformBuffer._TempBuffer = new Float32Array(UniformBuffer._MAX_UNIFORM_SIZE);\nUniformBuffer._TempBufferInt32View = new Int32Array(UniformBuffer._TempBuffer.buffer);\nUniformBuffer._TempBufferUInt32View = new Uint32Array(UniformBuffer._TempBuffer.buffer);\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","UniformBuffer","_logger","_tools","constructor","engine","data","dynamic","name","forceNoUniformBuffer","_valueCache","_engine","_noUBO","supportsUniformBuffers","_dynamic","_name","_data","_uniformLocations","_uniformSizes","_uniformArraySizes","_uniformLocationPointer","_needSync","_features","trackUbosInFrame","_buffers","_bufferIndex","_createBufferOnWrite","_currentFrameId","updateMatrix3x3","_updateMatrix3x3ForEffect","updateMatrix2x2","_updateMatrix2x2ForEffect","updateFloat","_updateFloatForEffect","updateFloat2","_updateFloat2ForEffect","updateFloat3","_updateFloat3ForEffect","updateFloat4","_updateFloat4ForEffect","updateFloatArray","_updateFloatArrayForEffect","updateArray","_updateArrayForEffect","updateIntArray","_updateIntArrayForEffect","updateUIntArray","_updateUIntArrayForEffect","updateMatrix","_updateMatrixForEffect","updateMatrices","_updateMatricesForEffect","updateVector3","_updateVector3ForEffect","updateVector4","_updateVector4ForEffect","updateColor3","_updateColor3ForEffect","updateColor4","_updateColor4ForEffect","updateDirectColor4","_updateDirectColor4ForEffect","updateInt","_updateIntForEffect","updateInt2","_updateInt2ForEffect","updateInt3","_updateInt3ForEffect","updateInt4","_updateInt4ForEffect","updateUInt","_updateUIntForEffect","updateUInt2","_updateUInt2ForEffect","updateUInt3","_updateUInt3ForEffect","updateUInt4","_updateUInt4ForEffect","_uniformBuffers","push","_updateMatrix3x3ForUniform","_updateMatrix2x2ForUniform","_updateFloatForUniform","_updateFloat2ForUniform","_updateFloat3ForUniform","_updateFloat4ForUniform","_updateFloatArrayForUniform","_updateArrayForUniform","_updateIntArrayForUniform","_updateUIntArrayForUniform","_updateMatrixForUniform","_updateMatricesForUniform","_updateVector3ForUniform","_updateVector4ForUniform","_updateColor3ForUniform","_updateColor4ForUniform","_updateDirectColor4ForUniform","_updateIntForUniform","_updateInt2ForUniform","_updateInt3ForUniform","_updateInt4ForUniform","_updateUIntForUniform","_updateUInt2ForUniform","_updateUInt3ForUniform","_updateUInt4ForUniform","isDynamic","undefined","getData","_bufferData","getBuffer","_buffer","_fillAlignment","size","alignment","oldPointer","diff","i","addUniform","arraySize","Array","strideSize","length","addMatrix","mat","prototype","slice","call","toArray","addFloat2","x","y","temp","addFloat3","z","addColor3","color","r","g","b","addColor4","alpha","addVector3","vector","addMatrix3x3","addMatrix2x2","create","Float32Array","_rebuild","createDynamicUniformBuffer","createUniformBuffer","checkUbosContentBeforeUpload","_currentEffect","_buffersEqual","buf1","buf2","_copyBuffer","src","dst","update","bindUniformBuffer","updateUniformBuffer","_collectUbosUpdatedInFrame","_UpdatedUbosInFrame","_createNewBuffer","_checkNewFrame","frameId","updateUniform","uniformName","location","Logger","Error","changed","uniformBufferHardCheckMatrix","Tools","FloatRound","updateUniformArray","arraySizes","countToFour","baseStride","_cacheMatrix","matrix","cache","flag","updateFlag","_TempBuffer","setMatrix3x3","setMatrix2x2","setFloat","suffix","setFloat2","setFloat3","w","setFloat4","array","setFloatArray","setArray","setIntArray","_TempBufferInt32View","set","setUIntArray","_TempBufferUInt32View","setMatrix","setMatrices","setVector3","setVector4","setColor3","setColor4","setDirectColor4","a","setInt","setInt2","setInt3","setInt4","setUInt","setUInt2","setUInt3","setUInt4","setTexture","texture","updateUniformDirectly","bindToEffect","effect","_currentEffectName","unbindEffect","setDataBuffer","dataBuffer","buffer","dispose","uniformBuffers","index","indexOf","pop","_releaseBuffer","_MAX_UNIFORM_SIZE","Int32Array","Uint32Array"]
}
